(function(a){var k={name:null,className:"sinobest-areaselect",required:!1,placeholder:null,disabled:!1,readonly:!1,callback:null,data:null,url:null,rootId:null,level:3,value:null,beforeSend:null,complete:null,valueField:"code",labelField:"detail",delimiter:null,saveType:"c",otherRequestParam:null,labelDelimiter:";",parentField:"pId",zIndex:null,onChange:null,editable:!1,mode:"all",transUrl:null,onTranslateRequest:null,onTranslateResponse:null,onInitComplete:null,defaultValue:null,canNotModifyLevel:null,
setValueTriggerChange:!0};a.fn.sbareaselect=function(b){function q(){return p.data("$areaselect")}function r(a,c){var d=p.selectedItems,g=[];if(void 0!=d)if("c"==a)for(var h=0,A=d.length;h<A;h++)g.push(d[h][p.settings.valueField]);else for(h=0,A=d.length;h<A;h++)g.push(d[h][p.settings.labelField]);d=[];if("all"===p.settings.mode||c)d=g;else for(h=g.length-1;h<g.length;h++)d.push(g[h]);return p.settings.delimiter?d.join(p.settings.delimiter):d}function n(){p.settings.setValueTriggerChange&&z(p.getSelectItems())}
function z(c){a.isFunction(p.settings.onChange)&&p.settings.onChange.apply(p,[c])}function l(a,c,d){p.valueHolder.addBase2(a,c,d||!1);p.valueHolder.isProcessState()||f(a,c,d)}function f(c,d,g){a.sbtools.isBlank(c)&&a.sbtools.isNotBlank(p.settings.defaultValue)&&K()&&(c=p.settings.defaultValue,g=!0);p.find("a.selected").removeClass("selected");p.selectedItems=[];p.$input.val("");p.settings.value=c;a.sbtools.isNotBlank(c)?(c=a.sbtools.convertSetValue(c),"all"===p.settings.mode||g?u(c):y(c,function(c,
d){c=c.concat(d);var g="",g=p.settings.delimiter?c.join(p.settings.delimiter):a.sbtools.convertSetValue(c);u(g)})):(p.valueHolder.remove(),d&&a.isFunction(d)&&d())}function u(d){p.valueHolder.setVal(a.sbbase.ValueHolder.CONSTANTS.CONVERT_VAL_KEY,d);if(a.isArray(d)){for(var g="",h=[],A=0;A<d.length;A++){var e={};e[p.settings.valueField]=d[A][p.settings.valueField];e[p.settings.labelField]=d[A][p.settings.labelField];h.push(e);g+=d[A][p.settings.labelField];A!=d.length-1&&(g+=p.settings.labelDelimiter)}p.selectedItems=
h;p.$input.val(g);m()}else p.isBuilded?m():(c(),L(),p.isBuilded=!0)}function m(){p.isBuilded&&(B(!0),G(0,p.settings.level-1))}function y(c,d){a.isArray(c)&&0<c.length&&(c="c"===p.settings.saveType?c[0][p.settings.valueField]:c[0][p.settings.labelField]);if(p.settings.data)return d(t(c),c);if(!p.settings.transUrl)return d([],c);var g={value:c,saveType:p.settings.saveType,level:p.settings.level};a.extend(g,p.settings.otherRequestParam||{});p.settings.onTranslateRequest&&a.isFunction(p.settings.onTranslateRequest)&&
(g=p.settings.onTranslateRequest(g));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(g),url:p.settings.transUrl,success:function(g){if(p.settings.onTranslateResponse&&a.isFunction(p.settings.onTranslateResponse))p.settings.onTranslateResponse(g);d(g,c)},error:function(c,d,g){d={};d.code=c.status;d.msg=a.sberror.format(d.code,this.url);a.sberror.onError(d)}})}function t(a){for(var c="c"===p.settings.saveType?p.settings.valueField:p.settings.labelField,
d=null,g=0;g<p.settings.data.length;g++){var h=p.settings.data[g];if(h[c]===a){d=h;break}}if(null===d)return[];a=[];if(1!==p.settings.level){c=d[p.settings.parentField];a.push(c);for(d=0;d<p.settings.level-1;d++){a:{for(g=0;g<p.settings.data.length;g++)if(h=p.settings.data[g],h[p.settings.valueField]===c){c=h;break a}c=null}if(null==c||c[p.settings.parentField]===p.settings.rootId)break;else c=c[p.settings.parentField],a.push(c)}a.reverse()}return a}function D(){a.sbtools.initController.initComplete(p,
"$sbareaselect",function(){p.data("$areaselect")||p.data("$areaselect",p)},p.settings.onInitComplete)}function e(){p.addClass(p.settings.className);p.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);p.addClass("sinob-widget-container");p.valueHolder=new a.sbbase.ValueHolder;p.$input=a('<input type="text" class="'+a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON+' areaselect-input"></input>');p.settings.name&&p.$input.attr("name",p.settings.name);p.append(p.$input);p.$input.attr("required",p.settings.required);
p.settings.placeholder&&(p.$input.attr("placeholder",p.settings.placeholder),a.sbtools.isPlaceHolderSupported()||p.$input.placeholder());p.$input.attr("readonly",p.settings.readonly);a.sbtools.toggleInputReadonlyClass(p.$input,p.settings.readonly);p.$input.attr("disabled",p.settings.disabled);a.sbtools.toggleInputDisabledClass(p.$input,p.settings.disabled);v();p.$input.on("click",function(){p.settings.readonly||void 0!=p.$dropdown&&p.$dropdown.is(":visible")||(p.isBuilded||(c(),L(),p.isBuilded=!0),
p.$dropdown.show(),C(),w())});null!==p.settings.value&&void 0!==p.settings.value?l(p.settings.value,function(){D();n()}):null!==p.settings.defaultValue&&void 0!==p.settings.defaultValue?l(p.settings.defaultValue,function(){D();n()},!0):D();p.data("$areaselect",p);return p}function v(){p.settings.editable||p.$input.attr("readonly",!0)}function C(){if(a.sbtools.isIE6()){var c=p.$dropdownTabs.find("ul.dropdown-content-tab"),d=0;c.children("li").each(function(){d+=a(this).outerWidth(!0)});d+=c.children("a.clear-all-btn").outerWidth(!0)+
50;d=450<d?d:450;c.width(d)}}function w(){a.sbtools.isIE7()&&(p.$dropdownContent.css({left:"0px"}),p.width());a.sbtools.adjustInputPopupDropdownContainerPosition(p.$input,p.$dropdownContent)}function c(){var c=1;a.each(p.settings.data||{},function(d){d=a(this).attr("level");c=Math.max(c,d)});p.settings.level=Math.max(p.settings.level,c);p.$dropdown=a('<span class="areaselect-dropdown"></span>');p.$dropdownContent=a('<div class="areaselect-dropdown-content"></div>');p.settings.zIndex&&p.$dropdownContent.css("z-index",
p.settings.zIndex);p.$dropdownTabs=a('<div class="dropdown-content-tabs"></div>');for(var d=a('<ul class="dropdown-content-tab"></ul>'),g=0;g<p.settings.level;g++){var h=a('<li data-index="'+g+'"><a href="javascript:void(0);"><em>请选择</em><i></i></a></li>');d.append(h)}d.append('<a href="javascript:void(0);" class="clear-all-btn">清空</a>');p.$dropdownTabs.append(d);x();p.$dropdownContent.append(p.$dropdownTabs);p.$dropdownContent.append('<div class="areaselect-dropdown-close"></div>');p.$dropdown.append(p.$dropdownContent);
p.append(p.$dropdown)}function x(){p.settings.data?h(p.settings.data):g({pid:p.settings.rootId},function(a){h(a)},[])}function h(c){for(var g=0;g<p.settings.level;g++){var h=a('<div class="tab-content" data-area="'+g+'"><ul class="area-list-content"></ul></div>');0==g&&d(g,p.settings.rootId,c,h.find("ul.area-list-content"));p.$dropdownTabs.append(h)}B(!0)}function d(c,d,g,h){if(p.settings.data){g=p.settings.data;for(var A=[],e=0;e<g.length;e++){var B=g[e];B[p.settings.parentField]==d&&A.push(B)}d=
A}else d=g;h.html("");for(g=0;g<d.length;g++)e=d[g],A=a('<a href="javascript:void(0);"></a>'),A.attr("data-value",e[p.settings.valueField]),A.text(e[p.settings.labelField]),A.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,e),e=a("<li></li>"),e.append(A),c+1<p.settings.level&&e.append('<div class="next-level"></div>'),h.append(e)}function B(a){if(p.valueHolder.hasValue())for(var c=A(),d=0;d<c.length;d++){var g=c[d],h=p.find(".tab-content[data-area="+d+"] a").length;p.settings.url&&0!=d&&(h=0);h?d<c.length-
1?I(d,g):M(d,g,a):(h={},h.i=d,h.item=g,d<c.length-1?h.method="proxyClick":(h.method="proxySelect",h.silent=a),p.data("$proxy"+d,h))}}function A(){var c=p.valueHolder.getConvertVal(),d=[];if(a.isArray(c))for(var g=0;g<c.length;g++)d.push(c[g][p.settings.valueField]);else d=p.settings.delimiter?c.split(p.settings.delimiter):c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER);return d}function I(c,d){p.find(".tab-content[data-area="+c+"] a").each(function(){"c"==p.settings.saveType?a(this).attr("data-value")==
d&&a(this).parent().find(".next-level").trigger("click"):a(this).text()==d&&a(this).parent().find(".next-level").trigger("click")})}function M(c,d,g){p.find(".tab-content[data-area="+c+"] a").each(function(){"c"==p.settings.saveType?a(this).attr("data-value")==d&&(a(this).trigger("click",g),a(this).parent().find(".next-level").trigger("click")):a(this).text()==d&&(a(this).trigger("click",g),a(this).parent().find(".next-level").trigger("click"))})}function L(){O(p.find(".dropdown-content-tab li").eq(0));
p.find(".areaselect-dropdown-close").click(function(){p.$dropdown.hide()});p.find(".dropdown-content-tab li").on("click",function(){var c=a(this).attr("data-index");if(a(this).hasClass("tab-curr")||N(c))return!1;p.find(".tab-curr").each(function(){var c=a(this).attr("data-index");R(c)});P();O(a(this));Q(c)});p.off("click",".area-list-content a").on("click",".area-list-content a",function(c,d){var g=p.find(".area-list-content a.selected").attr("data-value");p.find(".area-list-content a.selected").removeClass("selected");
a(this).addClass("selected");for(var h=a(this).parents(".tab-content").eq(0).attr("data-area"),h=parseInt(h),A=[],e=0;e<h;e++){var B={},b=B,f=p.settings.valueField,m;m=p.find(".dropdown-content-tab li[data-index="+e+"]").find("a").attr("data-value");b[f]=m;b=B;f=p.settings.labelField;m=p.find(".dropdown-content-tab li[data-index="+e+"]").find("em").text();b[f]=m;b=B;f=a.sbtools.CONSTANTS.DATA_SBITEM_KEY;m=B[p.settings.valueField];m=p.find(".tab-content[data-area='"+e+"']").find("a[data-value='"+m+
"']").data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY);b[f]=m;A.push(B)}e=a(this).text();B=a(this).attr("data-value");b={};b[p.settings.valueField]=B;b[p.settings.labelField]=e;b[a.sbtools.CONSTANTS.DATA_SBITEM_KEY]=a(this).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY);A.push(b);f="";for(m=0;m<A.length;m++)f+=A[m][p.settings.labelField],m!=A.length-1&&(f+=p.settings.labelDelimiter);p.$input.val(f);p.selectedItems=A;H(h,e,B);C();w();!d&&g!=B&&p.settings.onChange&&z([b]);return!1}).on("mouseenter",".area-list-content a",
function(){a(this).next(".next-level").show()}).on("mouseleave",".area-list-content li",function(){a(this).find(".next-level").hide()}).off("click",".next-level").on("click",".next-level",function(){var c=a(this).prev("a").eq(0).attr("data-value"),d=a(this).prev("a").eq(0).text(),g=a(this).parents(".tab-content").eq(0).attr("data-area"),g=parseInt(g);H(g,d,c);a(this).hide();R(g);P();d=g+1;E(d,c);Q(d);O(p.find(".dropdown-content-tab li[data-index="+d+"]"));return!1});p.find(".clear-all-btn").on("click",
function(){p.setValue("")});p.$dropdown.on("mouseleave",function(){p.$keepDropdown?p.$keepDropdown=null:p.isAjaxLoading&&p.$dropdownContent.is(":visible")||p.getValue()&&0<p.getValue().length&&p.$dropdown.hide()});G(0,p.settings.level-1);F();J()}function G(a,c){if(p.data("$proxy"+a)){var d=p.data("$proxy"+a);p.removeData("$proxy"+a);"proxySelect"==d.method?M(d.i,d.item,d.silent):"proxyClick"==d.method&&I(d.i,d.item)}d=A();a!=c&&d.length!=a||!p.valueHolder.hasValue()||(d=p.valueHolder.getCompleteCallBack(),
p.valueHolder.remove(),d&&d(),0<p.valueHolder.hasValue()&&f(p.valueHolder.getVal(),p.valueHolder.getCompleteCallBack(),p.valueHolder.getIsDefaultVal()))}function F(){if(null!==p.settings.value&&void 0!==p.settings.value){P();p.find(".tab-content").hide();var a=A(),c=a.length;a.length>=Number(p.settings.level)&&(c=p.settings.level-1);p.$dropdownTabs.find("ul.dropdown-content-tab>li[data-index='"+c+"']").addClass("tab-curr");Q(c)}}function J(){if(!p.settings.disabled&&!p.settings.readonly&&(p.find("ul.dropdown-content-tab").children("li").each(function(){a(this).removeClass("areaselect-dropdown-tab-disabled")}),
K()))if(a.isArray(p.settings.canNotModifyLevel))for(var c=0;c<p.settings.canNotModifyLevel.length;c++)p.find(".dropdown-content-tab li[data-index="+p.settings.canNotModifyLevel[c]+"]").addClass("areaselect-dropdown-tab-disabled");else p.find(".dropdown-content-tab li[data-index="+p.settings.canNotModifyLevel+"]").addClass("areaselect-dropdown-tab-disabled")}function N(c){if(!K())return!1;if(a.isArray(p.settings.canNotModifyLevel))for(var d=0;d<p.settings.canNotModifyLevel.length;d++){if(c==p.settings.canNotModifyLevel[d])return!0}else return p.settings.canNotModifyLevel==
c;return!1}function K(){return null!==p.settings.canNotModifyLevel&&void 0!==p.settings.canNotModifyLevel}function H(a,c,d){c=c||"请选择";var g=p.find(".dropdown-content-tab li[data-index="+a+"]");g.find("em").text(c);g.find("a").attr("data-value",d);a=parseInt(a)+1;0<p.find(".dropdown-content-tab li[data-index="+a+"]").length&&H(a,null,null)}function g(c,d,g){a.extend(c,p.settings.otherRequestParam||{});a.ajax({url:p.settings.url,data:JSON.stringify(c),type:"POST",contentType:"application/json; charset=utf-8",
dataType:"json",beforeSend:function(a){p.isAjaxLoading=!0;p.settings.beforeSend&&p.settings.beforeSend.apply(this,[a])},complete:function(a,c){p.isAjaxLoading=!1;if(p.settings.complete){var d=[];d.push(a);d.push(c);p.settings.complete.apply(this,d)}},success:function(a){g?(g.push(a),d.apply(this,g)):d.apply(this)},error:function(c,d,g){d={};d.code=c.status;d.msg=a.sberror.format(d.code,this.url);a.sberror.onError(d)}})}function E(a,c){var d=parseInt(a);if(c)if(p.settings.data)S(d,c,p.settings.data);
else{var h={pid:c},A=[];A.push(d);A.push(c);g(h,function(a,d,g){S(a,c,g)},A)}d+=1;0<p.find(".tab-content[data-area="+d+"] ul.area-list-content").length&&E(d)}function S(a,c,g){var h=p.find(".tab-content[data-area="+a+"] ul.area-list-content");d(a,c,g,h);G(a,p.settings.level-1)}function P(){p.find(".tab-curr").removeClass("tab-curr")}function O(a){a.addClass("tab-curr")}function R(a){p.find(".tab-content[data-area="+a+"]").hide()}function Q(a){p.find(".tab-content[data-area="+a+"]").show()}var p=this;
if(p.data("$areaselect")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();b=a.extend({},q().settings,b||{});q().settings=b;q().reload()}return q()}b=a.extend({},k,b||{});p.settings=b;a.sbbase.mixinWidget(p);p.getValue=function(){return r(p.settings.saveType)};p.getLabel=function(){return r("d")};p.setValue=function(a){l(a,function(){n()})};p.setState=function(c){a.each(c,function(c,d){void 0!==d&&null!==d?"value"==c?p.setValue(d):"required"==c?(p.settings.required=d,p.$input.attr("required",
p.settings.required)):"readonly"==c?(p.settings.readonly=d,p.$input.attr("readonly",p.settings.readonly),a.sbtools.toggleInputReadonlyClass(p.$input,d),v()):"disabled"==c?(p.settings.disabled=d,p.$input.attr("disabled",p.settings.disabled),a.sbtools.toggleInputDisabledClass(p.$input,d)):"canNotModifyLevel"==c?(p.settings.canNotModifyLevel=d,J()):p.attr(c,d):p.removeAttr(c)});return p};p.getDefaultOptions=function(){return k};p.reload=function(){p.empty();p.isBuilded=!1;a.sbtools.initController.removeInitCompleteFlag(p,
"$sbareaselect");return e()};p.load=function(c){if(a.sbtools.isNonNull(c))a.sbtools.isInPseudoProtocolBlackList(c,!0),p.settings.data=null,p.settings.url=null,a.isArray(c)?p.settings.data=c:p.settings.url=c,p.reload();else throw Error("Please set the correct data source");};p.validate=function(){if(a.isFunction(p.settings.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var c=!1;return p.settings.required&&(c=r(p.settings.saveType,!0),c=a.sbvalidator.required(p.$input[0],
c),!c)?a.sbvalidator.TEXT_REQUIRED:""};p.getName=function(){return p.settings.name};p.getSelectItems=function(){var c=p.selectedItems;if(void 0===c||null===c||0>=c.length)return[];for(var d=[],g=0;g<c.length;g++){var h=c[g];h[a.sbtools.CONSTANTS.DATA_SBITEM_KEY]?d.push(h[a.sbtools.CONSTANTS.DATA_SBITEM_KEY]):d.push("")}c=[];if("all"===p.settings.mode)c=d;else for(g=d.length-1;g<d.length;g++)c.push(d[g]);return c};return this.each(function(){e()})}})(jQuery);
(function(a){function k(){this.items=[]}a.extend({sbbase:{}});a.extend(a.sbbase,{plugins:"areaselect bigselect button checkbox commonselect date daterange image listbox numbertext password personselect radio richtexteditor select tabs text textarea tree wizard hidden commontree baseareaselect ueditor".split(" "),pluginClassPrefix:"sinobest-",translateController:{translate:function(b,k,n){if(!b.settings.transUrl&&(null===b.settings.data||void 0===b.settings.data))return n([]);k={value:k.value,saveType:b.settings.saveType};
b.settings.otherRequestParam&&a.extend(k,b.settings.otherRequestParam||{});b.settings.onTranslateRequest&&a.isFunction(b.settings.onTranslateRequest)&&(k=b.settings.onTranslateRequest.apply(b,[k]));var z=this;null!=b.settings.data&&void 0!=b.settings.data?z.translateFromLocal(b,k,function(a){z.translateResponseCallBack(b,a,n)}):z.translateFromUrl(b,k,function(a){z.translateResponseCallBack(b,a,n)})},translateFromLocal:function(b,k,n){var z=k.value;if(a.sbtools.isBlank(z))n([]);else{var l=[],l=b.settings.delimiter?
z.split(b.settings.delimiter):z.split(";"),z=b.settings.valueField;"d"===k.saveType&&(z=b.settings.labelField);k=[];for(var f=0;f<l.length;f++)for(var u=0;u<b.settings.data.length;u++){var m=b.settings.data[u];if(m[z]==l[f]){k.push(m);break}}n(k)}},translateResponseCallBack:function(b,k,n){b.settings.translateCallback&&a.isFunction(b.settings.translateCallback)?b.settings.translateCallback.apply(b,[k]):(b.settings.onTranslateResponse&&a.isFunction(b.settings.onTranslateResponse)&&b.settings.onTranslateResponse.apply(b,
[k]),n(k))},translateFromUrl:function(b,k,n){a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(k),url:b.settings.transUrl,success:function(a){n(a)},error:function(b,l,f){l={};l.code=b.status;l.msg=a.sberror.format(l.code,this.url);a.sberror.onError(l)}})}}});k.CONSTANTS={VAL_KEY:"val",COMPLETE_CALLBACK_KEY:"completeCallBack",IS_DEFAULT_VAL_KEY:"isDefaultValue",CONVERT_VAL_KEY:"convertVal"};k.prototype={hasValue:function(){return 0<this.items.length?
!0:!1},add:function(a){this.items.push(a)},addBase:function(a,b){this.items.push(this.createBaseValue(a,b))},createBaseValue:function(a,b){var n={};n[k.CONSTANTS.VAL_KEY]=a;n[k.CONSTANTS.COMPLETE_CALLBACK_KEY]=b;return n},addBase2:function(a,b,n){a=this.createBaseValue(a,b);a[k.CONSTANTS.IS_DEFAULT_VAL_KEY]=n;this.items.push(a)},remove:function(){return this.items.shift()},first:function(){return this.items[0]},getVal:function(){return this.getPropValBy(k.CONSTANTS.VAL_KEY)},getCompleteCallBack:function(){return this.getPropValBy(k.CONSTANTS.COMPLETE_CALLBACK_KEY)},
getIsDefaultVal:function(){return this.getPropValBy(k.CONSTANTS.IS_DEFAULT_VAL_KEY)},getConvertVal:function(){return this.getPropValBy(k.CONSTANTS.CONVERT_VAL_KEY)},getPropValBy:function(a){var b=this.first();return null!==b&&void 0!==b?b[a]:""},setVal:function(a,b){var k=this.first();void 0!==k&&null!==k&&(k[a]=b)},isProcessState:function(){return 1<this.items.length?!0:!1}};a.sbbase.ValueHolder=k;a.sbbase.getDomElementAttributes=function(b){var k="{";a.each(b.attributes,function(a,b){0<a&&(k+=",");
var l=b.value.replace(/\\/g,"\\\\").replace(/\"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v");k+='"'+b.name+'":"'+l+'"'});k+="}";return a.parseJSON(k)};var b=function(){var b;return function(){b||(b={baseMethods:{getState:function(){return a.extend({},a.sbbase.getDomElementAttributes(this.getDom()))},setState:function(a){},getClassName:function(){return this.getDefaultOptions().className},getDom:function(){return this[0]},reload:function(){},display:function(a){a?
this.show():this.hide();return this},destroy:function(){return this.remove()}},valueMethods:{getValue:function(){},getLabel:function(){},setValue:function(a){},validate:function(){},getName:function(){},load:function(a){}}});return b}}();a.sbbase.mixinWidget=function(k,r){var n=a.extend({isAddValueMethod:!0},r||{}),z=b(),l;for(l in z.baseMethods)k[l]||(k[l]=z.baseMethods[l]);if(n.isAddValueMethod)for(var f in z.valueMethods)k[f]||(k[f]=z.valueMethods[f])}})(jQuery);
(function(a){var k={className:"sinobest-baseareaselect",name:null,value:null,valueField:"code",labelField:"detail",data:null,url:null,required:!1,requiredLevel:null,textRequired:!1,textMinlength:null,textMaxlength:null,readonly:!1,disabled:!1,saveType:"c",level:3,hasInputText:!0,rootId:null,parentField:"pId",otherRequestParam:null,delimiter:null,isAddEmpty:!0,emptyText:"请选择",onAjaxRequest:null,onAjaxResponse:null,onChange:null,canNotModifyLevel:null,callback:null,mode:"all",transUrl:null,onTranslateRequest:null,
onTranslateResponse:null,onInitComplete:null,defaultValue:null,setValueTriggerChange:!0};a.fn.sbbaseareaselect=function(b){function q(){return g.data("$sbbaseareaselect")}function r(){g.data("$sbbaseareaselect",g)}function n(c,d){for(var h=0,A=[],e=0,B=g._$selects.length;e<B;e++){var b=g._$selects[e],f={},m=z(b,"c");f[g.settings.valueField]=m;a.sbtools.isBlank(m)&&h++;b=z(b,"d");b===g.settings.emptyText&&(b="");f[g.settings.labelField]=b;A.push(f)}g.settings.hasInputText&&(e=g._$text.val(),a.sbtools.isBlank(e)&&
h++,B={},B[g.settings.valueField]=e,B[g.settings.labelField]=e,A.push(B));e=g.settings.level;g.settings.hasInputText&&e++;if(h==e)return g.settings.delimiter?"":[];h=[];if("c"==c)for(e=0,B=A.length;e<B;e++)h.push(A[e][g.settings.valueField]);else for(e=0,B=A.length;e<B;e++)h.push(A[e][g.settings.labelField]);e=[];e="all"===g.settings.mode||d?h:h.slice(g.settings.hasInputText?A.length-2:A.length-1);return g.settings.delimiter?e.join(g.settings.delimiter):e}function z(c,d){return"c"===d?l(c).attr("data-code"):
"d"===d?l(c).text():l(c).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY)}function l(a){return a.find("option:selected")}function f(){g.settings.setValueTriggerChange&&u(g.getSelectItems(),"all")}function u(c,d){a.isFunction(g.settings.onChange)&&g.settings.onChange.apply(g,[c,d])}function m(a,c,d){g.valueHolder.addBase2(a,c,d||!1);g.isBuilded&&(g.valueHolder.isProcessState()||y(a,c,d))}function y(c,d,h){g.settings.value=c;a.sbtools.isBlank(c)&&a.sbtools.isNotBlank(g.settings.defaultValue)&&null!==g.settings.canNotModifyLevel&&
void 0!==g.settings.canNotModifyLevel&&(c=g.settings.defaultValue,h=!0);var A=a.sbtools.convertSetValue(c);"all"===g.settings.mode||h?(g.settings.hasInputText&&g._$text.setValue(A),g._$selects.setValue(A)):t(A,function(c){c=g.settings.delimiter?c.concat(A.split(g.settings.delimiter)):c.concat(A.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER));var d="",d=g.settings.delimiter?c.join(g.settings.delimiter):a.sbtools.convertSetValue(c);g.settings.hasInputText&&g._$text.setValue(d);g._$selects.setValue(d)})}
function t(c,d){if(a.sbtools.isBlank(c))return d([]);g.settings.hasInputText&&(c=g.settings.delimiter?c.split(g.settings.delimiter)[0]:c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER)[0]);if(g.settings.data)return d(D(c));if(!g.settings.transUrl)return d([]);var h={value:c,saveType:g.settings.saveType,level:g.settings.level};a.extend(h,g.settings.otherRequestParam||{});g.settings.onTranslateRequest&&a.isFunction(g.settings.onTranslateRequest)&&(h=g.settings.onTranslateRequest(h));a.ajax({type:"post",
contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(h),url:g.settings.transUrl,success:function(c){if(g.settings.onTranslateResponse&&a.isFunction(g.settings.onTranslateResponse))g.settings.onTranslateResponse(c);d(c)},error:function(c,d,g){d={};d.code=c.status;d.msg=a.sberror.format(d.code,this.url);a.sberror.onError(d)}})}function D(a){for(var c="c"===g.settings.saveType?g.settings.valueField:g.settings.labelField,d=null,h=0;h<g.settings.data.length;h++){var A=g.settings.data[h];
if(A[c]===a){d=A;break}}if(null===d)return[];a=[];if(1!==g.settings.level){c=d[g.settings.parentField];a.push(c);for(d=0;d<g.settings.level-2;d++){a:{for(h=0;h<g.settings.data.length;h++)if(A=g.settings.data[h],A[g.settings.valueField]===c){c=A;break a}c=null}if(null==c)break;else c=c[g.settings.parentField],a.push(c)}a.reverse()}return a}function e(c){g.settings.hasInputText&&(g._$text.attr("disabled",c),a.sbtools.toggleInputDisabledClass(g._$text,c));v(c)}function v(c){for(var d=0;d<g._$selects.length;d++)g._$selects[d].attr("disabled",
c),a.sbtools.toggleSelectDisabledClass(g._$selects[d],c)}function C(c){if(!g.settings.disabled){g.settings.hasInputText&&(g._$text.attr("readonly",c),a.sbtools.toggleInputDisabledClass(g._$text,c));for(var d=0;d<g._$selects.length;d++)a.sbtools.toggleSelectReadonlyClass(g._$selects[d],c),a.sbtools.eventSimulationSelectReadonly(g,g._$selects[d],c)}}function w(){if(!g.settings.disabled&&!g.settings.readonly&&null!==g.settings.canNotModifyLevel&&void 0!==g.settings.canNotModifyLevel)if(v(!1),a.isArray(g.settings.canNotModifyLevel))for(var c=
0;c<g.settings.canNotModifyLevel.length;c++){var d=g.settings.canNotModifyLevel[c];d<g._$selects.length&&(g._$selects[d].attr("disabled",!0),a.sbtools.toggleSelectDisabledClass(g._$selects[d],!0))}else g._$selects[g.settings.canNotModifyLevel].attr("disabled",!0),a.sbtools.toggleSelectDisabledClass(g._$selects[g.settings.canNotModifyLevel],!0)}function c(){a.sbtools.initController.initComplete(g,"$sbbaseareaselect",function(){g.data("$sbbaseareaselect")||r()},g.settings.onInitComplete)}function x(){g.isBuilded=
!1;g.addClass(g.settings.className);g.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);g.addClass("sinobest-widget-container");0>=Number(g.settings.level)&&(g.settings.level=k.level);if(void 0===g.settings.requiredLevel||null===g.settings.requiredLevel)g.settings.requiredLevel=g.settings.level;g.valueHolder=new a.sbbase.ValueHolder;h();d();e(g.settings.disabled);C(g.settings.readonly);w();B();void 0!==g.settings.value&&null!==g.settings.value?m(g.settings.value,function(){c();f()}):void 0!==g.settings.defaultValue&&
null!==g.settings.defaultValue?m(g.settings.defaultValue,function(){c();f()},!0):c();r();return g}function h(){g._$selects=[];for(var c=0;c<g.settings.level;c++){var d=a("<select></select>");d.addClass("sinobest-baseareaselect-select");d.attr("data-level",c);g.append(d);g._$selects.push(d)}}function d(){if(g.settings.hasInputText){var c=a('<input type="text"></input>');c.addClass("sinobest-baseareaselect-text");g.append(c);g._$text=c}}function B(){A();M();L();var a={};a.parentId=g.settings.rootId;
G(0,a,!0)}function A(){g._$selects.setValue=function(c){for(var d=0;d<g.settings.level;d++)this[d].find("option:selected").each(function(c,d){a(d).get(0).selected=!1});if(a.sbtools.isBlank(c))I(this[0],"");else{d=[];d=g.settings.delimiter?c.split(g.settings.delimiter):c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER);c=g.settings.level>d.length?d.length:g.settings.level;for(var h=0;h<c;h++)0===h?I(this[0],d[0]):this[h].data("$tempSelectSetValue",d[h])}this[0].trigger("change",!0)}}function I(c,d){if("c"===
g.settings.saveType){var h=c.find("option[data-code='"+d+"']");0<h.length&&(h.get(0).selected=!0)}else c.find("option").each(function(c,g){if(a(g).text()===d)return a(g).get(0).selected=!0,!1})}function M(){g.settings.hasInputText&&(g._$text.setValue=function(c){this.val("");if(!a.sbtools.isBlank(c)){var d=[],d=g.settings.delimiter?c.split(g.settings.delimiter):c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER);d.length==g.settings.level+1&&this.val(d[g.settings.level])}})}function L(){for(var c=0;c<
g._$selects.length-1;c++)g._$selects[c].on("change",function(c,d,h){c=a(this).attr("data-level");var A=z(a(this),"c");!d&&g.settings.onChange&&(d={},d[g.settings.valueField]=A,d[g.settings.labelField]=z(a(this),"d"),u([d],c));d={};d.parentId=A;d["data-empty"]=l(a(this)).attr("data-empty");G(Number(c)+1,d,h)})}function G(a,c,d){g.settings.data?(H(a,N(c),d),d&&a===g.settings.level-1?(g.isBuilded=!0,J()):F(a)):K(c,function(c){H(a,c||[],d);d&&a===g.settings.level-1?(g.isBuilded=!0,J()):F(a)})}function F(a){a===
g.settings.level-1&&(a=g.valueHolder.getCompleteCallBack(),g.valueHolder.remove(),a&&a(),J())}function J(){g.valueHolder.hasValue()&&y(g.valueHolder.getVal(),g.valueHolder.getCompleteCallBack(),g.valueHolder.getIsDefaultVal())}function N(a){if(void 0!==a["data-empty"]&&"true"===a["data-empty"])return[];a=a.parentId;for(var c=[],d=0;d<g.settings.data.length;d++){var h=g.settings.data[d];h[g.settings.parentField]==a&&c.push(h)}return c}function K(c,d){if(void 0!==c["data-empty"]&&"true"===c["data-empty"])d([]);
else{var h={pid:c.parentId};a.extend(h,g.settings.otherRequestParam||{});g.settings.onAjaxRequest&&a.isFunction(g.settings.onAjaxRequest)&&(h=g.settings.onAjaxRequest(h));a.ajax({url:g.settings.url,data:JSON.stringify(h),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",success:function(c){if(g.settings.onAjaxResponse&&a.isFunction(g.settings.onAjaxResponse))g.settings.onAjaxResponse(c);d(c)},error:function(c,d,g){d={};d.code=c.status;d.msg=a.sberror.format(d.code,this.url);
a.sberror.onError(d)}})}}function H(c,d,h){if(c=g._$selects[c]){c.find("option").remove();if(g.settings.isAddEmpty){var A=a("<option data-empty='true'  data-code=''></option>");A.text(g.settings.emptyText);A.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,"");c.append(A)}for(A=0;A<d.length;A++){var e=d[A],B=a("<option></option>");B.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,e);c.append(B);B.text(e[g.settings.labelField]);B.attr("data-code",e[g.settings.valueField])}c.data("$tempSelectSetValue")&&(I(c,c.data("$tempSelectSetValue")),
c.removeData("$tempSelectSetValue"));a.sbtools.isIE7()&&(c.hide(),c.show());c.trigger("change",[!0,h])}}var g=this,E;if(g.data("$sbbaseareaselect")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();E=a.extend({},q().settings,b||{});q().settings=E;q().reload()}return q()}E=a.extend({},k,b||{});g.settings=E;a.sbbase.mixinWidget(g);g.getValue=function(){return n(g.settings.saveType)};g.getLabel=function(){return n("d")};g.setValue=function(a){m(a,function(){f()})};g.setState=function(c){a.each(c,
function(a,c){void 0!==c&&null!==c?"value"==a?g.setValue(c):"required"==a?g.settings.required=c:"disabled"==a?(g.settings.disabled=c,e(c)):"readonly"==a?(g.settings.readonly=c,C(c)):"canNotModifyLevel"==a?(g.settings.canNotModifyLevel=c,w()):(g.settings[a]=c,g.attr(a,c)):g.removeAttr(a)});return g};g.getDefaultOptions=function(){return k};g.reload=function(){g.empty();a.sbtools.initController.removeInitCompleteFlag(g,"$sbbaseareaselect");x()};g.load=function(c){if(a.sbtools.isNonNull(c))a.sbtools.isInPseudoProtocolBlackList(c,
!0),g.settings.data=null,g.settings.url=null,a.isArray(c)?g.settings.data=c:g.settings.url=c,g.reload();else throw Error("Please set the correct data source");};g.validate=function(){if(a.isFunction(E.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);if(E.required){var c=n(g.settings.saveType,!0);if(a.sbtools.isBlank(c))return a.sbvalidator.AREASELECT_TEXT_REQUIRED;if(g.settings.requiredLevel){g.settings.delimiter&&(c=c.split(g.settings.delimiter));for(var d=0;d<
g.settings.requiredLevel;d++)if(a.sbtools.isBlank(c[d]))return a.sbvalidator.AREASELECT_TEXT_REQUIRED}if(g.settings.hasInputText){c=!1;d=g._$text.val();if(g.settings.textRequired&&(c=a.sbvalidator.required(g._$text[0],d),!c))return a.sbvalidator.AREASELECT_TEXT_REQUIRED;if(g.settings.textMinlength&&(c=a.sbvalidator.minlength(g._$text[0],d,g.settings.textMinlength),!c))return a.sbvalidator.minLengthPromptMessage(g.settings.textMinlength);if(g.settings.textMaxlength&&(c=a.sbvalidator.maxlength(g._$text[0],
d,g.settings.textMaxlength),!c))return a.sbvalidator.maxLengthPromptMessage(g.settings.textMaxlength)}}return""};g.getName=function(){return g.settings.name};g.getSelectItems=function(){for(var c=0,d=[],h=0,A=g._$selects.length;h<A;h++){var e=g._$selects[h],B=z(e,"c");a.sbtools.isBlank(B)?(c++,d.push("")):d.push(z(e,"item"))}g.settings.hasInputText&&(h=g._$text.val(),a.sbtools.isBlank(h)?(c++,d.push("")):(A={},A[g.settings.valueField]=h,A[g.settings.labelField]=h,d.push(A)));h=g.settings.level;g.settings.hasInputText&&
h++;return c==h?[]:"all"===g.settings.mode?d:d.slice(g.settings.hasInputText?d.length-2:d.length-1)};return this.each(function(){x()})}})(jQuery);
(function(a){var k={className:"sinobest-bigselect",required:!1,readonly:!1,disabled:!1,url:null,saveType:"c",type:"single",pageSize:10,paging:!0,valueField:"code",labelField:"detail",searchField:["detail"],options:[],persist:null,create:null,onItemAdd:null,onItemRemove:null,plugins:null,editEnable:!1,name:"",id:"",callback:null,value:null,onAjaxRequest:null,onAjaxResponse:null,delimiter:null,style:null,pageConfig:{pageField:"page",pageSizeField:"pageSize",queryField:"query",totalCountField:"totalCount",
pageCountField:"pageCount",dataField:"data"},transUrl:null,onTranslateRequest:null,onTranslateResponse:null,translateCallback:null,firstLabel:"<<",prevLabel:"<",nextLabel:">",lastLabel:">>",selectAllLabel:"全选",clearAllLabel:"全删",colModel:null,enableLocalSearchFilter:!0,onChange:null,hideSelected:!1,zIndex:null,remoteSort:!1,onInitComplete:null,data:null,setValueTriggerChange:!0};a.fn.sbbigselect=function(b){function q(){return c.data("$bigselect")}function r(){if(c.settings.setValueTriggerChange){var d=
n();a.isFunction(c.settings.onChange)&&c.settings.onChange.apply(c,[d,"add",d])}}function n(){var d=c.getValue();"multiple"==c.settings.type?(c.settings.delimiter&&(d=d.split(c.settings.delimiter)),a.sbtools.isBlank(d)&&(d=[])):a.sbtools.isBlank(d)&&(d="");return d}function z(h,A){if(null!==d){d.clear(!0);var e=a.sbtools.convertSetValue(h);a.isArray(e)?l(e,A,h):a.sbtools.isNotBlank(e)?a.sbbase.translateController.translate(c,{value:e},function(a){l(a,A,h)}):(c.settings.value="",A&&a.isFunction(A)&&
A())}}function l(h,A,e){a:if(a.isArray(h))for(var b=x.valueField,m=x.labelField,k=0;k<h.length;k++){var w=h[k],l={};l[b]=w[b];l[m]=w[m];d.addOption(l);d.addItem(w[b],!0);if("single"==x.type)break a}c.settings.value=e;(c.settings.disabled||c.settings.readonly)&&f(!0);A&&a.isFunction(A)&&A()}function f(a){"single"==c.settings.type&&(a?c.find(".clearSelection").hide():c.find(".clearSelection").show())}function u(d){var h=a("<select></select>");h.attr("id",x.id);h.attr("name",x.name);d&&h.attr("multiple",
!0);h.attr("required",x.required);x.style&&h.attr("style",x.style);c._$selectControl=h;c.append(h)}function m(c){c.addClass(k.className);x.className&&x.className!=k.className&&c.addClass(x.className);c.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI)}function y(){a.sbtools.initController.initComplete(c,"$sbbigselect",function(){c.data("$bigselect")||c.data("$bigselect",c)},c.settings.onInitComplete)}function t(){if(null===c.settings.id||""===c.settings.id)c.settings.id=c.attr("id")+"_bigselect";x.editEnable&&
(x.saveType="d");"d"==x.saveType&&(x.valueField=x.labelField);m(c);var b;b=null!=c.settings.data&&void 0!=c.settings.data?!1:c.settings.paging;b&&(x.plugins={},x.plugins.paging_footer={url:x.url,pagesize:x.pageSize,onAjaxRequest:x.onAjaxRequest,onAjaxResponse:x.onAjaxResponse,pageConfig:x.pageConfig,firstLabel:x.firstLabel,prevLabel:x.prevLabel,nextLabel:x.nextLabel,lastLabel:x.lastLabel,selectAllLabel:x.selectAllLabel,clearAllLabel:x.clearAllLabel,remoteSort:x.remoteSort});if(null===x.plugins||"undefined"===
typeof x.plugins)x.plugins={};"multiple"==x.type?(u(!0),x.pagesize=x.pageSize,x.plugins.toolbar_header={selectAllLabel:x.selectAllLabel,clearAllLabel:x.clearAllLabel}):(u(!1),x.plugins.single_clear_button={className:"clearSelection",label:"",title:""});x.editEnable&&(x.createOnBlur=!0,x.keepTextOnBlur=!0,x.plugins.smart_tag={});x.plugins.smart_icon={};x.colModel&&(x.plugins.select_box={columns:x.colModel},c._$selectControl.addClass("sinobest-selectbox"));b=e(x.persist,!0);var A=e(x.create,!1),f=e(x.createOnBlur,
!1),k=e(x.keepTextOnBlur,!1),w=v(),l=C(),t=e(x.hideSelected,!1),n=[];c.settings.data&&(n=c.settings.data);h=c._$selectControl.selectize({valueField:x.valueField,labelField:x.labelField,searchField:x.searchField,options:n,persist:b,create:A,hideSelected:t,createOnBlur:f,keepTextOnBlur:k,onItemAdd:w,onItemRemove:x.onItemRemove,plugins:x.plugins,enableLocalSearchFilter:x.enableLocalSearchFilter,onChange:l});d=h[0].selectize;c.settings.zIndex?c.find(".selectize-control").css("z-index",c.settings.zIndex):
c.data("oldZindex")&&c.find(".selectize-control").css("z-index",c.data("oldZindex"));c.settings.disabled?d.disable():d.enable();c.settings.disabled||(D(c.settings.readonly),c.settings.readonly?d.lock():d.unlock());b=x.value;null!==b?(-1!=b.indexOf("{")&&-1!=b.indexOf("}")&&(b=a.parseJSON(b)),z(b,function(){y();r()})):y();a(document).keyup(function(h){9==h.keyCode&&(a(document.activeElement).closest(".sinobest-bigselect").is(c)||d.close())});c.data("$bigselect",c)}function D(d){a.sbtools.toggleDivInputReadonlyClass(c.find(".selectize-input"),
d)}function e(a,c){return a?a:c}function v(){var c=x.onItemAdd;"single"==x.type&&a.sbtools.isIE6OrIE7()&&(c=x.onItemAdd?function(a,c){w(c);x.onItemAdd(a,c)}:function(a,c){w(c)});return c}function C(){return a.isFunction(x.onChange)?function(d,h){var e=h.value;"multiple"==c.settings.type&&(e=[h.value]);var b=h.oper,f=n();a.isFunction(c.settings.onChange)&&c.settings.onChange.apply(c,[e,b,f])}:null}function w(c){var d;if(d=a(c).text()){d=a("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",
padding:0,whiteSpace:"pre"}).text(d).appendTo("body");var h=d.width();d.remove();d=h}else d=0;Number(a(c).closest("div.selectize-input").width())>Number(d+35)&&a(c).width(d+35)}var c=this,x;if(c.data("$bigselect")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();x=a.extend({},q().settings,b||{});q().settings=x;q().reload()}return q()}x=a.extend({},k,b||{});c.settings=x;var h,d=null;a.sbbase.mixinWidget(c);c.getValue=function(){var a=d.getValue();return c.settings.delimiter&&"multiple"==
c.settings.type?a.join(c.settings.delimiter):a};c.getLabel=function(){var a=d.getItems();return c.settings.delimiter?a.join(c.settings.delimiter):"multiple"==c.settings.type?a:null===a||0>=a.length?"":a[0]};c.getSelectItems=function(){return d.getItemList()};c.setValue=function(a){z(a,function(){r()})};c.getDetail=function(){return d.getItems()};c.setState=function(h){a.each(h,function(a,h){void 0!==h&&null!==h?"value"==a?c.setValue(h):"disabled"==a?((c.settings.disabled=h)?d.disable():d.enable(),
f(h)):"readonly"==a?(c.settings.readonly=h,D(h),h?d.lock():d.unlock(),f(h)):"required"==a?c.settings.required=h:d.$wrapper.attr(a,h):d.$wrapper.removeAttr(a)});return c};c.getDefaultOptions=function(){return k};c.getDom=function(){return d.$wrapper[0]};c.reload=function(){c.settings.zIndex||c.data("oldZindex",c.find(".selectize-control").css("z-index"));c.empty();x=c.settings;a.sbtools.initController.removeInitCompleteFlag(c,"$sbbigselect");t()};c.load=function(d){if(a.sbtools.isNonNull(d))a.sbtools.isInPseudoProtocolBlackList(d,
!0),c.settings.data=null,c.settings.url=null,a.isArray(d)?c.settings.data=d:c.settings.url=d,c.reload();else throw Error("Please set the correct data source");};c.display=function(a){a?d.$wrapper.show():d.$wrapper.hide()};c.destroy=function(){c.remove();d.$wrapper.remove()};c.validate=function(){if(a.isFunction(x.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var d=c.getValue(),h=!1;return x.required&&(h=a.sbvalidator.required(c[0],d),!h)?a.sbvalidator.TEXT_REQUIRED:
""};c.getName=function(){return c.settings.name};t();return this}})(jQuery);
(function(a){a.extend({sbbubbling:function(k){function b(){u.sbdialog=a.sbdialog({dialogType:"dialog",className:f.className,title:f.title,content:f.content,width:f.width,height:f.height});a(u.getDom()).addClass("sinobest-bubbling-container");a(u.getDom()).addClass("sinob-widget-container");a(u.getDom()).find(".ui-dialog-content").addClass("sinobest-bubbling-content");q();r();z();f.autoCloseTime&&setTimeout(function(){u.destroy()},1E3*f.autoCloseTime)}function q(){if(f.width){var b=a(u.getDom()).find(".ui-dialog-content").width()-
a(u.getDom()).find(".ui-dialog-close").width();a(u.getDom()).find(".ui-dialog-title").width(b).attr("title",f.title);-1<f.align.indexOf("right")&&a(u.getDom()).width(a(u.getDom()).width())}}function r(){u.getDom().style.top=null;u.getDom().style.bottom=null;u.getDom().style.left=null;u.getDom().style.right=null;var a=f.align.split(" ")[0],b=f.align.split(" ")[1];n(a);n(b)}function n(b){"top"==b?u.getDom().style.top="0px":"bottom"==b?u.getDom().style.bottom="0px":"left"==b?u.getDom().style.left="0px":
"right"==b?u.getDom().style.right="0px":"center"==b&&(u.getDom().style.left=(a(window).width()-a(u.getDom()).width())/2+"px")}function z(){a.sbtools.isIE6()&&(-1<f.align.indexOf("top")?a(window).scroll(function(a){u.getDom().style.top=document.body.scrollTop||document.documentElement.scrollTop}):-1<f.align.indexOf("bottom")&&a(window).scroll(function(b){u.getDom().style.top=(document.body.scrollTop||document.documentElement.scrollTop)+a(window).height()-a(u.getDom()).outerHeight()}))}var l={className:"sinobest-bubbling",
title:"  ",content:null,width:"300px",height:"120px",align:"right bottom",autoCloseTime:null},f=a.extend({},l,k||{}),u={sbdialog:null,getState:function(){return u.sbdialog.getState()},setState:function(a){u.sbdialog.setState(a)},getClassName:function(){return l.className},getDom:function(){return u.sbdialog.getDom()},reload:function(){u.sbdialog.destroy();b()},display:function(a){u.sbdialog.display(a);a&&r()},destroy:function(){u.sbdialog.destroy()}};b();return u}})})(jQuery);
(function(a){var k={className:"sinobest-button",disabled:!1,value:null,onClick:null,onInitComplete:null};a.fn.sbbutton=function(b){function q(){a.sbtools.initController.initComplete(n,"$sbinput",function(){n.data("$input")||n.data("$input",n)},n.settings.onInitComplete)}function r(){n.addClass("sinobest-button-common");n.addClass(n.settings.className);n.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);n.attr("disabled",n.settings.disabled);void 0!==n.settings.value&&null!==n.settings.value&&n.val(n.settings.value);
if(n.settings.onClick)n.off("click").on("click",n.settings.onClick);q();n.data("$input",n);return n}var n=this;if(n.data("$input"))if(b){if(void 0===b.value||null===b.value)b.value=n.data("$input").getValue();b=a.extend({},n.data("$input").settings,b||{})}else return n.data("$input");else b=a.extend({},k,b||{});n.settings=b;a.sbbase.mixinWidget(n);n.getValue=function(){return n.val()};n.setValue=function(a){n.val(a);n.settings.value=a;return n};n.setState=function(b){a.each(b,function(a,b){n.attr(a,
b)});return n};n.getDefaultOptions=function(){return k};n.reload=function(){a.sbtools.initController.removeInitCompleteFlag(n,"$sbinput");return r()};return this.each(function(){r()})}})(jQuery);
(function(a){var k={className:"sinobest-checkbox",required:!1,disabled:!1,readonly:!1,direction:"line",columnCount:null,delimiter:null,name:null,valueField:"code",labelField:"detail",data:null,url:null,callback:null,value:null,onAjaxRequest:null,onAjaxResponse:null,saveType:"c",onChange:null,onInitComplete:null,setValueTriggerChange:!0};a.fn.sbcheckbox=function(b){function q(){return w.data("$checkbox")}function r(c,e){if(!w.settings.data)return w.data("$temp",c),w;w.find(":checkbox").filter(":checked").prop("checked",
!1);if(c&&a.trim(c))return a.isArray(c)||(c=w.settings.delimiter?c.split(w.settings.delimiter):[c]),"c"==w.settings.saveType?a.each(c,function(a,c){w.find(":checkbox").filter("[value="+c+"]").prop("checked",!0)}):a.each(c,function(c,d){w.find("label").each(function(c,h){if(a(h).text()==d)return a(h).prev("input[type='checkbox']").prop("checked",!0),!1})}),w.settings.value=c,e&&e(),w;w.settings.value="";e&&e()}function n(){if(a.isFunction(w.settings.onChange)&&w.settings.setValueTriggerChange){var c=
m();w.settings.onChange&&w.settings.onChange.apply(w,[c,"add",c])}}function z(a){w.find("input:checkbox").attr("disabled",a)}function l(c){a.each(c,function(c,h){var d=w.settings.name+"_"+c,e=a('<input type="checkbox" id="'+d+'"/>');e.attr("name",w.settings.name);var A=a('<label for="'+d+'"></label>');a.each(h,function(c,d){var h=!0;c==w.settings.valueField&&(e.val(d),h=!1);c==w.settings.labelField&&(A.text(d),h=!1);h&&(a.sbtools.isIE6OrIE7()?"status"!=c&&e.attr(c,d):e.attr(c,d))});e.attr("disabled",
w.settings.disabled);w.settings.disabled||e.attr("disabled",w.settings.readonly);e.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,h);d=a("<div></div>");d.append(e).append(A);w.append(d)});f()}function f(){"table"==C.direction?D():"row"==C.direction?e():v();u();w.data("$temp")&&(w.settings.value=w.data("$temp"),w.removeData("$temp"));void 0!==w.settings.value&&null!==w.settings.value?r(w.settings.value,function(){y();n()}):y()}function u(){w.settings.onChange&&w.find("input:checkbox").bind("change",function(){var c=
{};c[w.settings.valueField]=a(this).attr("value");c[w.settings.labelField]=a(this).next("label").text();var e="",e=a(this).is(":checked")?"add":"remove",c=[c],h=m();w.settings.onChange&&w.settings.onChange.apply(w,[c,e,h])})}function m(){var c=[];w.find("input:checkbox").each(function(e,h){if(a(h).is(":checked")){var d={};d[w.settings.valueField]=a(h).attr("value");d[w.settings.labelField]=a(h).next("label").text();c.push(d)}});return c}function y(){a.sbtools.initController.initComplete(w,"$sbcheckbox",
function(){w.data("$checkbox")||w.data("$checkbox",w)},w.settings.onInitComplete)}function t(){w.addClass(C.className);w.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);w.attr("required",w.settings.required);if(w.settings.url){var c={};w.settings.onAjaxRequest&&a.isFunction(w.settings.onAjaxRequest)&&(c=w.settings.onAjaxRequest(c));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",url:w.settings.url,data:JSON.stringify(c),success:function(c){if(w.settings.onAjaxResponse&&
a.isFunction(w.settings.onAjaxResponse))w.settings.onAjaxResponse(c);w.settings.data=c;w.html("");l(w.settings.data)},error:function(c,h,d){h={};h.code=c.status;h.msg=a.sberror.format(h.code,this.url);a.sberror.onError(h)}})}else w.settings.data||(w.settings.data=[]),w.html(""),l(w.settings.data);w.data("$checkbox",w)}function D(){var c=w.find(":checkbox").parent("div");if(!(0<c.parent("td").length)){c.wrapAll("<table><tbody></tbody></table>");var e=null;c.each(function(c){e=0===c%C.columnCount?a(this).wrap("<tr><td></td></tr>"):
a(this).insertAfter(e.parent("td")).wrap("<td></td>")})}}function e(){var a=w.find(":checkbox").parent("div");0<a.parent("td").length||a.wrapAll("<table><tbody></tbody></table>").wrap("<tr><td></td></tr>")}function v(){var a=w.find(":checkbox").parent("div");0<a.parent("td").length||(a.css({"float":"left","line-height":"23px","white-space":"nowrap"}),a.wrapAll("<table><tbody><tr><td></td></tr></tbody></table>"))}var C,w=this;if(w.data("$checkbox"))if(b){if(void 0===b.value||null===b.value)b.value=
q().getValue();C=a.extend({},q().settings,b||{})}else return q();else C=a.extend({},k,b||{});w.settings=C;a.sbbase.mixinWidget(w);w.getValue=function(){if("c"==w.settings.saveType){var c=[];w.find(":checkbox").filter(":checked").each(function(){c.push(a(this).val())});return w.settings.delimiter?c.join(w.settings.delimiter):c}return w.getLabel()};w.getLabel=function(){var c=[];w.find(":checkbox").filter(":checked").each(function(){c.push(a(this).next("label").text())});return w.settings.delimiter?
c.join(w.settings.delimiter):c};w.getName=function(){return w.settings.name};w.setValue=function(a){return r(a,function(){n()})};w.setState=function(c){a.each(c,function(a,c){void 0!==c&&null!==c?"value"==a?w.setValue(c):"required"==a?w.settings.required=c:"readonly"==a?(w.settings.readonly=c,z(c)):"disabled"==a?(w.settings.disabled=c,z(c)):w.attr(a,c):w.removeAttr(a)});return w};w.getDefaultOptions=function(){return k};w.reload=function(){a.sbtools.initController.removeInitCompleteFlag(w,"$sbcheckbox");
t()};w.load=function(c){if(a.sbtools.isNonNull(c))a.sbtools.isInPseudoProtocolBlackList(c,!0),w.settings.data=null,w.settings.url=null,a.isArray(c)?w.settings.data=c:w.settings.url=c,w.reload();else throw Error("Please set the correct data source");};w.validate=function(){if(a.isFunction(C.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var c=w.getValue(),e=!1;return C.required&&(e=a.sbvalidator.required(w[0],c),!e)?a.sbvalidator.TEXT_REQUIRED:""};w.getSelectItems=
function(){var c=[];w.find(":checkbox").filter(":checked").each(function(){c.push(a(this).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY))});return c};t();return this}})(jQuery);
(function(a){var k={name:null,className:"sinobest-commonselect",required:!1,placeholder:null,disabled:null,readonly:!1,callback:null,data:null,url:null,value:null,valueField:"code",labelField:"detail",onBeforeSelect:null,onAfterSelect:null,delimiter:null,saveType:"c",otherRequestParam:null,rootId:0,beforeSend:null,complete:null,parentField:"pId",idField:"id",onChange:null,onInitComplete:null,setValueTriggerChange:!0};a.fn.sbcommonselect=function(b){function q(){return d.data("$commonselect")}function r(){d.data("$commonselect",
d)}function n(a){var c=d._inputContainerControl.getSelectedItems(),h=[];if("c"==a){a=0;for(var e=c.length;a<e;a++)h.push(c[a][d.settings.valueField])}else if("d"==a)for(a=0,e=c.length;a<e;a++)h.push(c[a][d.settings.labelField]);else h=c;return h}function z(c,h){var e=a.sbtools.convertSetValue(c);d._inputContainerControl.setInitValue(e,h);d.settings.value=c}function l(){a.sbtools.initController.initComplete(d,"$sbcommonselect",function(){d.data("$commonselect")||r()},d.settings.onInitComplete)}function f(){if(d.settings.setValueTriggerChange){var a=
d._inputContainerControl.getSelectedItems();d.settings.onChange&&d.settings.onChange.apply(d,[a,"add",a])}}function u(){var a=new B;a.buildInputContainer();d._inputContainerControl=a}function m(){d.addClass(d.settings.className);d.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);d.addClass("sinob-widget-container");u();d.$input.attr("required",d.settings.required);d.settings.placeholder&&(d.$input.attr("placeholder",d.settings.placeholder),a.sbtools.isPlaceHolderSupported()||(d.$input.placeholder(),
d.$input.focus(),d.$input.blur()));d._inputContainerControl.updatePlaceholder();d.$input.attr("readonly",d.settings.readonly);d.$input.attr("disabled",d.settings.disabled);x(d.settings.disabled);d.$input.on("click",function(){d.isBuilded||(e(void 0),d.isBuilded=!0);a("html").bind("mouseover mouseup",function(c){a(c.target).hasClass("commonselect-input-container")||a(c.target).hasClass("commonselect-dropdown")||0<a(c.target).parents("span.commonselect-dropdown").length||d.$input.is(":focus")||(d.$dropdown.find(".dropdown-content-item-list").hide(),
d.$dropdown.hide(),a("html").unbind("mouseover"))});d._inputContainerControl.updateDropDownContentPosition();d.$dropdown.show();return!1});void 0!==d.settings.value&&null!==d.settings.value?z(d.settings.value,function(){l();f()}):l();r();return d}function y(){d.find(".commonselect-dropdown-content > .dropdown-content-item").each(function(){var c=this;a(c).hoverDelay({hoverEvent:function(h){h=a(c).children(".dropdown-content-item-list");h.css("top",a(c).position().top);var e=h.width()+d.$dropdownContent.width();
10<a(window).width()-d.$dropdownContent.offset().left-e?h.css("left",""):h.css("left",a(c).position().left-h.width());a(c).addClass("hover");a(c).children(".dropdown-content-item-list").css("display","block");d.$dropdown.show()},outEvent:function(){a(c).removeClass("hover");a(c).children(".dropdown-content-item-list").css("display","none")}})});d.find(".dropdown-content-subitem a").off("click").on("click",function(c,h){a(this).toggleClass("selected");var e=a(this).text(),b={};b[d.settings.valueField]=
a(this).attr("code");b[d.settings.labelField]=e;a.isFunction(d.settings.onBeforeSelect)&&d.settings.onBeforeSelect.apply(this,[b]);a(this).hasClass("selected")?d._inputContainerControl.addItem(b):d._inputContainerControl.removeItem(b);a.isFunction(d.settings.onAfterSelect)&&d.settings.onAfterSelect.apply(this,[b]);!h&&d.settings.onChange&&(e="",e=a(this).hasClass("selected")?"add":"remove",d.settings.onChange.apply(d,[[b],e,d._inputContainerControl.getSelectedItems()]))});d.find(".dropdown-content-item > .dropdown-content-item-list > .dropdown-content-item-close").click(function(){a(this).parent().parent().removeClass("hover");
a(this).parent().hide()});t()}function t(){d.$dropdown.unSelectItem=function(c){this.find(".dropdown-content-subitem a.selected").each(function(h,e){if(a(e).attr("code")==c[d.settings.valueField])return a(e).removeClass("selected"),!1})};d.$dropdown.selectItems=function(a){for(var c=0,h=a.length;c<h;c++)this.find(".dropdown-content-subitem a[code='"+a[c][d.settings.valueField]+"']").addClass("selected")};d.$dropdown.triggerSelectItemsByLabel=function(c,d){for(var h=0,e=c.length;h<e;h++)this.find(".dropdown-content-subitem a").each(function(e,
b){if(a(b).text()==c[h])return a(b).trigger("click",d),!1})};d.$dropdown.triggerSelectItemsByValue=function(a,c){for(var d=0,h=a.length;d<h;d++)this.find(".dropdown-content-subitem a[code='"+a[d]+"']").trigger("click",c)};d.$dropdown.initValue=function(c){this.find(".dropdown-content-subitem a.selected").each(function(c,d){a(d).removeClass("selected")});if(a.isArray(c))d.$dropdown.selectItems(c);else{var h=[],h=d.settings.delimiter?c.split(d.settings.delimiter):c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER);
"c"==d.settings.saveType?d.$dropdown.triggerSelectItemsByValue(h,!0):d.$dropdown.triggerSelectItemsByLabel(h,!0)}};if(d.data("$tempInitValue")){var c=d.data("$tempInitValue");d.removeData("$tempInitValue");d.$dropdown.initValue(c)}}function D(c){var h=[];d.settings.ajaxMode||a.each(d.settings.internalData,function(){a(this).attr(d.settings.parentField)==c&&h.push(a(this))});return h}function e(c){d.$dropdown=a('<span class="commonselect-dropdown"></span>');d.$dropdownContent=a('<div class="commonselect-dropdown-content"></div>');
if(d.settings.url){var h={};a.extend(h,d.settings.otherRequestParam||{});a.ajax({url:d.settings.url,data:JSON.stringify(h),type:"POST",contentType:"application/json; charset=utf-8",dataType:"json",beforeSend:function(a){d.settings.beforeSend&&d.settings.beforeSend.apply(this,[a])},complete:function(a,c){if(d.settings.complete){var h=[];h.push(a);h.push(c);d.settings.complete.apply(this,h)}},success:function(h){d.settings.data=h;v();w();c&&a.isFunction(c)&&c()},error:function(c,d,h){d={};d.code=c.status;
d.msg=a.sberror.format(d.code,this.url);a.sberror.onError(d)}})}else v(),w(),c&&a.isFunction(c)&&c()}function v(){var a=d.settings.data;if(null==a||void 0==a)d.settings.internalData=[];else{for(var c=[],h=0,e=a.length;h<e;h++){var b=a[h],B={};B[d.settings.valueField]=b[d.settings.valueField];B[d.settings.labelField]=b[d.settings.labelField];var f=b[d.settings.idField],b=b[d.settings.parentField];if(0<c.length&&b==d.settings.rootId)for(var k=c.length,m=0;m<k;m++){var w=c[m];if(w[d.settings.idField]==
f){void 0===w.items?(w.items=[],w.items.push(w.item),w.items.push(B),delete w.item):w.items.push(B);break}m==c.length-1&&c.push(c.push(C(b,f,B)))}else c.push(C(b,f,B))}d.settings.internalData=c}}function C(a,c,h){var e={};e[d.settings.parentField]=a;e[d.settings.idField]=c;e.item=h;return e}function w(){var a=D(d.settings.rootId),a=c(1,a);d.$dropdownContent.append(a);d.$dropdown.append(d.$dropdownContent);d.append(d.$dropdown);y()}function c(h,e){h=parseInt(h);var b="";if(1==h)a.each(e,function(e){b+=
'<div class="dropdown-content-item"><h3><span>·</span>';var B=a(this).attr("item");B?b+=a("<div>").append(a('<a href="javascript:void(0);"></a>').text(a(B).attr(d.settings.labelField))).remove().html():(B=a(this).attr("items"),a.each(B,function(c){0<c&&(b+="、");b+=a("<div>").append(a('<a href="javascript:void(0);"></a>').text(a(this).attr(d.settings.labelField))).remove().html()}));b+="</h3></div>";var f=D(a(this).attr("id")),B="";f&&0<f.length&&(B+=c(h+1,f));0<B.length&&(f=a(b),f.find("h3").eq(e).after(B),
b=a("<div></div>").append(f.clone()).html())});else if(2==h){var b=b+'<div class="clearfix dropdown-content-item-list"><div class="dropdown-content-subitem">',B="";a.each(e,function(e){var b=a(this).attr("item"),f=a("<dl></dl>").attr("id",a(this).attr(d.settings.idField)).append("<dt></dt>");f.children("dt").append(a('<a href="javascript:void(0);"></a>').attr("code",a(b).attr(d.settings.valueField)).text(a(b).attr(d.settings.labelField)));B+=a("<div>").append(f).remove().html();f=D(a(this).attr("id"));
b="";f&&0<f.length&&(b+=c(h+1,f));0<b.length&&(f=a(B),f.filter("dl").eq(e).append(b),B=a("<div></div>").append(f.clone()).html())});b+=B;b+="</div></div>"}else if(3==h)b+="<dd>",a.each(e,function(){var c=a(this).attr("item");b+=a("<div>").append(a("<em></em>").append(a('<a href="javascript:void(0);"></a>').attr("code",a(c).attr(d.settings.valueField)).text(a(c).attr(d.settings.labelField)))).remove().html()}),b+="</dd>";else throw"仅支持3层数据 <- Unsupported operation";return b}function x(a){a?d.$input.addClass("input-disabled"):
d.$input.removeClass("input-disabled")}var h,d=this;if(d.data("$commonselect")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();h=a.extend({},q().settings,b||{});q().settings=h;q().reload()}return q()}h=a.extend({},k,b||{});d.settings=h;a.sbbase.mixinWidget(d);d.getValue=function(){var a=n(d.settings.saveType);return d.settings.delimiter?a.join(d.settings.delimiter):a};d.getLabel=function(){var a=n("d");return d.settings.delimiter?a.join(d.settings.delimiter):a};d.setValue=function(a){z(a,
function(){f()});return d};d.setState=function(c){a.each(c,function(a,c){void 0!==c&&null!==c?"value"==a?d.setValue(c):"required"==a?(d.settings.required=c,d.$input.attr("required",d.settings.required)):"readonly"==a?(d.settings.readonly=c,d.$input.attr("readonly",d.settings.readonly),d._inputContainerControl.readonly(d.settings.readonly)):"disabled"==a?(d.settings.disabled=c,d.$input.attr("disabled",d.settings.disabled),x(c),d._inputContainerControl.disabled(d.settings.disabled)):d.attr(a,c):d.removeAttr(a)});
return d};d.getDefaultOptions=function(){return k};d.reload=function(){d.empty();d.isBuilded=!1;a.sbtools.initController.removeInitCompleteFlag(d,"$sbcommonselect");return m()};d.load=function(c){if(a.sbtools.isNonNull(c))a.sbtools.isInPseudoProtocolBlackList(c,!0),d.settings.data=null,d.settings.url=null,a.isArray(c)?d.settings.data=c:d.settings.url=c,d.reload();else throw Error("Please set the correct data source");};d.validate=function(){if(a.isFunction(h.callback))return this.settings.callback.apply(this,
[this.settings,this.getValue()]);var c=!1;return h.required&&(c=d.getValue(),c=a.sbvalidator.required(d.$input[0],c),!c)?a.sbvalidator.TEXT_REQUIRED:""};d.getName=function(){return d.settings.name};d.getSelectItems=function(){var a=n("item");if(void 0===a||null===a||0>=a.length||null==d.settings.data||0>=d.settings.data.length)return[];for(var c=[],h=0;h<a.length;h++){var e=a[h],b;a:{for(b=0;b<d.settings.data.length;b++){var B=d.settings.data[b],f=B[d.settings.valueField],w=e[d.settings.valueField];
"d"===d.settings.saveType&&(f=B[d.settings.labelField],w=e[d.settings.labelField]);if(w==f){b=B;break a}}b=null}null!==b?c.push(b):c.push(e)}return c};var B=function(){};B.prototype={buildInputContainer:function(){this.$inputContainerControl=a('<div class="commonselect-input-container commonselect-input-container-active"></div>');this.$input=a('<input type="text" class="commonselect-input"/>');d.settings.name&&this.$input.attr("name",d.settings.name);this._setInputInitWidth();a.sbtools.isIE6OrIE7()&&
this.$inputContainerControl.append('<div class="virutal-input-item"></div>');this.$inputContainerControl.append(this.$input);d.append(this.$inputContainerControl);d.$input=this.$input;this.readonly(d.settings.readonly);this.disabled(d.settings.disabled);this._bindInputContainerEvent()},_setInputInitWidth:function(){1!=this.$input.width()&&this.$input.width(1)},_bindInputContainerEvent:function(){var a=this;a.$inputContainerControl.bind("click",function(){a.isDisabled()||(a.$input.focus(),a.isReadonly()||
a.$input.trigger("click"))});a.$input.keydown(function(c){if(a.isDisabled()||a.isReadonly())return!1;if("8"==c.keyCode)return c=a.removeInputPrevItem(),d.$dropdown.unSelectItem(c),!1;if(37==c.keyCode)return 0<a.$input.prev(".input-item").length&&(a.$input.prev(".input-item").before(a.$input),a.$input.focus().select()),!1;if(39==c.keyCode)return 0<a.$input.next(".input-item").length&&(a.$input.next(".input-item").after(a.$input),a.$input.focus().select()),!1})},setInitValue:function(c,h){this.clearItems();
a.isArray(c)?(this.addItems(c),d.isBuilded?d.$dropdown.initValue(c):d.data("$tempInitValue",c),h&&a.isFunction(h)&&h()):d.isBuilded?(d.$dropdown.initValue(c),h&&a.isFunction(h)&&h()):(d.data("$tempInitValue",c),e(h),d.isBuilded=!0)},addItems:function(c){if(!(void 0==c||0>=c.length)){for(var h=0,e=c.length;h<e;h++){var b=c[h],B=this.$inputContainerControl.find(".input-item:last"),f=a('<div class="input-item"></div>');f.attr("code",b[d.settings.valueField]);f.text(b[d.settings.labelField]);0>=B.length?
this.$input.before(f):B.after(f)}this.updateInputContainerStatus();this.updatePlaceholder();this.updateDropDownContentPosition()}},addItem:function(a){void 0!=a&&this.addItems([a])},removeItem:function(c){this.$inputContainerControl.find(".input-item").each(function(h,e){if(a(e).attr("code")==c[d.settings.valueField])return a(e).remove(),!1});this.updateInputContainerStatus();this.updatePlaceholder();this.updateDropDownContentPosition()},removeInputPrevItem:function(){var a=this.$input.prev(".input-item"),
c={};c[d.settings.valueField]=a.attr("code");c[d.settings.labelField]=a.text();a.remove();this.updateInputContainerStatus();this.updatePlaceholder();this.updateDropDownContentPosition();return c},clearItems:function(){this.$inputContainerControl.find(".input-item").remove();this.updateInputContainerStatus();this.updatePlaceholder();this.updateDropDownContentPosition()},getSelectedItems:function(){var c=[];this.$inputContainerControl.find(".input-item").each(function(h,e){var b={};b[d.settings.valueField]=
a(e).attr("code");b[d.settings.labelField]=a(e).text();c.push(b)});return c},disabled:function(a){a?this.$inputContainerControl.addClass("disabled"):this.$inputContainerControl.removeClass("disabled")},isDisabled:function(){return this.$inputContainerControl.hasClass("disabled")?!0:!1},readonly:function(c){a.sbtools.toggleDivInputReadonlyClass(this.$inputContainerControl,c)},isReadonly:function(){return this.$inputContainerControl.hasClass("div-input-readonly")?!0:!1},updatePlaceholder:function(){d.settings.placeholder&&
(0<this.$inputContainerControl.find(".input-item").length?(this.$input.removeAttr("placeholder"),this._setInputInitWidth()):(this.$input.val(""),this.$input.attr("placeholder",d.settings.placeholder),this.$input.width(this.$inputContainerControl.width()-10)))},updateDropDownContentPosition:function(){if(null!=d.$dropdownContent){var c=this.$inputContainerControl.offset(),h=a("<test></test>");this.$inputContainerControl.parents().each(function(){if("relative"==a(this).css("position"))return h=a(this),
!1});d.$dropdownContent.css({left:c.left-h.offset().left+"px",top:c.top+this.$inputContainerControl.outerHeight()-h.offset().top+"px"})}},updateInputContainerStatus:function(){0<this.$inputContainerControl.find(".input-item").length?this.$inputContainerControl.addClass("has-items"):this.$inputContainerControl.removeClass("has-items")}};a.fn.hoverDelay=function(c){var d=a.extend({hoverDuring:200,outDuring:200,hoverEvent:function(){a.noop()},outEvent:function(){a.noop()}},c||{}),h,e;return a(this).each(function(){a(this).hover(function(a){clearTimeout(e);
h=setTimeout(d.hoverEvent,d.hoverDuring)},function(a){clearTimeout(h);e=setTimeout(d.outEvent,d.outDuring)})})};return this.each(function(){m()})}})(jQuery);
(function(a){var k={name:null,className:"sinobest-commontree",data:null,url:null,onAjaxRequest:null,onAjaxResponse:null,onInitComplete:null,expandAll:!1,style:null,setting:{data:{simpleData:{enable:!0,idKey:"id",pIdKey:"pId",rootPId:0}}}};a.fn.sbcommontree=function(b){function q(){f.data("$sbcommontree",f)}function r(){a.sbtools.initController.initComplete(f,"$sbcommontree",function(){f.data("$sbcommontree")||q()},f.settings.onInitComplete)}function n(){var b=f.getState();f.data("orignalAttributes",
b);f.addClass("ztree").addClass(f.settings.className);f.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);f.settings.style&&f.attr("style",f.settings.style);f.settings.name&&f.attr("name",f.settings.name);if(f.settings.data)z(f.settings.data);else if(f.settings.setting.async&&f.settings.setting.async.enable)z([]);else if(f.settings.url)l();else throw Error("未配置tree初始化数据来源");q();return f}function z(b){a.fn.zTree.init(f,f.settings.setting,b);f.settings.expandAll&&f.getTreeObj().expandAll(!0);r()}function l(){var b=
{};f.settings.onAjaxRequest&&a.isFunction(f.settings.onAjaxRequest)&&(b=f.settings.onAjaxRequest(b));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(b),url:f.settings.url,success:function(b){f.settings.onAjaxResponse&&a.isFunction(f.settings.onAjaxResponse)&&(b=f.settings.onAjaxResponse(b));z(b.treeNodes)},error:function(b,f,k){f={};f.code=b.status;f.msg=a.sberror.format(f.code,this.url);a.sberror.onError(f)}})}var f=this;if(f.data("$sbcommontree"))if(b)b=
a.extend(!0,{},f.data("$sbcommontree").settings,b||{});else return f.data("$sbcommontree");else b=a.extend(!0,{},k,b||{});f.settings=b;a.sbbase.mixinWidget(f,{isAddValueMethod:!1});f.getTreeObj=function(){return a.fn.zTree.getZTreeObj(f.attr("id"))};f.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?f.attr(a,b):f.removeAttr(a)});return f};f.getDefaultOptions=function(){return k};f.reload=function(){f.empty();var b=f.data("orignalAttributes"),k=f.getState();a.each(k,function(a,k){if(b[a]){var m=
b[a];m!==k&&f.attr(a,m)}else f.removeAttr(a)});a.sbtools.initController.removeInitCompleteFlag(f,"$sbcommontree");n()};f.load=function(b){if(a.sbtools.isNonNull(b))a.sbtools.isInPseudoProtocolBlackList(b,!0),f.settings.data=null,f.settings.url=null,a.isArray(b)?f.settings.data=b:f.settings.url=b,f.reload();else throw Error("Please set the correct data source");};f.getName=function(){return f.settings.name};return this.each(function(){n()})}})(jQuery);
(function(a){var k={className:"sinobest-date",required:!1,readonly:!1,skin:"blueFresh",isShowWeek:!1,isShowClear:!0,firstDayOfWeek:7,dateFormat:"yyyy-MM-dd",minDate:null,maxDate:null,onpicked:null,onpicking:null,onclearing:null,oncleared:null,callback:null,value:null,editable:!0,onInitComplete:null};a.fn.sbdate=function(b){function q(){a.sbtools.initController.initComplete(m,"$sbdate",function(){m.data("$date")||m.data("$date",m)},m.settings.onInitComplete)}function r(){m.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);
m.addClass(m.settings.className).addClass("Wdate");m.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);m.attr("readonly",m.settings.readonly);a.sbtools.toggleDateReadonlyClass(m,m.settings.readonly);m.attr("required",m.settings.required);void 0!==m.settings.value&&null!==m.settings.value&&m.setValue(m.settings.value);m.off("click.sbdate").on("click.sbdate",function(){m.settings.readonly||m.is(":focus")||m.focus()});m.off("blur.sbdate").on("blur.sbdate",function(){!m.ignoreBlur&&m.hasClass("WdateFmtErr")&&
(m.ignoreFocus=!0,m.focus(),m.ignoreFocus=!1)});z();m.off("focus.sbdate").on("focus.sbdate",function(){if(!m.ignoreFocus&&!m.settings.readonly){void 0!==$dp&&null!==$dp&&void 0!==$dp.dd&&null!==$dp.dd&&void 0!==$dp.el&&null!==$dp.el&&void 0!==$dp.el.id&&null!==$dp.el.id&&a($dp.dd).is(":visible")&&$dp.el.id!==m.attr("id")&&(m.ignoreBlur=!0,m.blur(),m.ignoreBlur=!1);var b={skin:m.settings.skin,firstDayOfWeek:m.settings.firstDayOfWeek,isShowClear:m.settings.isShowClear,isShowWeek:m.settings.isShowWeek,
dateFmt:m.settings.dateFormat,onpicked:m.settings.onpicked,onpicking:m.settings.onpicking,onclearing:m.settings.onclearing,oncleared:m.settings.oncleared};m.settings.maxDate&&(b=a.extend({},b,{maxDate:m.settings.maxDate}));m.settings.minDate&&(b=a.extend({},b,{minDate:m.settings.minDate}));b=a.extend({},b,{readOnly:m.settings.readonly});m.settings.editable||(b=a.extend({},b,{readOnly:!0}));WdatePicker(b);n()}});q();m.data("$date",m)}function n(){a("iframe").each(function(b,f){a(f).load(function(){a(f.contentWindow.document).on("mouseup",
function(b){3==b.which&&(0>=a(f.contentWindow.document).find("div.WdateDiv").length?a(f.contentWindow.document).off("mouseup"):setTimeout(function(){a(f.contentWindow.document).find("table.WdayTable").find("a").each(function(b,f){if("My97 DatePicker"==a(f).html())return a(f).closest("div").html("快速选择"),!1})},.5))})})})}function z(){window!==top&&self.frameElement&&("FRAME"===self.frameElement.tagName&&window.parent!==top||"IFRAME"===self.frameElement.tagName)&&a(window).scroll(function(){if(void 0!==
$dp&&null!==$dp&&void 0!==$dp.dd&&null!==$dp.dd&&void 0!==$dp.el&&null!==$dp.el&&void 0!==$dp.el.id&&null!==$dp.el.id&&(a($dp.dd).is(":visible")||a($dp.dd).data("scrollHidden"))&&$dp.el.id===m.attr("id")){var b=l(window,0),f=u(window,0),k=b.top+m.offset().top+m.outerHeight(!0)-f-a(window).scrollTop(),e=k<b.top-f,b=k>b.top-f+(window.frameElement?a(window.frameElement).outerHeight(!0):0);(e=e||b)||(e=window,b=l(e.parent,0),f=u(e.parent,0),k<b.top-f?e=!0:(b=b.top-f,e=e.parent,e=e.frameElement?a(e.frameElement).outerHeight(!0):
0,e=k>b+e?!0:!1));e?(a($dp.dd).data("scrollHidden",!0),$dp.hide()):(a($dp.dd).data("scrollHidden")&&($dp.show(),a($dp.dd).removeData("scrollHidden")),a($dp.dd).css({top:k}))}})}function l(b,k){var m=b.frameElement;return m?(m=a(m).offset().top||0,f(b.parent)?{top:m+k}:l(b.parent,m)):0}function f(a){return a===top||a.frameElement&&"FRAME"===a.frameElement.tagName&&a.parent===top?!0:!1}function u(b,k){return f(b.parent)?k:u(b.parent,(a(b.parent).scrollTop()||0)+k)}var m=this;if(m.data("$date"))if(b){if(void 0===
b.value||null===b.value)b.value=m.data("$date").getValue();b=a.extend({},m.data("$date").settings,b||{})}else return m.data("$date");else b=a.extend({},k,b||{});m.settings=b;a.sbbase.mixinWidget(m);m.getValue=function(){return m.val()};m.setValue=function(a){m.val(a);m.settings.value=a;return m};m.getName=function(){return m.attr("name")};m.setState=function(b){a.each(b,function(b,f){void 0!==f&&null!==f?"value"==b?m.setValue(f):("required"==b?m.settings.required=f:"readonly"==b?(m.settings.readonly=
f,a.sbtools.toggleDateReadonlyClass(m,f)):m.settings[b]=f,m.attr(b,f)):m.removeAttr(b)});return m};m.getDefaultOptions=function(){return k};m.reload=function(){a.sbtools.initController.removeInitCompleteFlag(m,"$sbdate");r()};m.validate=function(){if(a.isFunction(m.settings.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var b=m.getValue(),f=!1;return m.settings.required&&(f=a.sbvalidator.required(m[0],b),!f)?a.sbvalidator.TEXT_REQUIRED:""};return this.each(function(){r()})}})(jQuery);
(function(a){var k={className:"sinobest-daterange",required:!1,readonly:!1,beginMinDate:null,beginMaxDate:null,endMinDate:null,endMaxDate:null,dateFormat:"yyyy-MM-dd",name:"",id:"",delimiter:null,beginSuffix:"_begin",endSuffix:"_end",callback:null,toChar:"至",value:[],validateMode:"whole",beginName:null,endName:null,onInitComplete:null};a.fn.sbdaterange=function(b){function q(){return l.data("$daterange")}function r(){var b="",b=l.settings.beginName?l.settings.beginName:l.settings.name+l.settings.beginSuffix,
k="",k=l.settings.endName?l.settings.endName:l.settings.name+l.settings.endSuffix,m,n;l.settings.id?(m=l.settings.id+l.settings.beginSuffix,n=l.settings.id+l.settings.endSuffix):(m=b,n=k);var t=a('<div class="sinobest-daterange-container sinob-widget-container"></div>'),q=a('<table width="100%" border="0" cellspacing="0" cellpadding="0"></table>'),e=a("<tr></tr>"),v=a('<td><input type="text"/></td>');v.find("input").attr("name",b);v.find("input").attr("id",m);b=a('<td class="sinobest-daterange-to"></td>');
b.text(l.settings.toChar);m=a('<td><input type="text"/></td>');m.find("input").attr("name",k);m.find("input").attr("id",n);e.append(v).append(b).append(m);q.append(e);t.append(q);l.append(t)}function n(){a.sbtools.initController.initComplete(l,"$sbdaterange",function(){l.data("$daterange")||l.data("$daterange",l)},l.settings.onInitComplete)}function z(){l.addClass(l.settings.className);l.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);r();var b;l.find("input").each(function(n){if(0==n){n=a.extend({},
l.settings,{value:l.settings.value[n],onInitComplete:null});l.settings.beginMinDate&&(n=a.extend({},n,{minDate:l.settings.beginMinDate}));if(l.settings.beginMaxDate)n=a.extend({},n,{maxDate:l.settings.beginMaxDate});else{var m=l.find("input").eq(1).attr("id");n=a.extend({},n,{maxDate:"#F{$dp.$D('"+m+"')}"})}l.$begin=a(this).sbdate(n);a(this).removeClass(k.className);a(this).removeClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);a(this).addClass("sinobest-daterange-input sinobest-daterange-begin");b=a(this).attr("id")}else n=
a.extend({},l.settings,{value:l.settings.value[n],onInitComplete:null}),n=l.settings.endMinDate?a.extend({},n,{minDate:l.settings.endMinDate}):a.extend({},n,{minDate:"#F{$dp.$D('"+b+"')}"}),l.settings.endMaxDate&&(n=a.extend({},n,{maxDate:l.settings.endMaxDate})),l.$end=a(this).sbdate(n),a(this).removeClass(k.className),a(this).removeClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI),a(this).addClass("sinobest-daterange-input sinobest-daterange-end")});n();l.data("$daterange",l)}var l=this;if(l.data("$daterange")){if(b){if(void 0===
b.value||null===b.value)b.value=q().getValue();b=a.extend({},q().settings,b||{});q().settings=b;q().reload()}return q()}b=a.extend({},k,b||{});l.settings=b;a.sbbase.mixinWidget(l);l.getValue=function(){var a=[l.$begin.getValue(),l.$end.getValue()];return l.settings.delimiter?a.join(l.settings.delimiter):a};l.setValue=function(b){a.isArray(b)?(l.$begin.setValue(b[0]),l.$end.setValue(b[1])):(l.$begin.setValue(""),l.$end.setValue(""));l.settings.value=b;return l};l.getName=function(){var a=[l.$begin.getName(),
l.$end.getName()];return l.settings.delimiter?a.join(l.settings.delimiter):a};l.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?"value"==a?l.setValue(b):("required"==a?l.settings.required=b:"readonly"==a?(l.settings.readonly=b,l.$begin.setState({readonly:b}),l.$end.setState({readonly:b})):"beginMinDate"==a?l.$begin.setState({minDate:b}):"beginMaxDate"==a?l.$begin.setState({maxDate:b}):"endMinDate"==a?l.$end.setState({minDate:b}):"endMaxDate"==a&&l.$end.setState({maxDate:b}),l.attr(a,
b)):l.removeAttr(a)});return l};l.getDefaultOptions=function(){return k};l.reload=function(){l.empty();a.sbtools.initController.removeInitCompleteFlag(l,"$sbdaterange");z()};l.validate=function(){if("part"==l.settings.validateMode){var b=[l.$begin.validate(),l.$end.validate()];return l.settings.delimiter?b.join(l.settings.delimiter):b}if("whole"==l.settings.validateMode){b=l.$begin.validate();if(a.sbtools.isNotBlank(b))return b;b=l.$end.validate();return a.sbtools.isNotBlank(b)?b:""}throw Error("validateMode is undefined");
};z();return this}})(jQuery);
(function(a){a.extend({sbdialog:function(k){function b(){var b=null;if("alert"==r.dialogType)b=basalDialog({content:r.text,zIndex:r.zIndex,width:r.width,height:r.height,cancel:!1,okValue:r.okValue,ok:r.onOK,onclose:r.onClose}),a(b.node).addClass(r.className),b.show();else if("confirm"==r.dialogType)b=basalDialog({content:r.text,zIndex:r.zIndex,width:r.width,height:r.height,okValue:r.okValue,ok:r.onOK,cancelValue:r.cancelValue,cancel:r.onCancel,onclose:r.onClose}),b.show();else if("message"==r.dialogType)b=
basalDialog({zIndex:r.zIndex,content:r.text,width:r.width,height:r.height,onclose:r.onClose}),a(b.node).addClass(r.className),b.show(),r.autoClose&&setTimeout(function(){b.close().remove()},1E3*r.autoClose);else if("modal"==r.dialogType){var k={title:r.title,zIndex:r.zIndex,width:r.width,height:r.height,button:r.button,onclose:r.onClose,backdropBackground:r.backdropBackground};if(r.url)a.sbtools.isInPseudoProtocolBlackList(r.url,!0),k=a.extend({},k,{url:r.url});else var f=null,f=r.content?r.content:
a("#"+r.containerId).html(),k=a.extend({},k,{content:f});b=basalDialog(k);a(b.node).addClass(r.className);b.showModal()}else k={title:r.title,zIndex:r.zIndex,width:r.width,height:r.height,button:r.button,onclose:r.onClose},r.url?(a.sbtools.isInPseudoProtocolBlackList(r.url,!0),k=a.extend({},k,{url:r.url})):(f=null,f=r.content?r.content:a("#"+r.containerId).html(),k=a.extend({},k,{content:f})),b=basalDialog(k),a(b.node).addClass(r.className),b.show();n.instance=b}var q={containerId:null,content:null,
url:null,className:"sinobest-dialog",dialogType:"dialog",text:"",width:null,height:null,zIndex:9999,title:null,okValue:"确定",cancelValue:"取消",onOK:function(){},onCancel:null,onClose:null,button:null,backdropBackground:"#a7bea9"},r=a.extend({},q,k||{}),n={instance:null,getValue:function(){},setValue:function(a){},getState:function(){return a.extend({},a.sbbase.getDomElementAttributes(n.instance.node))},setState:function(b){var k=this.instance.node;a.each(b,function(b,n){a(k).attr(b,n)});return this.instance},
getClassName:function(){return q.className},getDom:function(){return this.instance.node},reload:function(){this.instance.close();b()},display:function(a){a?this.instance.open||this.instance.show():this.instance.close()},destroy:function(){this.instance.remove()},closeDialog:function(){this.instance.close()}};b();return n}})})(jQuery);Array.prototype.indexOf=function(a){for(var k=0,b;b=this[k];k++)if(b==a)return k;return-1};
Array.prototype.lastIndexOf=function(a){for(var k=this.length-1,b;b=this[k];k--)if(b==a)return k;return-1};String.prototype.format=function(){var a=arguments;return this.replace(/\{(\d+)\}/g,function(k,b){return a[b]})};
(function(a){a.extend({sberror:{}});a.extend(a.sberror,{onError:function(a){},format:function(a,b){var q="";switch(a){case 400:q=this.ERROR_MSG_400.format(b);break;case 404:q=this.ERROR_MSG_404.format(b);break;default:q=this.ERROR_MSG_UNDEFINED.format(b)}return q},ERROR_MSG_400:"错误的请求地址{0}",ERROR_MSG_404:"数据不存在{0}",ERROR_MSG_UNDEFINED:"不明原因请求异常{0}"})})(jQuery);
(function(a){var k={className:"sinobest-fullcalendar",setting:{lang:"zh-cn"},onInitComplete:null};a.fn.sbfullcalendar=function(b){function q(){return l.data("$sbfullcalendar")}function r(){l.data("$sbfullcalendar",l)}function n(){a.sbtools.initController.initComplete(l,"$sbfullcalendar",function(){l.data("$sbfullcalendar")||r()},l.settings.onInitComplete)}function z(){l.addClass(l.settings.className);l.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);l.fullCalendar(l.settings.setting);n();r();return l}
var l=this;if(l.data("$sbfullcalendar"))return b&&(b=a.extend(!0,{},q().settings,b||{}),q().settings=b,q().reload()),q();b=a.extend(!0,{},k,b||{});l.settings=b;a.sbbase.mixinWidget(l);l.getFullCalendar=function(){return l};l.setState=function(b){a.each(b,function(a,b){l.attr(a,b)});return l};l.getDefaultOptions=function(){return k};l.reload=function(){l.empty();l.getFullCalendar().fullCalendar("destroy");a.sbtools.initController.removeInitCompleteFlag(l,"$sbfullcalendar");return z()};l.destroy=function(){l.getFullCalendar().fullCalendar("destroy");
return l.remove()};return this.each(function(){z()})}})(jQuery);
(function(a){var k={className:"sinobest-hidden",value:null,onInitComplete:null};a.fn.sbhidden=function(b){function q(){a.sbtools.initController.initComplete(n,"$sbinput",function(){n.data("$input")||n.data("$input",n)},n.settings.onInitComplete)}function r(){n.addClass(n.settings.className);n.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);void 0!==n.settings.value&&null!==n.settings.value&&n.setValue(n.settings.value);q();n.data("$input",n);return n}var n=this;if(n.data("$input"))if(b){if(void 0===
b.value||null===b.value)b.value=n.data("$input").getValue();b=a.extend({},n.data("$input").settings,b||{})}else return n.data("$input");else b=a.extend({},k,b||{});n.settings=b;a.sbbase.mixinWidget(n);n.getValue=function(){return n.val()};n.setValue=function(a){n.val(a);n.settings.value=a;return n};n.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?"value"==a?n.setValue(b):n.attr(a,b):n.removeAttr(a)});return n};n.getDefaultOptions=function(){return k};n.reload=function(){a.sbtools.initController.removeInitCompleteFlag(n,
"$sbinput");return r()};n.getName=function(){return n.attr("name")};return this.each(function(){r()})}})(jQuery);
(function(a){a.extend({sbiframetools:{}});a.extend(a.sbiframetools,{getIframeById:function(k){return a("#"+k)[0]},getIframeByName:function(k){return a("iframe[name='"+k+"']")[0]},callIframeMethod:function(a,b,q){if(null===q||void 0===q)q=[];return a.contentWindow[b].apply(a.contentWindow,q)},getIframeVarValue:function(a,b){return a.contentWindow[b]},setIframeVarValue:function(a,b,q){a.contentWindow[b]=q},getIframeJqueryElement:function(k,b){return a(b,k.contentWindow.document)},getParent:function(){return window.parent},
callParentMehtod:function(a,b){if(null===b||void 0===b)b=[];this.getParent()[a].apply(this.getParent(),b)},getParentVarValue:function(a){return this.getParent()[a]},setParentVarValue:function(a,b){this.getParent()[a]=b},getParentJqueryElement:function(k){return a(k,this.getParent().document)},getParentIframeById:function(k){return a("#"+k,this.getParent().document)[0]},getParentIframeByName:function(k){return a("iframe[name='"+k+"']",this.getParent().document)[0]},getCurrentWindowIframes:function(k){var b=
[];a.sbiframetools._getIframes(b,k,!1);return b},recursionGetCurrentWindowIframes:function(k){var b=[];a.sbiframetools._getIframes(b,k,!0);return b},_getIframes:function(k,b,q){void 0===b&&(b=window.document);a("iframe",b).each(function(){k.push(a(this));q&&a.sbiframetools._getIframes(k,a(this)[0].contentWindow.document,!0)})}})})(jQuery);
(function(a){var k={className:"sinobest-image",openType:"dialog",dialogTitle:"图片展示",sizeMode:"window",onInitComplete:null};a.fn.sbimage=function(b){function q(){a.sbtools.initController.initComplete(n,"$sbimg",function(){n.data("$img")||n.data("$img",n)},n.settings.onInitComplete)}function r(){n.addClass(n.settings.className);n.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);var b=n.attr("src");n.$wrapAll=a('<a href="'+b+'" rel="'+b+'" class="sinobest-mini-image sinobest-image-wrap"></a>');n.wrapAll(n.$wrapAll);
n.parent().on("click",function(){var b=a(this).attr("href"),k="0"===a(this).attr("rel").length?a(this).attr("rel"):b;f(a(this),b,k);return!1});var k=function(a,b){var f=new Image;f.src=a;f.complete?b.call(f):f.onload=function(){b.call(f)}},f=function(b,f,y){var t=0,q=0,e=function(){var e=b.next(".sinobest-image-box");"dialog"==n.settings.openType&&(e=a("div.ui-dialog-content"));e.hover(function(){e.addClass("js_hover")},function(){e.removeClass("js_hover")});e.find("a").off("click").on("click",function(){if(a(this).hasClass("hideImg")||
a(this).hasClass("maxImgLink"))"dialog"==n.settings.openType?e.parents(".ui-dialog").find(".ui-dialog-close").click():(e.hide(),e.prev().show());a(this).hasClass("imgLeft")&&e.find(".maxImg").rotate("left");a(this).hasClass("imgRight")&&e.find(".maxImg").rotate("right");a(this).hasClass("viewImg")&&window.open(y);return!1})};k(f,function(){t=this.width;q=this.height;"dialog"!=n.settings.openType&&b.hide();if(0!=b.next(".sinobest-image-box").length)if("dialog"!=n.settings.openType)b.next(".sinobest-image-box").show();
else{var k=b.next(".sinobest-image-box").attr("id"),k={dialogType:"modal",title:n.settings.dialogTitle,containerId:k};a.sbdialog(k);e()}else{"parent"==n.settings.sizeMode?(k=b.parent().innerWidth()-200,t>k&&(q*=k/t,t=k)):(t=a(window).width()-200,q=a(window).height());var l=new Date,k=l.getHours()+1,w=l.getMinutes()+1,l=l.getSeconds()+1,k="sinobest-image-box-"+k+w+l;b.after('<div id="'+k+'" class="sinobest-image-box"><div class="sinobest-image-tool">\x3c!--<a class="hideImg" href="#" title="收起">收起</a>--\x3e<a class="imgLeft" href="#" title="向左转">向左转</a><a class="imgRight" href="#" title="向右转">向右转</a><a class="viewImg" href="'+
y+'" title="查看原图">查看原图</a></div><a href="'+y+'" class="maxImgLink"> <img class="maxImg" width="'+t+'" height="'+q+'" src="'+f+'" /></a></div>');"dialog"==n.settings.openType&&(b.next(".sinobest-image-box").hide(),k={dialogType:"modal",title:n.settings.dialogTitle,containerId:k},a.sbdialog(k));e()}});a.fn.rotate=function(b){var e=a(this)[0],f=e.getAttribute("step");this.data("width")||a(this).data("height")||(this.data("width",e.width),this.data("height",e.height));null==f&&(f=0);"left"==b?3==f?f=
0:f++:"right"==b&&(0==f?f=3:f--);e.setAttribute("step",f);if(document.all){e.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+f+")";if(a.sbtools.isIE8())switch(f){case 0:this.parent().height("");break;case 1:this.parent().height(this.data("width")+10);break;case 2:this.parent().height("");break;case 3:this.parent().height(this.data("width")+10)}e=a(this);document.all&&"dialog"==n.settings.openType&&(f=e.closest("div.ui-dialog-content"),0>=f.length||(f.width(e.width()),f.height(e.height())))}else{b=
this.next("canvas")[0];0==this.next("canvas").length&&(this.css({visibility:"hidden",position:"absolute"}),b=document.createElement("canvas"),b.setAttribute("class","maxImg canvas"),e.parentNode.appendChild(b));var c=b.getContext("2d");switch(f){default:case 0:b.setAttribute("width",e.width);b.setAttribute("height",e.height);c.rotate(0*Math.PI/180);c.drawImage(e,0,0,e.width,e.height);break;case 1:b.setAttribute("width",e.height);b.setAttribute("height",e.width);c.rotate(90*Math.PI/180);c.drawImage(e,
0,-e.height,e.width,e.height);break;case 2:b.setAttribute("width",e.width);b.setAttribute("height",e.height);c.rotate(180*Math.PI/180);c.drawImage(e,-e.width,-e.height,e.width,e.height);break;case 3:b.setAttribute("width",e.height),b.setAttribute("height",e.width),c.rotate(270*Math.PI/180),c.drawImage(e,-e.width,0,e.width,e.height)}}}};q();n.data("$img",n);return n}var n=this;if(n.data("$img"))if(b)b=a.extend({},n.data("$img").settings,b||{});else return n.data("$img");else b=a.extend({},k,b||{});
n.settings=b;a.sbbase.mixinWidget(n,{isAddValueMethod:!1});n.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?n.attr(a,b):n.removeAttr(a)});return n};n.getDefaultOptions=function(){return k};n.reload=function(){a.sbtools.initController.removeInitCompleteFlag(n,"$sbimg");return r()};n.open=function(){n.parent().trigger("click")};return this.each(function(){r()})}})(jQuery);
(function(a){var k=[{id:"code",name:"code",hidden:!0},{id:"detail",name:"名称"}],b={id:null,name:null,value:null,mode:"pop",colModel:k,valueField:"code",labelField:"detail",url:null,data:null,pageSize:20,width:null,height:null,listWidth:null,listHeight:null,searchField:["detail"],otherRequestParam:null,type:"multiple",style:null,className:"sinobest-listbox",required:!1,readonly:!1,disabled:!1,callback:null,onItemAdd:null,onItemRemove:null,onConfirm:null,delimiter:null,pageConfig:{pageField:"page",pageSizeField:"pageSize",
queryField:"query",totalCountField:"totalCount",pageCountField:"pageCount",searchField:"searchField",sortField:"sortField",sortOrderField:"sortOrder",dataField:"data"},onAjaxRequest:null,onAjaxResponse:null,saveType:"c",transUrl:null,onTranslateRequest:null,onTranslateResponse:null,translateCallback:null,onChange:null,onInitComplete:null,enableQuery:!0,title:null,paging:!0,setValueTriggerChange:!0,enableSimpleSingleModel:!1};a.fn.sblistbox=function(q){function r(){return g.data("$sblistbox")}function n(a){var c=
g._$selectedListControl.getValue(),d=[];if("c"==a){a=0;for(var h=c.length;a<h;a++)d.push(c[a][g.settings.valueField])}else for(a=0,h=c.length;a<h;a++)d.push(c[a][g.settings.labelField]);return g.settings.delimiter?d.join(g.settings.delimiter):"single"==g.settings.type?0<d.length?d[0]:"":d}function z(c,d){var h=a.sbtools.convertSetValue(c);a.isArray(h)||a.sbtools.isBlank(h)?l(h,d,c):a.sbbase.translateController.translate(g,{value:h},function(a){l(a,d,c)})}function l(c,d,h){g._$labelControl.setValue(c);
g._$selectedListControl.init(c);g.settings.value=h;d&&a.isFunction(d)&&d()}function f(){if(a.isFunction(g.settings.onChange)&&g.settings.setValueTriggerChange){var c=g._$selectedListControl.getValue();g.settings.onChange&&F("onChange",[c,"add",c])}}function u(){return"pop"==g.settings.mode?!0:!1}function m(){return"container"==g.settings.mode?!0:!1}function y(a){for(var c=0;c<g.settings.colModel.length;c++){var d=g.settings.colModel[c];if(d.id==a&&!0===d.sortable)return!0}return!1}function t(){a.sbtools.initController.initComplete(g,
"$sblistbox",function(){g.data("$sblistbox")||g.data("$sblistbox",g)},g.settings.onInitComplete)}function D(){return null!=g.settings.data&&void 0!=g.settings.data?!1:g.settings.paging}function e(){g.addClass(g.settings.className);g.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);null==g.settings.id&&(g.settings.id=g.attr("id")+"_listbox");if(null==g.settings.colModel||""==g.settings.colModel)g.settings.colModel=k;if(!m()){var c=a('<input type="text" readonly></input>');c.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);
g.settings.id&&c.attr("id",g.settings.id);g.settings.name&&c.attr("name",g.settings.name);g.settings.style&&c.attr("style",g.settings.style);c.attr("disabled",g.settings.disabled);a.sbtools.toggleInputDisabledClass(c,g.settings.disabled);a.sbtools.toggleInputReadonlyClass(c,g.settings.readonly);g.append(c);g._$labelControl=c}c=a('<div class="sinobest-listbox-container sinob-widget-container"></div>');u()&&a.sbpopuplayer.registerPopup(c);c.append(v());c.append(h());u()?(g.attr("id")?c.attr("id",g.attr("id")+
"_listbox_container"):g.settings.id&&c.attr("id",g.settings.id+"_listbox_container"),a(document.body).append(c)):g.append(c);g._$container=c;g.settings.width&&g._$container.width(g.settings.width);g.settings.height&&(g._$selectable.height(g.settings.height),g._$selected.height(g.settings.height));g.settings.listWidth&&(g._$selectableListContent.width(g.settings.listWidth),g._$selectedListContent.width(g.settings.listWidth),a.sbtools.isIE6OrIE7()&&g._$selectablePageControl.width(g.settings.listWidth));
g.settings.listHeight&&(g._$selectableListContent.height(g.settings.listHeight),g._$selectedListContent.height(g.settings.listHeight));g.settings.enableSimpleSingleModel&&"single"===g.settings.type&&(g._$selected.hide(),g._$selectbtnsControl.hide(),g._$container.addClass("sinobest-listbox-container-simple-single"),g._$selectableListContent.addClass("sinobest-listbox-selectable-simple-single"));g._$container.isFillDynamicDatas=!1;d();B();L();J();N();K();g.data("$sblistbox",g);return g}function v(){var d=
a('<div class="sinobest-listbox-select"></div>');d.append(C());d.append(w());d.append(c());d.append(x());d.append('<div style="clear:both;"></div>');return d}function C(){if(!a.sbtools.isBlank(g.settings.title)){var c=a('<div class="sinobest-listbox-header"></div>'),d=a('<div class="sinobest-listbox-header-title"></div>');d.text(g.settings.title);c.append(d);return c}}function w(){var c=a('<div class="sinobest-listbox-selectable"></div>'),d="",h="";g.settings.enableQuery&&(d=a('<div class="sinobest-listbox-selectable-query"></div>'),
h=a('<input type="text" class="sinobest-text-query"></input>'),d.append(h));var b=a('<div class="sinobest-listbox-selectable-list-container"></div>'),e=a('<div class="sinobest-listbox-selectable-list-content"></div>'),B=E.renderList(!0);b.append(e.append(B));var f=a('<div class="sinobest-listbox-selectable-page">');f.append(a('<div class="sinobest-listbox-page-total"></div>')).append(a('<span><input type="button" value="" class="sinobest-listbox-page-btn sinobest-listbox-page-first"></input><input type="button" value="" class="sinobest-listbox-page-btn  sinobest-listbox-page-pre"></input></span>')).append(a('<span class="sinobest-listbox-page-totalpage"></span>')).append(a('<span><input type="button" value="" class="sinobest-listbox-page-btn sinobest-listbox-page-next"></input><input type="button" value="" class="sinobest-listbox-page-btn sinobest-listbox-page-last"></input></span>'));
c.append(d).append(b);D()&&c.append(f);g._$selectable=c;g.settings.enableQuery&&(g._$selectableQueryTextControl=h);g._$selectableListContent=e;g._$selectableListControl=B;g._$selectablePageControl=f;return c}function c(){var c=a('<div class="sinobest-listbox-selectbtns"></div>');c.append(a('<div><input type="button" value="添加 >"   class="sinobest-button-common sinobest-listbox-selectbtns-btn sinobest-listbox-btn-add"></input></div>')).append(a('<div><input type="button" value="删除 <"   class="sinobest-button-common sinobest-listbox-selectbtns-btn sinobest-listbox-btn-remove"></input></div>')).append(a('<div><input type="button" value="全增>>"  class="sinobest-button-common sinobest-listbox-selectbtns-btn sinobest-listbox-btn-addAll"></input></div>')).append(a('<div><input type="button" value="全删<<"  class="sinobest-button-common sinobest-listbox-selectbtns-btn sinobest-listbox-btn-removeAll"></input></div>'));
return g._$selectbtnsControl=c}function x(){var c=a('<div class="sinobest-listbox-selected"></div>'),d=a('<div class="sinobest-listbox-selected-list-container"></div>'),h=a('<div class="sinobest-listbox-selected-list-content"></div>'),b=E.renderList(!1);d.append(h.append(b));c.append(d);g._$selected=c;g._$selectedListContent=h;g._$selectedListControl=b;return c}function h(){if(!m()){var c=a('<div class="sinobest-listbox-btns"></div>'),d=a('<input type="button" value="确定"   class="sinobest-button-common sinobest-listbox-btns-confirmbtn"></input>'),
h=a('<input type="button" value="关闭"   class="sinobest-button-common sinobest-listbox-btns-closebtn"></input>');c.append(d).append(h);g._$confirmBtnControl=d;g._$closeBtnControl=h;return c}}function d(){m()?g._$labelControl={setValue:function(a){}}:(g._$labelControl.bind("click",function(){g.settings.readonly||g._$container.is(":visible")||(g._$container.isFillDynamicDatas||(H(),g._$container.isFillDynamicDatas=!0),a.sbpopuplayer.popup(g._$container))}),g._$labelControl.setValue=function(a){if(void 0!=
a&&0<a.length){var c="";if("single"==g.settings.type)c+=a[0][g.settings.labelField];else for(var d=0,h=a.length;d<h;d++)c+=a[d][g.settings.labelField],d!=a.length-1&&(c+=";");this.val(c);this.attr("title",c)}else this.val(""),this.attr("title","")})}function B(){function a(){g._$selectablePageControl.getNextPage().attr("disabled","disabled");g._$selectablePageControl.getLastPage().attr("disabled","disabled");g._$selectablePageControl.getNextPage().addClass("sinobest-listbox-page-next-disabled");g._$selectablePageControl.getLastPage().addClass("sinobest-listbox-page-last-disabled")}
(function(){if(g.settings.enableQuery)g._$selectableQueryTextControl.on("keyup",function(){g._$selectableQueryTextControl.lastQuery!=g._$selectableQueryTextControl.val()&&(g._$selectableQueryTextControl.lastQuery=g._$selectableQueryTextControl.val(),A(1))})})();g._$selectableListControl.controller=new E(g._$selectableListControl);g._$selectableListControl.init=function(a){this.controller.clearItems();this.controller.addItems(a[g.settings.pageConfig.dataField]);"function"==typeof g._$selectedListControl.controller.getCurrentPageItems?
(a=g._$selectedListControl.controller.getCurrentPageItems(),this.controller.removeItems(a)):this.controller.removeItems(g.settings.value)};g._$selectableListControl.controller.bindSortEvent();g._$selectableListControl.getSortValue=function(){return this.controller.getSortValue()};g._$selectablePageControl.init=function(a){if(D()){var c=null==a[g.settings.pageConfig.pageCountField]?0:a[g.settings.pageConfig.pageCountField];this.data("totalpage",c);var d=0==a[g.settings.pageConfig.totalCountField]?
0:a[g.settings.pageConfig.pageField];this.data("page",d);this.find("div.sinobest-listbox-page-total").html("共"+a[g.settings.pageConfig.totalCountField]+"条记录");this.find("span.sinobest-listbox-page-totalpage").html(d+"/"+c);g._$selectablePageControl.refreshButtonState(d,c)}};g._$selectablePageControl.getFirstPage=function(a){return g._$selectablePageControl.find(".sinobest-listbox-page-first")};g._$selectablePageControl.getPrePage=function(){return g._$selectablePageControl.find(".sinobest-listbox-page-pre")};
g._$selectablePageControl.getNextPage=function(){return g._$selectablePageControl.find(".sinobest-listbox-page-next")};g._$selectablePageControl.getLastPage=function(){return g._$selectablePageControl.find(".sinobest-listbox-page-last")};g._$selectablePageControl.refreshButtonState=function(c,d){1==c||0==c?(g._$selectablePageControl.getFirstPage().attr("disabled","disabled"),g._$selectablePageControl.getPrePage().attr("disabled","disabled"),g._$selectablePageControl.getFirstPage().addClass("sinobest-listbox-page-first-disabled"),
g._$selectablePageControl.getPrePage().addClass("sinobest-listbox-page-pre-disabled")):(g._$selectablePageControl.getFirstPage().removeAttr("disabled"),g._$selectablePageControl.getPrePage().removeAttr("disabled"),g._$selectablePageControl.getFirstPage().removeClass("sinobest-listbox-page-first-disabled"),g._$selectablePageControl.getPrePage().removeClass("sinobest-listbox-page-pre-disabled"));c==d?a():(g._$selectablePageControl.getNextPage().removeAttr("disabled"),g._$selectablePageControl.getLastPage().removeAttr("disabled"),
g._$selectablePageControl.getNextPage().removeClass("sinobest-listbox-page-next-disabled"),g._$selectablePageControl.getLastPage().removeClass("sinobest-listbox-page-last-disabled"));0==d&&a()};g._$selectablePageControl.getFirstPage().bind("click",function(){var a=Number(g._$selectablePageControl.data("page"));1!=a&&0!=a&&A(1)});g._$selectablePageControl.getPrePage().bind("click",function(){var a=Number(g._$selectablePageControl.data("page"));0!=a-1&&0!=a&&A(Number(g._$selectablePageControl.data("page"))-
1)});g._$selectablePageControl.getNextPage().bind("click",function(){var a=Number(g._$selectablePageControl.data("page")),c=Number(g._$selectablePageControl.data("totalpage"));a!=c&&0!=a&&A(Number(g._$selectablePageControl.data("page"))+1)});g._$selectablePageControl.getLastPage().bind("click",function(){var a=Number(g._$selectablePageControl.data("page")),c=Number(g._$selectablePageControl.data("totalpage"));a!=c&&0!=a&&A(Number(g._$selectablePageControl.data("totalpage")))})}function A(c){var d=
{};a.extend(d,g.settings.otherRequestParam||{});d[g.settings.pageConfig.pageField]=c;c=g.settings.pageConfig.queryField;var h;h=g.settings.enableQuery?g._$selectableQueryTextControl.val():"";d[c]=h;d[g.settings.pageConfig.pageSizeField]=g.settings.pageSize;d[g.settings.pageConfig.searchField]=g.settings.searchField.join(";");c=g._$selectableListControl.getSortValue();null!=c&&(d[g.settings.pageConfig.sortField]=c.sortField,d[g.settings.pageConfig.sortOrderField]=c.sortOrder);null!=g.settings.data&&
void 0!=g.settings.data?M(d,function(a){g._$selectableListControl.init(a);g._$selectablePageControl.init(a)}):I(d,function(a){g._$selectableListControl.init(a);g._$selectablePageControl.init(a)})}function I(c,d){g.settings.onAjaxRequest&&a.isFunction(g.settings.onAjaxRequest)&&(c=g.settings.onAjaxRequest(c));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c),url:g.settings.url,success:function(c){if(g.settings.onAjaxResponse&&a.isFunction(g.settings.onAjaxResponse))g.settings.onAjaxResponse(c);
d(c)},error:function(c,d,h){d={};d.code=c.status;d.msg=a.sberror.format(d.code,this.url);a.sberror.onError(d)}})}function M(c,d){var h={},b=c[g.settings.pageConfig.queryField];if(a.sbtools.isBlank(b))h[g.settings.pageConfig.dataField]=g.settings.data;else{var e=c[g.settings.pageConfig.searchField];if(a.sbtools.isNotBlank(e)){h[g.settings.pageConfig.dataField]=[];for(var e=e.split(";"),B=0;B<g.settings.data.length;B++)for(var f=g.settings.data[B],k=0;k<e.length;k++){var A=f[e[k]];if(A&&-1<A.indexOf(b)){h[g.settings.pageConfig.dataField].push(f);
break}}}}d(h)}function L(){g._$selectbtnsControl.triggerAddEvent=function(){this.find(".sinobest-listbox-btn-add").trigger("click")};g._$selectbtnsControl.triggerRemoveEvent=function(){this.find(".sinobest-listbox-btn-remove").trigger("click")};g._$selectbtnsControl.find(".sinobest-listbox-btn-add").bind("click",function(){var a=g._$selectableListControl.controller.getSelectItems();G(a)?null===a||0>=a.length||!F("onItemAdd",[a])||(g._$selectableListControl.controller.removeSelectItems(),g._$selectedListControl.controller.addItems(a)):
g._$selectableListControl.controller.clearSelectedFlag(a)});g._$selectbtnsControl.find(".sinobest-listbox-btn-remove").bind("click",function(){var a=g._$selectedListControl.controller.getSelectItems();null===a||0>=a.length||!F("onItemRemove",[a])||(g._$selectedListControl.controller.removeSelectItems(),g._$selectableListControl.controller.addItems(a))});g._$selectbtnsControl.find(".sinobest-listbox-btn-addAll").bind("click",function(){var a=g._$selectableListControl.controller.getCurrentPageItems();
!G(a)||null===a||0>=a.length||!F("onItemAdd",[a])||(g._$selectableListControl.controller.clearItems(),g._$selectedListControl.controller.addItems(a))});g._$selectbtnsControl.find(".sinobest-listbox-btn-removeAll").bind("click",function(){var a=g._$selectedListControl.controller.getCurrentPageItems();null===a||0>=a.length||!F("onItemRemove",[a])||(g._$selectedListControl.controller.clearItems(),g._$selectableListControl.controller.addItems(a))})}function G(a){return"single"==g.settings.type&&(1<=g._$selectedListControl.controller.getCurrentPageItems().length||
1<a.length)?(alert("最多只能选择一条记录"),!1):!0}function F(a,c){if("function"==typeof g.settings[a]){var d=g.settings[a].apply(g,c);return void 0===d?!0:d}return!0}function J(){g._$selectedListControl.controller=new E(g._$selectedListControl);g._$selectedListControl.init=function(a){this.controller.clearItems();"single"==g.settings.type?void 0!=a&&0<a.length&&(a=a.slice(0,1),this.controller.addItems(a)):this.controller.addItems(a);this.setValue(a)};g._$selectedListControl.setValue=function(a){g._$selectedListControl.value=
void 0==a?[]:a};g._$selectedListControl.getValue=function(){return"undefined"==typeof g._$selectedListControl.value?[]:g._$selectedListControl.value}}function N(){m()||(g._$confirmBtnControl.bind("click",function(){var c=g._$selectedListControl.controller.getCurrentPageItems();if(F("onConfirm",[c])){var d=g.getValue();g._$labelControl.setValue(c);g._$selectedListControl.setValue(c);a.sbpopuplayer.hide(g._$container);d.toString()!=g.getValue().toString()&&(c=g._$selectedListControl.getValue(),g.settings.onChange&&
F("onChange",[c,"add",c]))}}),g._$closeBtnControl.bind("click",function(){a.sbpopuplayer.hide(g._$container)}))}function K(){void 0!==g.settings.value&&null!==g.settings.value?z(g.settings.value,function(){t();f()}):t();g._$container.isFillDynamicDatas&&H()}function H(){1!=g.settings.readonly&&1!=g.settings.disabled&&A(1)}var g=this;if(g.data("$sblistbox")){if(q){if(void 0===q.value||null===q.value)q.value=r().getValue();q=a.extend({},r().settings,q||{});r().settings=q;r().reload()}return r()}q=a.extend({},
b,q||{});g.settings=q;a.sbbase.mixinWidget(g);g.getValue=function(){return n(g.settings.saveType)};g.getLabel=function(){return n("d")};g.setValue=function(a){z(a,function(){f()})};g.getSelectItems=function(){return g._$selectedListControl.getValue()};g.getSelectedPageItems=function(){return g._$selectedListControl.controller.getCurrentPageItems()};g.setState=function(c){a.each(c,function(c,d){void 0!==d&&null!==d?"value"==c?g.setValue(d):"required"==c?(g.settings.required=d,g._$labelControl.attr("required",
d)):"disabled"==c?(g.settings.disabled=d,g._$labelControl.attr("disabled",d),a.sbtools.toggleInputDisabledClass(g._$labelControl,d)):"readonly"==c?(g.settings.readonly=d,a.sbtools.toggleInputReadonlyClass(g._$labelControl,d)):g.attr(c,d):g.removeAttr(c)});return g};g.getDefaultOptions=function(){return b};g.reload=function(){u()&&g._$container.remove();g.empty();a.sbtools.initController.removeInitCompleteFlag(g,"$sblistbox");e()};g.load=function(c){if(a.sbtools.isNonNull(c))a.sbtools.isInPseudoProtocolBlackList(c,
!0),g.settings.data=null,g.settings.url=null,a.isArray(c)?g.settings.data=c:g.settings.url=c,g.reload();else throw Error("Please set the correct data source");};g.destroy=function(){u()&&g._$container.remove();g.remove()};g.validate=function(){return a.isFunction(g.settings.callback)?this.settings.callback.apply(this,[this.settings,this.getValue()]):g.settings.required&&!a.sbvalidator.required(g._$labelControl[0],g.getValue())?a.sbvalidator.TEXT_REQUIRED:""};g.loadData=function(c){null===g.settings.otherRequestParam&&
(g.settings.otherRequestParam={});a.extend(g.settings.otherRequestParam,c);A(1)};g.getName=function(){return g.settings.name};var E=function(a){this.$control=a};E.renderList=function(c){for(var d=a('<table cellspacing="0" cellpadding="0" class="sinobest-listbox-list"></table>'),h=a("<thead><tr></tr></thead>"),b=0,e=g.settings.colModel.length;b<e;b++){var B=g.settings.colModel[b],f=a("<th></th>");f.attr("field",B.id);f.text(B.name);B.width&&f.css("width",B.width);B.hidden&&f.css("display","none");
h.find("tr:first").append(f)}if(c)for(c=0,b=g.settings.colModel.length;c<b;c++)if(B=g.settings.colModel[c],B.sortable){h.find("tr:first").find("th[field='"+B.id+"']").append('<span class="sinobest-listbox-list-sort sinobest-listbox-list-sort-asc" order="asc"></span>');break}d.append(h).append("<tbody></tbody>");return d};E.prototype={addItems:function(c){if(void 0!=c)for(var d=0,h=c.length;d<h;d++){var b=c[d],e=a("<tr></tr>");e.attr("row-key",b[g.settings.valueField]);e.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,
b);this.bindItemEvent(e);for(var B=0,f=g.settings.colModel.length;B<f;B++){var k=g.settings.colModel[B],A=void 0==b[k.id]?"":b[k.id],w=a("<td></td>");w.text(A);k.hidden&&w.css("display","none");e.append(w)}this.$control.find("tbody").append(e)}},bindItemEvent:function(a){g.settings.enableSimpleSingleModel&&"single"==g.settings.type?this._bindSimpleSingleItemEvent(a):this._bindGeneralItemEvent(a)},_bindGeneralItemEvent:function(c){c.on("click",function(){a(this).data("selected")||a(this).hasClass("sinobest-listbox-list-item-selected")?
a(this).removeData("selected"):a(this).data("selected",!0);a(this).toggleClass("sinobest-listbox-list-item-selected")}).on("dblclick",function(){var c="tbody tr[row-key='"+a(this).attr("row-key")+"']";0<g._$selectableListControl.find(c).length?(a(this).data("selected",!0),g._$selectbtnsControl.triggerAddEvent()):0<g._$selectedListControl.find(c).length&&(a(this).data("selected",!0),g._$selectbtnsControl.triggerRemoveEvent())});this._bindItemHover(c)},_bindSimpleSingleItemEvent:function(c){c.on("click",
function(){g._$selectedListControl.controller.clearItems();if(a(this).data("selected")||a(this).hasClass("sinobest-listbox-list-item-selected"))a(this).removeData("selected");else{g._$selectableListControl.controller.clearAllSelectedFlag();a(this).data("selected",!0);var c=g._$selectableListControl.controller.getSelectItems();F("onItemAdd",[c])&&g._$selectedListControl.controller.addItems(c)}a(this).toggleClass("sinobest-listbox-list-item-selected")});this._bindItemHover(c)},_bindItemHover:function(c){c.hover(function(){a(this).addClass("sinobest-listbox-list-item-hover")},
function(){a(this).removeClass("sinobest-listbox-list-item-hover")})},getSelectItems:function(){var c=this,d=[];this.$control.find("tbody tr").each(function(h,b){if(a(b).data("selected")){var e={};a(b).find("td").each(function(c,d){e[g.settings.colModel[c].id]=a(d).text()});e=c.addDataFieldsColumnValue(a(b).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY),e);d.push(e)}});return d},clearSelectedFlag:function(a){for(var c=0,d=a.length;c<d;c++){var h=this.$control.find("tbody tr[row-key='"+a[c][g.settings.valueField]+
"']");h&&(h.removeData("selected"),h.removeClass("sinobest-listbox-list-item-selected"))}},clearAllSelectedFlag:function(){this.$control.find("tbody tr").each(function(c,d){a(d).data("selected")&&(a(d).removeData("selected"),a(d).removeClass("sinobest-listbox-list-item-selected"))})},getCurrentPageItems:function(){var c=this,d=[];this.$control.find("tbody tr").each(function(h,b){var e={};a(b).find("td").each(function(c,d){e[g.settings.colModel[c].id]=a(d).text()});e=c.addDataFieldsColumnValue(a(b).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY),
e);d.push(e)});return d},removeSelectItems:function(){this.$control.find("tbody tr").each(function(c,d){a(d).data("selected")&&a(d).remove()})},clearItems:function(){this.$control.find("tbody").empty()},removeItems:function(a){for(var c=0,d=a.length;c<d;c++)this.$control.find("tbody tr[row-key='"+a[c][g.settings.valueField]+"']").remove()},bindSortEvent:function(){this.$control.find("thead tr:first>th").each(function(c,d){a(d).bind("click",function(){if(y(a(this).attr("field"))){a(this).parent().find("th[field!='"+
a(this).attr("field")+"']").each(function(c,d){var h=a(d).find("span:first");if(h.hasClass("sinobest-listbox-list-sort"))return h.remove(),!1});var c=a(this).find("span:first");c.hasClass("sinobest-listbox-list-sort")?c.hasClass("sinobest-listbox-list-sort-asc")?(c.removeClass("sinobest-listbox-list-sort-asc"),c.addClass("sinobest-listbox-list-sort-desc"),c.attr("order","desc")):c.hasClass("sinobest-listbox-list-sort-desc")&&(c.removeClass("sinobest-listbox-list-sort-desc"),c.addClass("sinobest-listbox-list-sort-asc"),
c.attr("order","asc")):a(this).append('<span class="sinobest-listbox-list-sort sinobest-listbox-list-sort-asc" order="asc"></span>');A(1)}})})},getSortValue:function(){var c=null;this.$control.find("thead tr:first>th").each(function(d,h){var b=a(h).find("span:first");if(b.hasClass("sinobest-listbox-list-sort"))return c={sortField:a(h).attr("field"),sortOrder:b.attr("order")},!1});return c},addDataFieldsColumnValue:function(a,c){if(void 0===a||null===a)return c;for(var d in a)c.hasOwnProperty(d)||
(c[d]=a[d]);return c}};return this.each(function(){e()})}})(jQuery);
(function(a){a.extend({sbloadingstatus:function(k){var b={className:"sinobest-loadingstatus",loadingClassName:"sinobest-loading",mode:"auto"},q=a.extend({},b,k||{}),r=this;this.open=function(){a("body").addClass(q.loadingClassName);a(document).on({ajaxStop:function(){r.close()}})};this.simpleOpen=function(){a("body").addClass(q.loadingClassName)};this.close=function(){a("body").removeClass(q.loadingClassName)};this.getClassName=function(){return b.className};r.$container=a("<span></span>").addClass(q.className);
a("body").append(r.$container);(function(){if("auto"==q.mode)a(document).on({ajaxStart:function(){a("body").addClass(q.loadingClassName)},ajaxStop:function(){r.close()}})})();return this}})})(jQuery);
(function(a){var k={className:"sinobest-numbertext",required:!1,placeholder:null,disabled:!1,readonly:!1,regex:null,callback:null,value:null,prefix:null,suffix:null,precision:"",decimalDelimiter:".",groupDelimiter:"",min:null,max:null,minlength:null,maxlength:null,onChange:null,autoCompletePrecision:!0,onInitComplete:null,setValueTriggerChange:!0};a.fn.sbnumbertext=function(b){function q(){return v.data("$sbnumbertext")}function r(){v.data("$sbnumbertext",v)}function n(c,b){a.sbtools.isBlank(c)?(v.val(""),
v.settings.value="",b&&b()):m(D(c))||(v.val(y(c)),v.settings.value=c,b&&b())}function z(){a.isFunction(v.settings.onChange)&&v.settings.setValueTriggerChange&&v.trigger("change")}function l(){a.sbtools.initController.initComplete(v,"$sbnumbertext",function(){v.data("$sbnumbertext")||r()},v.settings.onInitComplete)}function f(){v.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);v.addClass(v.settings.className);v.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);v.attr("required",v.settings.required);
void 0!==v.settings.placeholder&&null!==v.settings.placeholder&&(v.attr("placeholder",v.settings.placeholder),a.sbtools.isPlaceHolderSupported()||v.placeholder());v.attr("readonly",v.settings.readonly);a.sbtools.toggleInputReadonlyClass(v,v.settings.readonly);v.attr("disabled",v.settings.disabled);a.sbtools.toggleInputDisabledClass(v,v.settings.disabled);u();void 0!==v.settings.value&&null!==v.settings.value?n(v.settings.value,function(){l();z()}):l();r();return v}function u(){v.on("keydown",function(c){if(!v.settings.readonly){v.settings.maxlength&&
a.trim(v.getValue()).length<=v.settings.maxlength&&(v.lastValue=v.getValue());var b=c.keyCode?c.keyCode:c.which;if(8==b||13==b||9==b||46==b||37==b||39==b||!0===c.ctrlKey&&(86==b||65==b||67==b))return!0;var h;h=b;var d=c.shiftKey,B="";w.codes.hasOwnProperty(h)&&(h=w.codes[h]);!d&&65<=h&&90>=h?h+=32:!d&&69<=h&&105>=h?h-=48:d&&w.shifts.hasOwnProperty(h)&&(B=w.shifts[h]);""===B&&(B=String.fromCharCode(h));h=B;if(c.shiftKey&&h!==v.settings.decimalDelimiter)return!1;if(189==b&&1<=a(this).val().length){if(-1<
a(this).val().indexOf("-"))return!1;if(v.settings.prefix)if(-1<a(this).val().indexOf(v.settings.prefix)){if(1!==e())return!1}else{if(0!==e())return!1}else if(0!==e())return!1}return 0===a(this).val().length&&h===v.settings.decimalDelimiter||0<=a(this).val().indexOf(h)&&h===v.settings.decimalDelimiter?!1:57>=b&&48<=b||105>=b&&96<=b||189==b||h===v.settings.decimalDelimiter?!0:!1}});v.on("keyup",function(c){v.settings.readonly||v.settings.maxlength&&(c=v.val(),a.sbtools.isBlank(c)||(v.settings.prefix&&
(c=c.replace(v.settings.prefix,"")),v.settings.suffix&&(c=c.replace(v.settings.suffix,"")),m(c)&&v.setValue(v.lastValue)))});v.on("blur",function(){if(!v.settings.readonly){var c=a(this).val();a.sbtools.isBlank(c)||((v.settings.min||0===v.settings.min)&&Number(c)<Number(v.settings.min)&&(c=v.settings.min),(v.settings.max||0===v.settings.max)&&Number(c)>Number(v.settings.max)&&(c=v.settings.max),c=y(c),a(this).val(c))}});if(a.isFunction(v.settings.onChange))v.on("change",function(){v.settings.onChange.apply(v,
[v.getValue()])})}function m(c){return v.settings.maxlength&&a.trim(c).length>v.settings.maxlength?!0:!1}function y(a){var b="",b=v.settings.prefix||v.settings.suffix?accounting.formatMoney(a,v.settings.prefix?v.settings.prefix:"",v.settings.precision,v.settings.groupDelimiter,v.settings.decimalDelimiter,"%s%v"+(v.settings.suffix?v.settings.suffix:"")):accounting.formatNumber(a,v.settings.precision,v.settings.groupDelimiter,v.settings.decimalDelimiter);return v.settings.autoCompletePrecision?b:t(b)}
function t(c){if(""==c||null===c||void 0===c||0>=a.trim(c).length||""==v.settings.precision||0==v.settings.precision)return c;var b=c.indexOf(v.settings.decimalDelimiter);if(0>b)return c;var h=c.length;v.settings.suffix&&(h=c.indexOf(v.settings.suffix));h=c.substring(b+1,h);if(0>h.indexOf("0"))return c;var d=parseFloat("0."+h),h="";0!=d&&(h=(d+"").substring((d+"").indexOf(".")+1),h=v.settings.decimalDelimiter+h);b=c.substring(0,b);d="";v.settings.suffix&&(d=c.substring(c.indexOf(v.settings.suffix)));
return b+h+d}function D(a){a=accounting.unformat(a,v.settings.decimalDelimiter);return v.settings.precision&&v.settings.autoCompletePrecision?a.toFixed(v.settings.precision):a}function e(){var a=v[0],b=-1;a.selectionStart?b=a.selectionStart:(b=document.selection.createRange(),b.moveStart("character",-a.value.length),b=b.text.length);return b}var v=this,C;if(v.data("$sbnumbertext"))if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();C=a.extend({},q().settings,b||{})}else return q();else C=
a.extend({},k,b||{});v.settings=C;a.sbbase.mixinWidget(v);v.getValue=function(){var c=v.val();return a.sbtools.isBlank(c)||c===v.settings.placeholder?"":a.trim(D(c))};v.setValue=function(a){n(a,function(){z()});return v};v.setState=function(c){a.each(c,function(c,b){void 0!==b&&null!==b?"value"==c?v.setValue(b):"required"==c?(v.settings.required=b,v.attr("required",b)):"readonly"==c?(v.settings.readonly=b,v.attr("readonly",b),a.sbtools.toggleInputReadonlyClass(v,b)):"disabled"==c?(v.settings.disabled=
b,v.attr("disabled",b),a.sbtools.toggleInputDisabledClass(v,b)):v.attr(c,b):v.removeAttr(c)});return v};v.getDefaultOptions=function(){return k};v.reload=function(){a.sbtools.initController.removeInitCompleteFlag(v,"$sbnumbertext");return f()};v.validate=function(){if(a.isFunction(C.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var c=v.getValue()+"",b=!1;return C.required&&(b=a.sbvalidator.required(v[0],c),!b)?a.sbvalidator.TEXT_REQUIRED:C.minlength&&(b=a.sbvalidator.minlength(v[0],
c,C.minlength),!b)?a.sbvalidator.minLengthPromptMessage(C.minlength):C.maxlength&&(b=a.sbvalidator.maxlength(v[0],c,C.maxlength),!b)?a.sbvalidator.maxLengthPromptMessage(C.maxlength):C.regex&&a.sbtools.isNotBlank(c)&&(b=a.sbvalidator.valid(C.regex,c),!b)?a.sbvalidator.TEXT_REGEX:""};v.getName=function(){return v.attr("name")};var w={codes:{188:44,109:45,190:46,191:47,192:96,220:92,222:39,221:93,219:91,173:45,187:61,186:59,189:45,110:46},shifts:{96:"~",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",
56:"*",57:"(",48:")",45:"_",61:"+",91:"{",93:"}",92:"|",59:":",39:'"',44:"<",46:">",47:"?"}};return this.each(function(){f()})}})(jQuery);
(function(a){a.extend({sbparser:{}});a.extend(a.sbparser,{auto:!0,onComplete:function(a){},_pluginNamePrefix:"sb",parse:function(k){for(var b=this,q=0,r=a.sbbase.plugins.length;q<r;q++){var n=a.sbbase.plugins[q],z=a("."+a.sbbase.pluginClassPrefix+n,k);0>=z.length||a.each(z,function(){var k=a(this),f=k.attr("data-options");if(void 0!==f){var q=b._pluginNamePrefix+n;k[q]&&(a.sbtools.isBlank(f)&&(f="{}"),f=eval("("+f+")"),k[q].onBeforeParser&&(f=k[q].onBeforeParser(f)),k[q](f))}})}a.sbparser.onComplete.call(a.sbparser,
k)}});a(function(){a.sbparser.auto&&a.sbparser.parse()})})(jQuery);
(function(a){var k={className:"sinobest-password",required:!1,minlength:null,maxlength:null,disabled:!1,readonly:!1,regex:null,callback:null,value:null,onChange:null,onInitComplete:null,setValueTriggerChange:!0};a.fn.sbpassword=function(b){function q(){return f.data("$sbpassword")}function r(a,b){f.val(a);f.settings.value=a;b&&b()}function n(){a.isFunction(f.settings.onChange)&&f.settings.setValueTriggerChange&&f.trigger("change")}function z(){a.sbtools.initController.initComplete(f,"$sbpassword",
function(){f.data("$sbpassword")||f.data("$sbpassword",f)},f.settings.onInitComplete)}function l(){f.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);f.addClass(f.settings.className);f.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);f.attr("required",f.settings.required);f.attr("readonly",f.settings.readonly);a.sbtools.toggleInputReadonlyClass(f,f.settings.readonly);f.attr("disabled",f.settings.disabled);a.sbtools.toggleInputDisabledClass(f,f.settings.disabled);if(a.isFunction(f.settings.onChange))f.on("change",
function(){f.settings.onChange.apply(f,[f.getValue()])});a.sbtools.registerBaseEvent(f,f.settings);void 0!==f.settings.value&&null!==f.settings.value?r(f.settings.value,function(){z();n()}):z();f.data("$sbpassword",f);return f}var f=this,u;if(f.data("$sbpassword"))if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();u=a.extend({},q().settings,b||{})}else return q();else u=a.extend({},k,b||{});f.settings=u;a.sbbase.mixinWidget(f);f.getValue=function(){return a.trim(f.val())};f.setValue=
function(a){r(a,function(){n()});return f};f.setState=function(b){a.each(b,function(b,k){void 0!==k&&null!==k?"value"==b?f.setValue(k):("required"==b?f.settings.required=k:"readonly"==b?(f.settings.readonly=k,a.sbtools.toggleInputReadonlyClass(f,k)):"disabled"==b&&(f.settings.disabled=k,a.sbtools.toggleInputDisabledClass(f,k)),f.attr(b,k)):f.removeAttr(b)});return f};f.getDefaultOptions=function(){return k};f.reload=function(){a.sbtools.initController.removeInitCompleteFlag(f,"$sbpassword");return l()};
f.validate=function(){if(a.isFunction(u.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var b=f.getValue(),k=!1;return u.required&&(k=a.sbvalidator.required(f[0],b),!k)?a.sbvalidator.TEXT_REQUIRED:u.minlength&&(k=a.sbvalidator.minlength(f[0],b,u.minlength),!k)?a.sbvalidator.minLengthPromptMessage(u.minlength):u.maxlength&&(k=a.sbvalidator.maxlength(f[0],b,u.maxlength),!k)?a.sbvalidator.maxLengthPromptMessage(u.maxlength):u.regex&&a.sbtools.isNotBlank(b)&&(k=a.sbvalidator.valid(u.regex,
b),!k)?a.sbvalidator.TEXT_REGEX:""};f.getName=function(){return f.attr("name")};return this.each(function(){l()})}})(jQuery);
(function(a){var k={id:null,name:null,value:null,mode:"popupList",colModel:null,valueField:"code",labelField:"detail",url:null,queryUrl:null,pageSize:20,searchField:["detail"],selectContainerWidth:null,selectContainerHeight:null,selectListWidth:null,selectListHeight:null,otherRequestParam:null,type:"multiple",style:null,className:"sinobest-personselect",required:!1,readonly:!1,disabled:!1,callback:null,onItemAdd:null,onItemRemove:null,onConfirm:null,maxShowGroupSize:7,delimiter:null,onAjaxRequest:null,
onAjaxResponse:null,pageConfig:{pageField:"page",pageSizeField:"pageSize",queryField:"query",totalCountField:"totalCount",pageCountField:"pageCount",searchField:"searchField",sortField:"sortField",sortOrderField:"sortOrder",dataField:"data",orgField:"org",divisionField:"division"},saveType:"c",transUrl:null,onTranslateRequest:null,onTranslateResponse:null,translateCallback:null,paramFieldConfig:{orgIdField:"id",orgPidField:"pId",orgNameField:"name",orgDataField:"orgData",divisionDataField:"divisionData",
divisionCodeField:"code",divisionDetailField:"detail"},onChange:null,onInitComplete:null,enableQuery:!0,enableDivision:!0,setValueTriggerChange:!0};a.fn.sbpersonselect=function(b){function q(){return e.data("$sbpersonselect")}function r(){e.data("$sbpersonselect",e)}function n(b,c){var f=a.sbtools.convertSetValue(b);a.isArray(f)||a.sbtools.isBlank(f)?z(f,c,b):a.sbbase.translateController.translate(e,{value:f},function(a){z(a,c,b)})}function z(b,c,f){e.control.setValue(b);e.settings.value=f;c&&a.isFunction(c)&&
c()}function l(){if(a.isFunction(e.settings.onChange)&&e.settings.setValueTriggerChange){var b=e.getSelectItems();m("onChange",[b,"add",b])}}function f(){a.sbtools.initController.initComplete(e,"$sbpersonselect",function(){e.data("$sbpersonselect")||r()},e.settings.onInitComplete)}function u(){e.addClass(e.settings.className);e.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);null===e.settings.id&&(e.settings.id=e.attr("id")+"_personselect");e.control=null;if("popupList"==e.settings.mode)e.control=new v;
else if("groupList"==e.settings.mode)e.control=new C;else throw Error("mode="+e.settings.mode+" does not support");e.control.render();r();return e}function m(a,c){if("function"==typeof e.settings[a]){var b=e.settings[a].apply(e,c);return void 0===b?!0:b}return!0}function y(){e._$container.fadeOut("fast");a("html").unbind("mousedown",t)}function t(b){b.target.id==e._$labelControl.attr("id")||a(b.target).hasClass("sinobest-perselect-group-container")||0<a(b.target).parents("div.sinobest-perselect-group-container").length||
y()}var D,e=this;if(e.data("$sbpersonselect")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();D=a.extend({},q().settings,b||{});q().settings=D;q().reload()}return q()}D=a.extend(!0,{},k,b||{});e.settings=D;a.sbbase.mixinWidget(e);e.getValue=function(){return e.control.getValue()};e.getLabel=function(){return e.control.getLabel()};e.setValue=function(a){n(a,function(){l()})};e.setState=function(b){a.each(b,function(c,b){void 0!==b&&null!==b?"value"==c?e.setValue(b):"required"==c?
(e.settings.required=b,e.control.getLabelControl().attr("required",b)):"disabled"==c?(e.settings.disabled=b,e.control.getLabelControl().attr("disabled",b),a.sbtools.toggleInputDisabledClass(e.control.getLabelControl(),b)):"readonly"==c?(e.settings.readonly=b,a.sbtools.toggleInputReadonlyClass(e.control.getLabelControl(),b)):e.attr(c,b):e.removeAttr(c)});return e};e.getDefaultOptions=function(){return k};e.reload=function(){e.control.removeContainer();e.empty();a.sbtools.initController.removeInitCompleteFlag(e,
"$sbpersonselect");u()};e.load=function(b,c){a.sbtools.isInPseudoProtocolBlackList(b,!0);a.sbtools.isInPseudoProtocolBlackList(c,!0);var f=a.sbtools.isNonNull(b),h=a.sbtools.isNonNull(c);if(f||h)f&&(e.settings.url=b),h&&(e.settings.queryUrl=c),e.reload();else throw Error("Please set the correct data source");};e.destroy=function(){e.control.removeContainer();e.remove()};e.validate=function(){return a.isFunction(e.settings.callback)?this.settings.callback.apply(this,[this.settings,this.getValue()]):
D.required&&!a.sbvalidator.required(e.control.getLabelControl()[0],e.getValue())?a.sbvalidator.TEXT_REQUIRED:""};e.getName=function(){return e.settings.name};e.getSelectItems=function(){return e.control.getSelectItems()};var v=function(){};v.prototype={render:function(){this._renderLabelArea();this._renderSelectContainerArea();this._renderSimpleSingle();this._buildPersonSelect()},removeContainer:function(){e._$container.remove()},getValue:function(){var b=e._$selectControl.getValue();return e.settings.delimiter&&
a.isArray(b)?b.join(e.settings.delimiter):b},getLabel:function(){var b=e._$selectControl.getLabel();return e.settings.delimiter&&a.isArray(b)?b.join(e.settings.delimiter):b},setValue:function(a){e._$labelControl.setValue(a);e._$selectControl.setValue(a)},getLabelControl:function(){return e._$labelControl},getSelectItems:function(){return e._$selectControl.getSelectItems()},_renderLabelArea:function(){var b=a('<input type="text" readonly></input>');b.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);
e.settings.id&&b.attr("id",e.settings.id);e.settings.name&&b.attr("name",e.settings.name);e.settings.style&&b.attr("style",e.settings.style);b.attr("disabled",e.settings.disabled);a.sbtools.toggleInputDisabledClass(b,e.settings.disabled);a.sbtools.toggleInputReadonlyClass(b,e.settings.readonly);e.append(b);e._$labelControl=b},_renderSelectContainerArea:function(){var b=a('<div class="sinobest-perselect-container sinob-widget-container"></div>');a.sbpopuplayer.registerPopup(b);b.append(this._renderOrgAndDivisionArea());
b.append(this._renderSelectArea());b.append(this._renderBtnsArea());e.attr("id")?b.attr("id",e.attr("id")+"_personselect_container"):e.settings.id&&b.attr("id",e.settings.id+"_personselect_container");a(document.body).append(b);e._$container=b},_renderOrgAndDivisionArea:function(){var b=a('<div class="sinobest-perselect-org-division"></div>'),c=this._renderOrgArea();b.append(c);var f=this._renderDivisionArea();b.append(f);e.settings.enableDivision||(f.hide(),c.addClass("sinobest-perselect-only-org"));
return b},_renderOrgArea:function(){var b=a('<div class="sinobest-perselect-org"></div>'),c=a('<div class="ztree"></div>');b.append(c);e._$orgControl=c;return b},_renderDivisionArea:function(){var b=a('<div class="sinobest-perselect-division"></div>'),c=a('<table class="sinobest-perselect-division-table"></table>');b.append(c);e._$divisionControl=c;return b},_renderSelectArea:function(){var b=a('<div class="sinobest-perselect-select-container"></div>');e._$selectControl=b.sblistbox({mode:"container",
url:e.settings.queryUrl,colModel:e.settings.colModel,valueField:e.settings.valueField,labelField:e.settings.labelField,searchField:e.settings.searchField,width:e.settings.selectContainerWidth,height:e.settings.selectContainerHeight,listWidth:e.settings.selectListWidth,listHeight:e.settings.selectListHeight,type:e.settings.type,otherRequestParam:e.settings.otherRequestParam,pageSize:e.settings.pageSize,onItemAdd:function(a){return m("onItemAdd",[a])},onItemRemove:function(a){return m("onItemRemove",
[a])},onConfirm:function(a){return m("onConfirm",[a])},pageConfig:e.settings.pageConfig,saveType:e.settings.saveType,enableQuery:e.settings.enableQuery,enableSimpleSingleModel:"single"===e.settings.type,setValueTriggerChange:e.settings.setValueTriggerChange});e._$selectControl.removeClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);return b},_renderBtnsArea:function(){var b=a('<div class="sinobest-perselect-btns"></div>'),c=a('<input type="button" value="确定" class="sinobest-button-common sinobest-perselect-btns-confirmbtn"></input>'),
f=a('<input type="button" value="关闭"   class="sinobest-button-common sinobest-perselect-btns-closebtn"></input>');b.append(c).append(f);e._btnsContainer=b;e._$confirmBtnControl=c;e._$closeBtnControl=f;return b},_renderSimpleSingle:function(){if("single"===e.settings.type){e._$container.addClass("sinobest-perselect-container-single");var b=a('<input type="button" value="清除"   class="sinobest-button-common sinobest-perselect-btns-clearbtn"></input>');e._btnsContainer.append(b);e._$clearBtnControl=b}},
_buildPersonSelect:function(){e._$container.isFillDynamicDatas=!1;this._buildLabel();this._buildOrgAndDivision();this._buildSelect();this._buildBtns();this._buildSimpleSingle();this._fillDatas()},_buildLabel:function(){var b=this;e._$labelControl.bind("click",function(){e.settings.readonly||e._$container.is(":visible")||(e._$container.isFillDynamicDatas||(b._fillDynamicDatas(),e._$container.isFillDynamicDatas=!0),a.sbpopuplayer.popup(e._$container))});e._$labelControl.setValue=function(a){if(void 0!==
a&&0<a.length){var b="";if("single"==e.settings.type)b+=a[0][e.settings.labelField];else for(var h=0,d=a.length;h<d;h++)b+=a[h][e.settings.labelField],h!=a.length-1&&(b+=";");this.val(b);this.attr("title",b)}else this.val(""),this.attr("title","")}},_buildOrgAndDivision:function(){this._buildOrg();this._buildDivision()},_buildOrg:function(){e._$orgControl.addSelectListener=function(a){this.selectListener=a};e._$orgControl.onSelect=function(a){if(null!==this.selectListener&&void 0!==this.selectListener)this.selectListener.onOrgSelect(a)};
e._$orgControl.init=function(b){b=a.fn.zTree.init(e._$orgControl,{data:{simpleData:{enable:!0,idKey:e.settings.paramFieldConfig.orgIdField,pIdKey:e.settings.paramFieldConfig.orgPidField},key:{name:e.settings.paramFieldConfig.orgNameField}},callback:{onClick:function(a,c,b){a=[];a.push(b[e.settings.paramFieldConfig.orgIdField]);e._$orgControl.onSelect(a)}}},b);var c=b.getNodes();if(void 0!==c&&null!==c)for(var f=0,h=c.length;f<h;f++)b.expandNode(c[f],!0,!1,!0,!0)}},_buildDivision:function(){e._$divisionControl.addSelectListener=
function(a){this.selectListener=a};e._$divisionControl.onSelect=function(a){if(null!==this.selectListener&&void 0!==this.selectListener)this.selectListener.onDivisionSelect(a)};e._$divisionControl.init=function(b){if(null!==b&&void 0!==b){for(var c=a(),f=0,h=b.length;f<h;f++){var d=b[f];0==f%3&&(c=a("<tr></tr>"),e._$divisionControl.append(c));var B=a("<td></td>"),k=a('<input type="checkbox"></input>');k.val(d[e.settings.paramFieldConfig.divisionCodeField]);B.append(k).append(d[e.settings.paramFieldConfig.divisionDetailField]);
c.append(B)}e._$divisionControl.find("input:checkbox").bind("click",function(){var c=[];e._$divisionControl.find("input:checkbox").each(function(){a(this).is(":checked")&&c.push(a(this).attr("value"))});e._$divisionControl.onSelect(c)})}}},_buildSelect:function(){var a=this;e._$selectControl.onOrgSelect=function(c){e._$selectControl.orgs=c;a._loadSelectControlData()};e._$orgControl.addSelectListener(e._$selectControl);e._$selectControl.onDivisionSelect=function(c){e._$selectControl.divisions=c;a._loadSelectControlData()};
e._$divisionControl.addSelectListener(e._$selectControl);e._$selectControl.getOrgs=function(){return"undefined"==typeof e._$selectControl.orgs||null==e._$selectControl.orgs?"":e._$selectControl.orgs.join(";")};e._$selectControl.getDivisions=function(){return"undefined"==typeof e._$selectControl.divisions||null==e._$selectControl.divisions?"":e._$selectControl.divisions.join(";")}},_loadSelectControlData:function(){var a={};a[e.settings.pageConfig.orgField]=e._$selectControl.getOrgs();a[e.settings.pageConfig.divisionField]=
e._$selectControl.getDivisions();e._$selectControl.loadData(a)},_buildBtns:function(){e._$confirmBtnControl.bind("click",function(){var b=e._$selectControl.getSelectedPageItems();if(m("onConfirm",[b])){var c=e.getValue();e._$labelControl.setValue(b);e._$selectControl.setValue(b);a.sbpopuplayer.hide(e._$container);c.toString()!=e.getValue().toString()&&(b=e._$selectControl.getSelectItems(),m("onChange",[b,"add",b]))}});e._$closeBtnControl.bind("click",function(){a.sbpopuplayer.hide(e._$container)})},
_buildSimpleSingle:function(){"single"===e.settings.type&&e._$clearBtnControl.bind("click",function(){var b=e._$selectControl.getSelectedPageItems();void 0===b||0>=b.length||!m("onItemRemove",[b])||(m("onChange",[b,"remove",b]),e._$labelControl.setValue([]),e._$selectControl.setValue([]),a.sbpopuplayer.hide(e._$container))})},_fillDatas:function(){void 0!==e.settings.value&&null!==e.settings.value?n(e.settings.value,function(){f();l()}):f();e._$container.isFillDynamicDatas&&this._fillDynamicDatas()},
_fillDynamicDatas:function(){1!=e.settings.readonly&&1!=e.settings.disabled&&(this._fillOrgAndDivisionData(),this._loadSelectControlData())},_fillOrgAndDivisionData:function(){var b={};a.extend(b,e.settings.otherRequestParam||{});e.settings.onAjaxRequest&&a.isFunction(e.settings.onAjaxRequest)&&(b=e.settings.onAjaxRequest(b));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(b),url:e.settings.url,success:function(c){if(e.settings.onAjaxResponse&&
a.isFunction(e.settings.onAjaxResponse))e.settings.onAjaxResponse(c);e._$orgControl.init(c[e.settings.paramFieldConfig.orgDataField]);e._$divisionControl.init(c[e.settings.paramFieldConfig.divisionDataField])},error:function(c,b,h){b={};b.code=c.status;b.msg=a.sberror.format(b.code,this.url);a.sberror.onError(b)}})}};var C=function(){};C.prototype={render:function(){this._renderLabelArea();this._renderSelectContainerArea();this._buildPersonSelect()},removeContainer:function(){e._$container.remove()},
getValue:function(){return this._getSelectedValues(e.settings.saveType)},_getSelectedValues:function(a){var c=e._$groupSelectControl.getValue(),b=[];if("c"==a){a=0;for(var h=c.length;a<h;a++)b.push(c[a][e.settings.valueField])}else for(a=0,h=c.length;a<h;a++)b.push(c[a][e.settings.labelField]);return e.settings.delimiter?b.join(e.settings.delimiter):"single"==e.settings.type?0<b.length?b[0]:"":b},getLabel:function(){return this._getSelectedValues("d")},setValue:function(a){e._$labelControl.setValue(a);
e._$groupSelectControl.clearSelectedItems();e._$groupSelectControl.setItemsSelected(a);e._$groupSelectControl.setValue(a)},getLabelControl:function(){return e._$labelControl},getSelectItems:function(){return e._$groupSelectControl.getValue()},_renderLabelArea:function(){var b=a('<input type="text" readonly></input>');b.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);e.settings.id&&b.attr("id",e.settings.id);e.settings.name&&b.attr("name",e.settings.name);e.settings.style&&b.attr("style",e.settings.style);
b.attr("disabled",e.settings.disabled);a.sbtools.toggleInputDisabledClass(b,e.settings.disabled);a.sbtools.toggleInputReadonlyClass(b,e.settings.readonly);e.append(b);e._$labelControl=b},_renderSelectContainerArea:function(){var b=a('<div class="sinobest-perselect-group-container sinob-widget-container"></div>'),c=a('<div class="sinobest-perselect-group-btns"></div>'),f=a('<input type="button" value="确认" class="sinobest-button-common sinobest-perselect-group-btns-confirmbtn"></input>'),h=a('<input type="button" value="清除"    class="sinobest-button-common sinobest-perselect-group-btns-clearbtn"></input>');
c.append(f).append(h);var d=a('<div class="sinobest-perselect-group-select-container"></div>');b.append(d).append(c);e.attr("id")?b.attr("id",e.attr("id")+"_personselect_group_container"):e.settings.id&&b.attr("id",e.settings.id+"_personselect_group_container");a(document.body).append(b);e._$container=b;e._$clearBtnControl=h;e._$confirmBtnControl=f;e._$groupSelectControl=d},_buildPersonSelect:function(){e._$container.isFillDynamicDatas=!1;this._buildLabel();this._buildBtns();this._buildSelect();this._fillDatas()},
_buildLabel:function(){var b=this;e._$labelControl.bind("click",function(){e._$container.is(":visible")||e.settings.readonly||(e._$container.isFillDynamicDatas?b._adjustContainerLeft():(b._fillDynamicDatas(b._adjustContainerLeft),e._$container.isFillDynamicDatas=!0),a("html").bind("mousedown",t))});e._$labelControl.setValue=function(a){if(void 0!==a&&0<a.length){var b="";if("single"==e.settings.type)b+=a[0][e.settings.labelField];else for(var h=0,d=a.length;h<d;h++)b+=a[h][e.settings.labelField],
h!=a.length-1&&(b+=";");this.val(b);this.attr("title",b)}else this.val(""),this.attr("title","")}},_adjustContainerLeft:function(){a.sbtools.adjustInputPopupDropdownContainerPosition(e._$labelControl,e._$container)},_buildBtns:function(){e._$confirmBtnControl.bind("click",function(){var a=e._$groupSelectControl.getSelectItems();if(m("onConfirm",[a])){var c=e.getValue();e._$labelControl.setValue(a);e._$groupSelectControl.setValue(a);y();c.toString()!=e.getValue().toString()&&(a=e._$groupSelectControl.getValue(),
m("onChange",[a,"add",a]))}});e._$clearBtnControl.bind("click",function(){var a=e.getValue();e._$groupSelectControl.clearSelectedItems();var c=e._$groupSelectControl.getSelectItems();e._$labelControl.setValue(c);e._$groupSelectControl.setValue(c);a.toString()!=e.getValue().toString()&&(a=e._$groupSelectControl.getValue(),m("onChange",[a,"remove",a]))})},_buildSelect:function(){function b(c){var f=[];a.each(c,function(c,d){var b={};b[e.settings.valueField]=a(d).attr("data-key");b[e.settings.labelField]=
a(d).attr("data-value");var k=a(d).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY);if(void 0!==k&&null!==k)for(var m in k)b.hasOwnProperty(m)||(b[m]=k[m]);f.push(b)});return f}e._$groupSelectControl.init=function(a){this.empty();this.addGroup(a.data);this.setItemsSelected(this.getValue())};e._$groupSelectControl.addGroup=function(c){if(void 0!==c)for(var b=0,h=c.length;b<h&&!(b>=e.settings.maxShowGroupSize);b++){var d=c[b],f=a('<div class="sinobest-perselect-group"></div>');b!=h-1&&b!=e.settings.maxShowGroupSize-
1||f.addClass("sinobest-perselect-group-last");var k=a('<div class="sinobest-perselect-group-header"></div>');k.attr("title",d.groupName);k.text(d.groupName);var m=a('<div class="sinobest-perselect-group-item-container"></div>');f.append(k).append(m);this.bindHeaderEvent(k);for(var k=0,l=d.data.length;k<l;k++){var n=d.data[k],t=a('<div class="sinobest-perselect-group-item"></div>');t.attr("data-key",n[e.settings.valueField]);t.attr("data-value",n[e.settings.labelField]);t.text(n[e.settings.labelField]);
t.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,n);this.bindItemEvent(t);m.append(t)}this.append(f)}};e._$groupSelectControl.bindHeaderEvent=function(c){var b=this;c.on("dblclick",function(){var c=a(this).closest(".sinobest-perselect-group").find(".sinobest-perselect-group-item-container").find(".sinobest-perselect-group-item");a(this).data("selected-header")?(a(this).removeData("selected-header"),c.each(function(c,h){b.toggleItemSelectedClass(a(this),!1)})):(a(this).data("selected-header",!0),b.canSelectMultipleItems(c.length)&&
c.each(function(c,h){b.toggleItemSelectedClass(a(this),!0)}))})};e._$groupSelectControl.bindItemEvent=function(c){var b=this;c.on("click",function(){a(this).hasClass("sinobest-perselect-group-item-selected")?b.toggleItemSelectedClass(a(this),!1):b.canSelectMultipleItems(1)&&b.toggleItemSelectedClass(a(this),!0)}).hover(function(){a(this).addClass("sinobest-perselect-group-item-hover")},function(){a(this).removeClass("sinobest-perselect-group-item-hover")})};e._$groupSelectControl.getSelectItems=function(){return b(this.find("div.sinobest-perselect-group-item-selected"))};
e._$groupSelectControl.clearSelectedItems=function(){var c=this;this.find("div.sinobest-perselect-group-item-selected").each(function(b,h){c.toggleItemSelectedClass(a(h),!1)})};e._$groupSelectControl.setItemsSelected=function(a){if(void 0!==a)for(var b=0,h=a.length;b<h;b++){var d=this.find('.sinobest-perselect-group-item[data-key="'+a[b][e.settings.valueField]+'"]');this.toggleItemSelectedClass(d,!0)}};e._$groupSelectControl.setValue=function(a){void 0===a?this.value=[]:"single"==e.settings.type?
0<a.length&&(this.value=a.slice(0,1)):this.value=a};e._$groupSelectControl.getValue=function(){return"undefined"==typeof this.value?[]:this.value};e._$groupSelectControl.canSelectMultipleItems=function(a){return"single"==e.settings.type&&(1<=this.getSelectItems().length||1<a)?(alert("最多只能选择一条记录"),!1):!0};e._$groupSelectControl.toggleItemSelectedClass=function(a,b){b?a.addClass("sinobest-perselect-group-item-selected"):a.removeClass("sinobest-perselect-group-item-selected")}},_fillDatas:function(){void 0!==
e.settings.value&&null!==e.settings.value?n(e.settings.value,function(){f();l()}):f();e._$container.isFillDynamicDatas&&this._fillDynamicDatas()},_fillDynamicDatas:function(b){var c={};a.extend(c,e.settings.otherRequestParam||{});e.settings.onAjaxRequest&&a.isFunction(e.settings.onAjaxRequest)&&(c=e.settings.onAjaxRequest(c));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c),url:e.settings.url,success:function(c){if(e.settings.onAjaxResponse&&
a.isFunction(e.settings.onAjaxResponse))e.settings.onAjaxResponse(c);e._$groupSelectControl.init(c);void 0!==b&&"function"===typeof b&&setTimeout(function(){b()},0)},error:function(c,b,d){b={};b.code=c.status;b.msg=a.sberror.format(b.code,this.url);a.sberror.onError(b)}})}};return this.each(function(){u()})}})(jQuery);
(function(a){a.extend({sbpopuplayer:{}});a.extend(a.sbpopuplayer,{registerPopup:function(a){a.addClass("sinobest-popuplayer-box")},popup:function(k){var b=a(document).width(),q=k.width(),r=a("<div class='sinobest-popuplayer-mask'></div>");r.appendTo("body").fadeIn(200);var n=this,z=a("<test></test>");k.parents().each(function(){if("relative"==a(this).css("position"))return z=a(this),!1});n._ie67PositionForZindexCompatibilityOnShow(k);n._ie6MarkSelectOnShow();var l=k.offset().top-z.offset().top;k.css({position:"absloute",
left:b/2-q/2,top:(0>l?0:l)+50}).animate({opacity:"show"},"slow",function(){n._setMaskLayerSize(r)});k.focus()},_ie67PositionForZindexCompatibilityOnShow:function(k){if(a.sbtools.isIE6OrIE7()){var b=a("<test></test>");k.parents().each(function(){var k=a(this).css("position");if("relative"==k||"absolute"==k||a.sbtools.isIE7()&&"fixed"==k)b=a(this)});if("test"!=b.get(0).tagName){var q=b.css("z-index");Number(q)<Number(k.css("z-index"))&&(b.data("originalZindex",q),b.css("z-index",k.css("z-index")),k.data("topRelativeParent",
b))}}},hide:function(k){a(".sinobest-popuplayer-mask").remove();this._ie67PositionForZindexCompatibilityOnHide(k);this._ie6MarkSelectOnHide();k.animate({left:0,top:0,opacity:"hide"},"slow")},_ie67PositionForZindexCompatibilityOnHide:function(k){a.sbtools.isIE6OrIE7()&&(k=k.data("topRelativeParent"))&&(k.css("z-index",k.data("originalZindex")),k.removeData("originalZindex"))},_ie6MarkSelectOnShow:function(){a.sbtools.isIE6()&&a("select:visible").attr("mark-select-hide","true").hide()},_ie6MarkSelectOnHide:function(){a.sbtools.isIE6()&&
a("select[mark-select-hide=true]").removeAttr("mark-select-hide").show()},_setMaskLayerSize:function(k){if(a.sbtools.isIE6()){var b=document.documentElement.clientHeight?document.documentElement:document.body;k.css({height:b.scrollHeight>b.clientHeight?b.scrollHeight:b.clientHeight,width:b.scrollWidth>b.clientWidth?b.scrollWidth:b.clientWidth})}}})})(jQuery);
(function(a){var k={className:"sinobest-radio",required:!1,disabled:!1,readonly:!1,name:null,direction:"line",columnCount:null,data:null,url:null,valueField:"code",labelField:"detail",callback:null,value:null,onAjaxRequest:null,onAjaxResponse:null,saveType:"c",onChange:null,mode:"btntext",onInitComplete:null,setValueTriggerChange:!0};a.fn.sbradio=function(b){function q(c,b){if(!h.settings.data)return h.data("$temp",c),h;var d=h.find(":radio");n()&&(d.filter(":checked").next().removeClass("sinobest-radio-text-selected"),
d.filter(":checked").next().removeClass("sinobest-radio-text-disabled-selected"),d.filter(":checked").next().removeClass("sinobest-radio-text-readonly-selected"));d.filter(":checked").prop("checked",!1);c&&a.trim(c)&&("c"==h.settings.saveType?d.filter("[value="+c+"]").prop("checked",!0):h.find("label").each(function(b,d){if(a(d).text()==c)return a(d).prev("input[type='radio']").prop("checked",!0),!1}));n()&&(l(h.settings.disabled),u(h.settings.readonly));h.settings.value=c;b&&b()}function r(){if(a.isFunction(h.settings.onChange)&&
h.settings.setValueTriggerChange){var c=h.getSelectItems(),b=null;0<c.length?b=c[0]:(b={},b[h.settings.valueField]="",b[h.settings.labelField]="");e(b,"add")}}function n(){return"text"==h.settings.mode?!0:!1}function z(a){var c=h.find("input:radio");c.attr("disabled",a);n()&&(a?c.next().addClass("sinobest-radio-text-disabled"):c.next().removeClass("sinobest-radio-text-disabled"),l(a))}function l(a){if(n()){var c=h.find(":radio");a?(c.filter(":checked").next().removeClass("sinobest-radio-text-selected"),
c.filter(":checked").next().addClass("sinobest-radio-text-disabled-selected")):(c.filter(":checked").next().addClass("sinobest-radio-text-selected"),c.filter(":checked").next().removeClass("sinobest-radio-text-disabled-selected"))}}function f(a){if(!h.settings.disabled){var c=h.find("input:radio");c.attr("disabled",a);n()&&(a?c.next().addClass("sinobest-radio-text-readonly"):c.next().removeClass("sinobest-radio-text-readonly"),u(a))}}function u(a){if(n()&&!h.settings.disabled){var c=h.find(":radio");
a?(c.filter(":checked").next().removeClass("sinobest-radio-text-selected"),c.filter(":checked").next().addClass("sinobest-radio-text-readonly-selected")):(c.filter(":checked").next().addClass("sinobest-radio-text-selected"),c.filter(":checked").next().removeClass("sinobest-radio-text-readonly-selected"))}}function m(c){a.each(c,function(c,b){var d=h.settings.name+"_"+c,e=a('<input type="radio"/>');e.attr("name",h.settings.name);e.attr("id",d);var f=a("<label></label>");f.attr("for",d);a.each(b,function(c,
b){var d=!0;c==h.settings.valueField&&(e.val(b),d=!1);c==h.settings.labelField&&(f.text(b),d=!1);d&&(a.sbtools.isIE6OrIE7()?"status"!=c&&e.attr(c,b):e.attr(c,b))});e.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,b);d=a("<div></div>");d.append(e).append(f);h.append(d)});z(h.settings.disabled);f(h.settings.readonly);n()&&(c=h.find("input:radio"),c.next().addClass("sinobest-radio-text-label"),c.hide());y()}function y(){"table"==d.direction?w():"row"==d.direction?c():x();t();D();h.data("$temp")&&(h.settings.value=
h.data("$temp"),h.removeData("$temp"));void 0!==h.settings.value&&null!==h.settings.value?q(h.settings.value,function(){v();r()}):v()}function t(){if(n()){var a=h.find("table");a.attr("cellpadding",0);a.attr("cellspacing",0);a.attr("border",0)}}function D(){var c=h.find("input:radio");n()?(c.next().bind("click",function(){if(!h.settings.readonly&&!h.settings.disabled){var b=a(this).prev();a(this).hasClass("sinobest-radio-text-selected")?(a(this).removeClass("sinobest-radio-text-selected"),b.prop("checked",
!1)):(c.next().removeClass("sinobest-radio-text-selected"),c.attr("checked",!1),a(this).addClass("sinobest-radio-text-selected"),b.prop("checked",!0));if(h.settings.onChange){var d={};d[h.settings.valueField]=a(this).prev().attr("value");d[h.settings.labelField]=a(this).text();b.is(":checked")?e(d,"add"):e(d,"remove")}return!1}}),a.sbtools.registerBaseEvent(c.next(),h.settings,function(){return h.settings.readonly||h.settings.disabled?!1:!0})):(h.settings.onChange&&c.bind("change",function(){var c=
{};c[h.settings.valueField]=a(this).attr("value");c[h.settings.labelField]=a(this).next("label").text();e(c,"add")}),c.bind("dblclick",function(){if(a(this).get(0).checked&&(a(this).attr("checked",!1),h.settings.onChange)){var c={};c[h.settings.valueField]=a(this).attr("value");c[h.settings.labelField]=a(this).next("label").text();e(c,"remove")}}),a.sbtools.registerBaseEvent(c,h.settings))}function e(a,c){h.settings.onChange&&h.settings.onChange.apply(h,[a,c])}function v(){a.sbtools.initController.initComplete(h,
"$sbradio",function(){h.data("$radio")||h.data("$radio",h)},h.settings.onInitComplete)}function C(){h.addClass(d.className);h.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);h.attr("required",d.required);if(h.settings.url){var c={};h.settings.onAjaxRequest&&a.isFunction(h.settings.onAjaxRequest)&&(c=h.settings.onAjaxRequest(c));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(c),url:h.settings.url,success:function(c){if(h.settings.onAjaxResponse&&
a.isFunction(h.settings.onAjaxResponse))h.settings.onAjaxResponse(c);h.settings.data=c;h.html("");m(h.settings.data)},error:function(c,b,d){b={};b.code=c.status;b.msg=a.sberror.format(b.code,this.url);a.sberror.onError(b)}})}else h.settings.data||(h.settings.data=[]),h.html(""),m(h.settings.data);h.data("$radio",h)}function w(){var c=h.find(":radio").parent("div");if(!(0<c.parent("td").length)){c.wrapAll("<table><tbody></tbody></table>");var b=null;c.each(function(c){b=0===c%d.columnCount?a(this).wrap("<tr><td></td></tr>"):
a(this).insertAfter(b.parent("td")).wrap("<td></td>")})}}function c(){var a=h.find(":radio").parent("div");0<a.parent("td").length||a.wrapAll("<table><tbody></tbody></table>").wrap("<tr><td></td></tr>")}function x(){var a=h.find(":radio").parent("div");0<a.parent("td").length||(n()?a.addClass("sinobest-radio-text-line-content"):a.addClass("sinobest-radio-line-content"),a.wrapAll("<table><tbody><tr><td></td></tr></tbody></table>"))}var h=this,d;if(h.data("$radio"))if(b){if(void 0===b.value||null===
b.value)b.value=h.data("$radio").getValue();d=a.extend({},h.data("$radio").settings,b||{})}else return h.data("$radio");else d=a.extend({},k,b||{});h.settings=d;a.sbbase.mixinWidget(h);h.getValue=function(){var a=h.find(":radio");if("c"==h.settings.saveType)return a.filter(":checked").val()||"";a=a.filter(":checked");return 0<a.length?a.next("label").text():""};h.getLabel=function(){return h.find(":radio").filter(":checked").next("label").text()};h.setValue=function(a){return q(a,function(){r()})};
h.getName=function(){return h.settings.name};h.setState=function(c){a.each(c,function(a,c){void 0!==c&&null!==c?"value"==a?h.setValue(c):"required"==a?(h.settings.required=c,h.attr(a,c)):"readonly"==a?(h.settings.readonly=c,f(c)):"disabled"==a?(h.settings.disabled=c,z(c)):h.attr(a,c):h.removeAttr(a)});return h};h.getDefaultOptions=function(){return k};h.reload=function(){a.sbtools.initController.removeInitCompleteFlag(h,"$sbradio");C()};h.load=function(c){if(a.sbtools.isNonNull(c))a.sbtools.isInPseudoProtocolBlackList(c,
!0),h.settings.data=null,h.settings.url=null,a.isArray(c)?h.settings.data=c:h.settings.url=c,h.reload();else throw Error("Please set the correct data source");};h.validate=function(){if(a.isFunction(d.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var c=h.getValue(),b=!1;return d.required&&(b=a.sbvalidator.required(h[0],c),!b)?a.sbvalidator.TEXT_REQUIRED:""};h.getSelectItems=function(){var c=[],b=h.find(":radio").filter(":checked");0<b.length&&c.push(b.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY));
return c};C();return this}})(jQuery);
(function(a){var k={id:null,name:null,height:"300px",width:"100%",value:null,mode:"simple",toolBarItems:null,uploadUrl:"",className:"sinobest-richtexteditor",required:!1,disabled:!1,readonly:!1,callback:null,setting:null,resizeType:"no",onInitComplete:null};a.fn.sbrichtexteditor=function(b){function q(){return m.data("$richtexteditor")}function r(){m.data("$richtexteditor",m)}function n(){a.sbtools.initController.initComplete(m,"$sbrichtexteditor",function(){m.data("$richtexteditor")||r()},m.settings.onInitComplete)}
function z(){m.addClass(m.settings.className);m.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);null===m.settings.id&&(m.settings.id=m.attr("id")+"_richtexteditor");var b=a("<textarea></textarea>");m.settings.id&&b.attr("id",m.settings.id);m.settings.name&&b.attr("name",m.settings.name);b.attr("required",m.settings.required);m.append(b);m._$textarea=b;l();r();return m}function l(){var b={uploadJson:m.settings.uploadUrl,allowFileManager:!1,width:m.settings.width,height:m.settings.height,resizeType:u(),
readonlyMode:m.settings.readonly||m.settings.disabled,afterCreate:function(){m.isCreatedEditor=!0;m._$editorContainer=a(this.container.get(0));f(m.settings.readonly);if(m.data("$tempReadonly")){var b=m.data("$tempReadonly");m.removeData("$tempReadonly");m._editor.readonly(b);f(b)}m.data("$tempDisabled")&&(b=m.data("$tempDisabled"),m.removeData("$tempDisabled"),m._editor.readonly(b));m.data("$tempSetValue")&&(m.settings.value=m.data("$tempSetValue"),m.removeData("$tempSetValue"));m.settings.value&&
m.setValue(m.settings.value);n()}},k=m.settings.toolBarItems?m.settings.toolBarItems:"simple"==m.settings.mode?"source undo redo | justifyleft justifycenter justifyright justifyfull insertorderedlist insertunorderedlist indent outdent clearhtml | formatblock fontname fontsize | forecolor hilitecolor bold italic underline strikethrough lineheight removeformat | image table anchor link unlink fullscreen jme".split(" "):null;null!==k&&0<k.length&&(b.items=k);""===m.settings.uploadUrl&&(b.allowImageUpload=
!1);b=a.extend({},m.settings.setting||{},b);b=KindEditor.create(a("#"+m.settings.id),b);m._editor=b}function f(b){a.sbtools.toggleRichEditorReadonlyClass(m._$editorContainer.find(".ke-edit"),b)}function u(){if("all"==m.settings.resizeType)return 2;if("height"==m.settings.resizeType)return 1;if("no"==m.settings.resizeType)return 0}var m=this,y;if(m.data("$richtexteditor")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();y=a.extend({},q().settings,b||{});q().settings=y;q().reload()}return q()}y=
a.extend({},k,b||{});m.settings=y;a.sbbase.mixinWidget(m);m.getValue=function(){return m._editor.isEmpty()?"":m._editor.html()};m.setValue=function(a){if(!m.isCreatedEditor)return m.data("$tempSetValue",a),m;m._editor.html(a);m.settings.value=a;return m};m.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?"value"==a?m.setValue(b):("required"==a?m.settings.required=b:"readonly"==a?(m.settings.readonly=b,m.isCreatedEditor?(m._editor.readonly(b),f(b)):m.data("$tempReadonly",b)):"disabled"==
a&&(m.settings.disabled=b,m.isCreatedEditor?m._editor.readonly(b):m.data("$tempDisabled",b)),m.attr(a,b)):m.removeAttr(a)});return m};m.getDefaultOptions=function(){return k};m.reload=function(){m.empty();m.isCreatedEditor=!1;m._editor.remove();a.sbtools.initController.removeInitCompleteFlag(m,"$sbrichtexteditor");return z()};m.validate=function(){if(a.isFunction(y.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);if(y.required){m._editor.isEmpty()?m._$textarea.val(""):
m._editor.sync();var b=!1,b=a.sbvalidator.required(m._$textarea[0],m.getValue());if(!b)return a.sbvalidator.TEXT_REQUIRED}return""};m.getName=function(){return m.settings.name};return this.each(function(){z()})}})(jQuery);
(function(a){var k={className:"sinobest-select",required:!1,readonly:!1,disabled:!1,allowEmptyOption:!0,name:null,id:null,valueField:"code",labelField:"detail",value:null,data:null,url:null,multiple:!1,size:null,onChange:null,callback:null,delimiter:null,onAjaxRequest:null,onAjaxResponse:null,saveType:"c",onInitComplete:null,setValueTriggerChange:!0};a.fn.sbselect=function(b){function q(b){var e=[];"c"==b?t.$control.find("option:selected").each(function(b,f){"undefined"!=typeof a(f).attr("value")&&
e.push(a(f).val())}):t.$control.find("option:selected").each(function(b,f){"undefined"!=typeof a(f).attr("value")&&e.push(a(f).text())});return t.settings.delimiter?e.join(t.settings.delimiter):t.settings.multiple?e:0<e.length?e[0]:""}function r(b,e){if(!t.settings.data)return t.data("$temp",b),t;t.$control.find("option:selected").each(function(b,c){a(c).attr("selected",!1)});if(null==b||void 0==b)b="";a.isArray(b)||(b=t.settings.delimiter?b.split(t.settings.delimiter):[b]);if("c"==t.settings.saveType)t.$control.val(b);
else for(var f=0,k=b.length;f<k;f++)t.$control.find("option").not(":selected").each(function(e,c){if(a(c).text()==b[f])return a(c).attr("selected",!0),!1});t.settings.disabled&&(t.settings.multiple||t.settings.size)&&(t.$control.find("option").not(":selected").removeClass("option-selected"),t.$control.find("option:selected").addClass("option-selected"));t.settings.value=b;e&&e();return t}function n(){a.isFunction(t.settings.onChange)&&t.settings.setValueTriggerChange&&t.$control.trigger("change")}
function z(){a.sbtools.initController.initComplete(t,"$sbselect",function(){t.data("$select")||t.data("$select",t)},t.settings.onInitComplete)}function l(){t.settings.multiple?(t.html("<select multiple></select>"),t.settings.size&&t.find("select").attr("size",t.settings.size)):t.html("<select></select>");t.$control=t.find("select");t.addClass(t.settings.className);t.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);t.settings.id&&t.$control.attr("id",t.settings.id);t.settings.name&&t.$control.attr("name",
t.settings.name);t.$control.attr("required",t.settings.required);t.$control.attr("disabled",t.settings.disabled);a.sbtools.toggleSelectDisabledClass(t.$control,t.settings.disabled);t.settings.disabled||f(t.settings.readonly);if(t.settings.url){var b={};t.settings.onAjaxRequest&&a.isFunction(t.settings.onAjaxRequest)&&(b=t.settings.onAjaxRequest(b));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(b),url:t.settings.url,success:function(b){if(t.settings.onAjaxResponse&&
a.isFunction(t.settings.onAjaxResponse))t.settings.onAjaxResponse(b);t.settings.data=b;t.$control.find("option").remove();u(t.settings.data)},error:function(b,f,k){f={};f.code=b.status;f.msg=a.sberror.format(f.code,this.url);a.sberror.onError(f)}})}else t.settings.data||(t.settings.data=[]),t.$control.find("option").remove(),u(t.settings.data);t.data("$select",t);return t}function f(b){a.sbtools.toggleSelectReadonlyClass(t.$control,b);a.sbtools.eventSimulationSelectReadonly(t,t.$control,b)}function u(b){if(t.settings.allowEmptyOption){var e=
a("<option></option>");e.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,"");t.$control.append(e)}a.each(b,function(b,e){var f=a("<option></option>");a.each(e,function(a,b){var h=!0;a==t.settings.valueField&&(f.val(b),h=!1);a==t.settings.labelField&&(f.text(b),h=!1);h&&f.attr(a,b)});f.data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY,e);t.$control.append(f)});m()}function m(){if(t.settings.onChange)t.$control.off("change").on("change",function(){var b=[];t.$control.find("option:selected").each(function(e,f){if(a.sbtools.isNotBlank(a(this).attr("value"))){var k=
{};k[t.settings.valueField]=a(this).attr("value");k[t.settings.labelField]=a(this).text();b.push(k)}});var e=null;0>=b.length?(e={},e[t.settings.valueField]="",e[t.settings.labelField]=""):e=t.settings.multiple?b:b[0];t.settings.onChange.apply(t,[e])});a.sbtools.registerBaseEvent(t.$control,t.settings,function(){return t.settings.readonly||t.settings.disabled?!1:!0});t.data("$temp")&&(t.settings.value=t.data("$temp"),t.removeData("$temp"));void 0!==t.settings.value&&null!==t.settings.value?r(t.settings.value,
function(){z();n()}):z()}var y,t=this;if(t.data("$select"))if(b){if(void 0===b.value||null===b.value)b.value=t.data("$select").getValue();y=a.extend({},t.data("$select").settings,b||{})}else return t.data("$select");else y=a.extend({},k,b||{});t.settings=y;a.sbbase.mixinWidget(t);t.getValue=function(){return q(t.settings.saveType)};t.getLabel=function(){return q("d")};t.setValue=function(a){r(a,function(){n()})};t.getName=function(){return t.$control.attr("name")};t.setState=function(b){a.each(b,
function(b,k){void 0!==k&&null!==k?"value"==b?t.setValue(k):"required"==b?(t.settings.required=k,t.$control.attr("required",t.settings.required)):"disabled"==b?(t.settings.disabled=k,t.$control.attr("disabled",t.settings.disabled),a.sbtools.toggleSelectDisabledClass(t.$control,k)):"readonly"==b?(t.settings.readonly=k,f(k)):t.attr(b,k):t.removeAttr(b)});return t};t.getDefaultOptions=function(){return k};t.reload=function(){a.sbtools.initController.removeInitCompleteFlag(t,"$sbselect");return l()};
t.load=function(b){if(a.sbtools.isNonNull(b))a.sbtools.isInPseudoProtocolBlackList(b,!0),t.settings.data=null,t.settings.url=null,a.isArray(b)?t.settings.data=b:t.settings.url=b,t.reload();else throw Error("Please set the correct data source");};t.validate=function(){if(a.isFunction(y.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var b=t.getValue(),e=!1;return y.required&&(e=a.sbvalidator.required(t.$control[0],b),!e)?a.sbvalidator.TEXT_REQUIRED:""};t.getSelectItems=
function(){var b=[];t.$control.find("option:selected").each(function(e,f){""!=a(f).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY)&&b.push(a(f).data(a.sbtools.CONSTANTS.DATA_SBITEM_KEY))});return b};return this.each(function(){l()})}})(jQuery);
(function(a){var k={activeIndex:0,disabled:!1,async:!0,tabPosition:"h",tabMaxWidth:null,tabWidthOverflow:"ellipsis",onSelect:null,onUnselect:null,className:"sinobest-tabs",style:null,tabs:null,subtabsConfig:null,onInitComplete:null};a.fn.sbtabs=function(b){function q(){return d.data("$sbtabs")}function r(c){var b=l(c);a(b).find(">li[tab-added=true]").each(function(b,d){var h=a(d).attr("aria-controls");c.find("#"+h).each(function(c,b){a(b).hasClass("ui-tabs-panel")&&a(b).remove()})});a(b).remove()}
function n(){a.sbtools.initController.initComplete(d,"$sbtabs",function(){d.data("$sbtabs")||d.data("$sbtabs",d)},d.settings.onInitComplete)}function z(){d.settings.style&&d.attr("style",d.settings.style);d.settings.className&&d.addClass(d.settings.className);d.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);if(!(null==d.settings.tabs||0>=d.settings.tabs.length)){for(var c=a("<ul>"),b=0;b<d.settings.tabs.length;b++){var h=d.settings.tabs[b];c.append(f(h));d.append(m(h));y(h)}d.prepend(c);d._$tabNav=
c}t();n();d.data("$sbtabs",d);return d}function l(a){return a?a._$tabNav:d._$tabNav}function f(c){var b=a("<li>").attr("tab-id",c.id);c.style&&b.attr("style",c.style);c.className&&b.addClass(c.className);c.addTab&&b.attr("tab-added","true");a.sbtools.isInPseudoProtocolBlackList(c.url,!0);var h=a('<a href="'+c.url+'"></a>').text(c.title);null!=d.settings.tabMaxWidth&&(h.css("width",d.settings.tabMaxWidth),"newline"==d.settings.tabWidthOverflow?h.addClass("ui-tabs-width-overflow-newline"):"ellipsis"==
d.settings.tabWidthOverflow&&(h.addClass("ui-tabs-width-overflow-ellipsis"),h.attr("title",c.title)));b.append(h);c.showCloseButton&&b.append(u(c));return b}function u(c){return a('<span class="ui-icon ui-icon-close" role="presentation"></span>').bind("click",function(){d.removeTab(c.id)})}function m(c){if("remote"==c.contentBuilder)return a();if("function"==c.contentBuilder){a("#"+c.id,d).remove();var b=c.content();return a("<div>").attr("id",c.id).html(b)}if(null==c.content)return a();a("#"+c.id,
d).remove();return a("<div>").attr("id",c.id).html(c.content)}function y(c){if(null!=c.subTabsConfig){var b=a("#"+c.id).find(" .sinobest-tabs-sub").sbtabs(c.subTabsConfig);b&&b.removeClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);"undefined"==typeof d.subTabsList&&(d.subTabsList=[]);d.subTabsList.push({id:c.id,subTabs:b})}}function t(){d.tabs({active:d.settings.activeIndex,disabled:d.settings.disabled,beforeLoad:function(a,c){c.ajaxSettings.async=d.settings.async},load:function(a,b){c();x()},activate:function(b,
h){e(h.newPanel)||(c(),x());if("function"==typeof d.settings.onUnselect)d.settings.onUnselect(d.getTab(a(h.oldTab).attr("tab-id")));if("function"==typeof d.settings.onSelect)d.settings.onSelect(d.getTab(a(h.newTab).attr("tab-id")))},create:function(c,b){if("function"==typeof d.settings.onSelect)d.settings.onSelect(d.getTab(a(b.tab).attr("tab-id")))}});"v"==d.settings.tabPosition&&(d.tabs().addClass("ui-tabs-vertical ui-helper-clearfix"),l().children("li").removeClass("ui-corner-top").addClass("ui-corner-left"),
l().addClass("ui-tabs-vertical-nav"),v(),h()&&d.tabs().addClass("ui-tabs-sub-vertical"));C();w();e(D())||(c(),x())}function D(){var a=d.getActiveTab();return d.find("#"+a.ariaControls)}function e(a){return"polite"==a.attr("aria-live")?!0:!1}function v(){d.find(" > div.ui-tabs-panel").addClass("ui-tabs-vertical-panel")}function C(){if("h"==d.settings.tabPosition&&null!=d.settings.tabMaxWidth&&"newline"==d.settings.tabWidthOverflow){var c=h(),b=d.is(":hidden");c&&b&&d.parent().show();for(var e=0,f=
l().children("li"),k=0;k<f.length;k++){var m=a(f[k]).find(" > a.ui-tabs-anchor"),n=a(m).attr("tab-anchor-initheight");null==n&&(n=a(m).height(),a(m).attr("tab-anchor-initheight",n));e=Math.max(e,n)}a.each(f,function(c,b){a(b).find(" > a.ui-tabs-anchor").height(e)});c&&b&&d.parent().hide()}}function w(){if(null!=d.settings.tabMaxWidth){var c=h(),b=d.is(":hidden");c&&b&&d.parent().show();for(var e=0,f=l().children("li"),k=0;k<f.length;k++){var m=f[k],n=a(m).attr("tab-initwidth");null==n&&(n=a(m).width(),
a(m).attr("tab-initwidth",n));e=Math.max(e,n)}a.each(f,function(c,b){a(b).width(e)});c&&b&&d.parent().hide()}}function c(){if("v"==d.settings.tabPosition){var a=D(),c=a.height(),b=l().height();b>c&&a.height(b)}}function x(){"v"==d.settings.tabPosition&&D().css("margin-left",l().outerWidth())}function h(){return d.hasClass("sinobest-tabs-sub")}var d=this;if(d.data("$sbtabs"))return b&&(b=a.extend({},q().settings,b||{}),q().settings=b,q().reload()),q();b=a.extend({},k,b||{});d.settings=b;a.sbbase.mixinWidget(d,
{isAddValueMethod:!1});d.setState=function(c){a.each(c,function(a,c){d.attr(a,c)});return d};d.getDefaultOptions=function(){return k};d.reload=function(){r(d);if(d.subTabsList)for(var c=0;c<d.subTabsList.length;c++){var b=d.subTabsList[c];r(b.subTabs);b.subTabs.tabs("destroy");b.subTabs.removeData("$sbtabs")}delete d.subTabsList;d.tabs("destroy");a.sbtools.initController.removeInitCompleteFlag(d,"$sbtabs");z()};d.disable=function(a){null==a||void 0==a?d.tabs("disable"):d.tabs("disable",a)};d.enable=
function(a){null==a||void 0==a?d.tabs("enable"):d.tabs("enable",a)};d.getTab=function(c){var b={},h=d.tabs("instance");h&&h.tabs.each(function(h,e){var f=a(e);if(f.attr("tab-id")==c)return b.index=h,b.id=c,b.ariaControls=a(f).attr("aria-controls"),b.subTabs=d._getSubTabsByTabId(c),!1});return b};d._getSubTabsByTabId=function(a){if("undefined"==typeof d.subTabsList)return null;for(var c=0;c<d.subTabsList.length;c++){var b=d.subTabsList[c];if(b.id==a)return b.subTabs}return null};d.getActiveTab=function(){var a=
d.tabs("instance");return a&&a.active?(a=a.active.attr("tab-id"),d.getTab(a)):{}};d.addTab=function(a){a.addTab=!0;l().append(f(a));d.append(m(a));d.append(y(a));d.tabs("refresh");"v"==d.settings.tabPosition&&v();C();w();c();x()};d.removeTab=function(c){c=l().find(">li[tab-id="+c+"]");var b=a(c).remove().attr("aria-controls");a(c).attr("tab-added")?a("#"+b).remove():a("#"+b).hide();d.tabs("refresh");C();w();x()};d.activeTab=function(a){d.tabs("option","active",a)};return this.each(function(){z()})}})(jQuery);
(function(a){var k={className:"sinobest-text",required:!1,minlength:null,maxlength:null,placeholder:null,disabled:!1,readonly:!1,regex:null,callback:null,value:null,onChange:null,onInitComplete:null,setValueTriggerChange:!0};a.fn.sbtext=function(b){function q(a,b){l.val(a);l.settings.value=a;b&&b()}function r(){a.isFunction(l.settings.onChange)&&l.settings.setValueTriggerChange&&l.trigger("change")}function n(){a.sbtools.initController.initComplete(l,"$sbinput",function(){l.data("$input")||l.data("$input",
l)},l.settings.onInitComplete)}function z(){l.addClass(a.sbtools.CONSTANTS.UICLASS.TEXT_COMMON);l.addClass(l.settings.className);l.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);l.attr("required",l.settings.required);void 0!==l.settings.placeholder&&null!==l.settings.placeholder&&(l.attr("placeholder",l.settings.placeholder),a.sbtools.isPlaceHolderSupported()||l.placeholder());l.attr("readonly",l.settings.readonly);a.sbtools.toggleInputReadonlyClass(l,l.settings.readonly);l.attr("disabled",l.settings.disabled);
a.sbtools.toggleInputDisabledClass(l,l.settings.disabled);if(a.isFunction(l.settings.onChange))l.on("change",function(){l.settings.onChange.apply(l,[l.getValue()])});a.sbtools.registerBaseEvent(l,l.settings);void 0!==l.settings.value&&null!==l.settings.value?q(l.settings.value,function(){n();r()}):n();l.data("$input",l);return l}var l=this,f;if(l.data("$input"))if(b){if(void 0===b.value||null===b.value)b.value=l.data("$input").getValue();f=a.extend({},l.data("$input").settings,b||{})}else return l.data("$input");
else f=a.extend({},k,b||{});l.settings=f;a.sbbase.mixinWidget(l);l.getValue=function(){return l.val()===l.settings.placeholder?"":a.trim(l.val())};l.setValue=function(a){q(a,function(){r()});return l};l.setState=function(b){a.each(b,function(b,f){void 0!==f&&null!==f?"value"==b?l.setValue(f):("required"==b?l.settings.required=f:"readonly"==b?(l.settings.readonly=f,a.sbtools.toggleInputReadonlyClass(l,f)):"disabled"==b&&(l.settings.disabled=f,a.sbtools.toggleInputDisabledClass(l,f)),l.attr(b,f)):l.removeAttr(b)});
return l};l.getDefaultOptions=function(){return k};l.reload=function(){a.sbtools.initController.removeInitCompleteFlag(l,"$sbinput");return z()};l.validate=function(){if(a.isFunction(f.callback))return this.settings.callback.apply(this,[this.settings,this.getValue()]);var b=l.getValue(),k=!1;return f.required&&(k=a.sbvalidator.required(l[0],b),!k)?a.sbvalidator.TEXT_REQUIRED:f.minlength&&(k=a.sbvalidator.minlength(l[0],b,f.minlength),!k)?a.sbvalidator.minLengthPromptMessage(f.minlength):f.maxlength&&
(k=a.sbvalidator.maxlength(l[0],b,f.maxlength),!k)?a.sbvalidator.maxLengthPromptMessage(f.maxlength):f.regex&&a.sbtools.isNotBlank(b)&&(k=a.sbvalidator.valid(f.regex,b),!k)?a.sbvalidator.TEXT_REGEX:""};l.getName=function(){return l.attr("name")};return this.each(function(){z()})}})(jQuery);
(function(a){var k={className:"sinobest-textarea",required:!1,minlength:null,maxlength:null,disabled:!1,readonly:!1,callback:null,value:null,resize:!1,onChange:null,onInitComplete:null,setValueTriggerChange:!0};a.fn.sbtextarea=function(b){function q(){return f.data("$textarea")}function r(a,b){f.val(a);f.settings.value=a;b&&b()}function n(){a.isFunction(f.settings.onChange)&&f.settings.setValueTriggerChange&&f.trigger("change")}function z(){a.sbtools.initController.initComplete(f,"$sbtextarea",function(){f.data("$textarea")||
f.data("$textarea",f)},f.settings.onInitComplete)}function l(){f.addClass(f.settings.className);f.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);f.attr("required",f.settings.required);f.attr("readonly",f.settings.readonly);a.sbtools.toggleTextareaReadonlyClass(f,f.settings.readonly);f.attr("disabled",f.settings.disabled);a.sbtools.toggleInputDisabledClass(f,f.settings.disabled);f.settings.resize?f.css("resize","both"):f.css("resize","none");if(a.isFunction(f.settings.onChange))f.on("change",function(){f.settings.onChange.apply(f,
[f.getValue()])});a.sbtools.registerBaseEvent(f,f.settings);void 0!==f.settings.value&&null!==f.settings.value?r(f.settings.value,function(){z();n()}):z();f.data("$textarea",f);return f}var f=this,u;if(f.data("$textarea"))if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();u=a.extend({},q().settings,b||{})}else return q();else u=a.extend({},k,b||{});f.settings=u;a.sbbase.mixinWidget(f);f.getValue=function(){return a.trim(f.val())};f.setValue=function(a){r(a,function(){n()});return f};
f.setState=function(b){a.each(b,function(b,k){void 0!==k&&null!==k?"value"==b?f.setValue(k):("required"==b?f.settings.required=k:"readonly"==b?(f.settings.readonly=k,a.sbtools.toggleTextareaReadonlyClass(f,k)):"disabled"==b&&(f.settings.disabled=k,a.sbtools.toggleInputDisabledClass(f,k)),f.attr(b,k)):f.removeAttr(b)});return f};f.getDefaultOptions=function(){return k};f.reload=function(){a.sbtools.initController.removeInitCompleteFlag(f,"$sbtextarea");return l()};f.validate=function(){if(a.isFunction(u.callback))return this.settings.callback.apply(this,
[this.settings,this.getValue()]);var b=f.getValue(),k=!1;return u.required&&(k=a.sbvalidator.required(f[0],b),!k)?a.sbvalidator.TEXT_REQUIRED:u.minlength&&(k=a.sbvalidator.minlength(f[0],b,u.minlength),!k)?a.sbvalidator.minLengthPromptMessage(u.minlength):u.maxlength&&(k=a.sbvalidator.maxlength(f[0],b,u.maxlength),!k)?a.sbvalidator.maxLengthPromptMessage(u.maxlength):""};f.getName=function(){return f.attr("name")};return this.each(function(){l()})}})(jQuery);
(function(a){a.extend({sbtools:{}});a.extend(a.sbtools,{CONSTANTS:{DEFAULT_DELIMITER:";",DATA_SBITEM_KEY:"data-sbitem",UICLASS:{TEXT_COMMON:"sinobest-text-common",BASE_UI:"sinob-widget"}},isIE:function(){return 0<navigator.userAgent.indexOf("MSIE")?!0:!1},isIE6:function(){return 0<navigator.userAgent.indexOf("MSIE")&&0<navigator.userAgent.indexOf("MSIE 6.0")?!0:!1},isIE7:function(){return 0<navigator.userAgent.indexOf("MSIE")&&0<navigator.userAgent.indexOf("MSIE 7.0")?!0:!1},isIE8:function(){return 0<
navigator.userAgent.indexOf("MSIE")&&0<navigator.userAgent.indexOf("MSIE 8.0")?!0:!1},isIE6OrIE7:function(){return this.isIE6()||this.isIE7()?!0:!1},isBlank:function(k){return""===k||void 0===k||null===k||0>=a.trim(k).length?!0:!1},isNotBlank:function(a){return!this.isBlank(a)},isPlaceHolderSupported:function(){return"placeholder"in document.createElement("input")},toggleInputReadonlyClass:function(a,b){this._toggleClass(a,"input-readonly",b)},_toggleClass:function(a,b,q){q?a.addClass(b):a.removeClass(b)},
toggleSelectReadonlyClass:function(a,b){this._toggleClass(a,"select-readonly",b)},toggleDateReadonlyClass:function(a,b){this._toggleClass(a,"date-readonly",b)},toggleTextareaReadonlyClass:function(a,b){this._toggleClass(a,"textarea-readonly",b)},toggleRichEditorReadonlyClass:function(a,b){this._toggleClass(a,"ke-readonly",b)},toggleDivInputReadonlyClass:function(a,b){this._toggleClass(a,"div-input-readonly",b)},toggleInputDisabledClass:function(a,b){this._toggleClass(a,"input-disabled",b)},toggleSelectDisabledClass:function(a,
b){this._toggleClass(a,"select-disabled",b)},convertSetValue:function(k){return a.isArray(k)&&0<k.length&&"object"!==typeof k[0]?k.join(a.sbtools.CONSTANTS.DEFAULT_DELIMITER):k},adjustInputPopupDropdownContainerPosition:function(k,b,q){var r=k.offset();b.css({left:"0px"});var n=b.outerWidth(!0),z=a(window).width()-r.left,l=a("<test></test>");b.parents().each(function(){if("relative"==a(this).css("position"))return l=a(this),!1});var f=0;void 0===q||isNaN(q)||(f=q);this.isIE6()&&(f=30);if(z-n>f)b.css({left:r.left-
l.offset().left+"px",top:r.top+k.outerHeight()-l.offset().top+"px"}).slideDown("fast");else{var u=a.sbtools.hasScrollY();b.css({left:a(window).width()-n-l.offset().left-f+"px",top:r.top+k.outerHeight()-l.offset().top+"px"}).slideDown("fast",function(){u!==a.sbtools.hasScrollY()&&b.css({left:a(window).width()-n-l.offset().left-f+"px"})})}},hasScrollY:function(a){a=a?[a]:[document.documentElement,document.body];for(var b=!1,q=0;q<a.length;q++){var r=a[q],n=r.scrollTop;r.scrollTop+=0<n?-1:1;r.scrollTop!==
n&&(b=b||!0);r.scrollTop=n}return b},isNonNull:function(k){if(void 0!==k&&null!==k)if("string"===typeof k){if(""!==k&&0<a.trim(k).length)return!0}else return!0;return!1},baseUIEvent:["click"],registerBaseEvent:function(k,b,q){for(var r=0;r<this.baseUIEvent.length;r++){var n=this.baseUIEvent[r],z=n.substring(0,1).toUpperCase()+n.substring(1),l=b["on"+z];if(l&&a.isFunction(l))k.on(n,function(){a.isFunction(q)?q()&&l.apply(k.get(0)):l.apply(k.get(0))})}},eventSimulationSelectReadonly:function(k,b,q){if(a.sbtools.isIE())q?
(k.on("mousemove.select.readonly",function(){this.setCapture()}),k.on("mouseout.select.readonly",function(){this.releaseCapture()}),k.on("focus.select.readonly",function(){this.blur()})):(k.off("mousemove.select.readonly"),k.off("mouseout.select.readonly"),k.off("focus.select.readonly"));else if(q)b.on("focus.select.readonly mousedown.select.readonly mouseout.select.readonly mouseover.select.readonly",function(){a(this).blur();return!1});else b.off("focus.select.readonly mousedown.select.readonly mouseout.select.readonly mouseover.select.readonly")},
initController:{initNameSuffix:"Init",initComplete:function(k,b,q,r){this.isInitComplete(k,b)||(this.setInitCompleteFlag(k,b),r&&a.isFunction(r)&&(q&&a.isFunction(q)&&q(),r.apply(k)))},isInitComplete:function(a,b){return a.data(b+this.initNameSuffix)},setInitCompleteFlag:function(a,b){a.data(b+this.initNameSuffix,!0);a.attr("data-loaded",!0)},removeInitCompleteFlag:function(a,b){a.removeData(b+this.initNameSuffix);a.removeAttr("data-loaded")},observeLoad:function(a,b){for(var q=this,r=[],n=0;n<a.length;n++){var z=
a[n];z.attr("data-loaded")&&"true"==z.attr("data-loaded")||r.push(z)}0<r.length?setTimeout(function(){q.observeLoad(r,b)},200):b()}},registerLoadCompleteListener:function(k,b){var q=a(document.body),r=a.sbbase.plugins,n=!1;b&&(b.findClasses&&(r=b.findClasses,n=!0),b.$range&&(q=b.$range));for(var z=[],l=0;l<r.length;l++){var f=r[l];q.find("."+(n?f:a.sbbase.pluginClassPrefix+f)).each(function(b,f){z.push(a(f))})}this.initController.observeLoad(z,k)},isInPseudoProtocolBlackList:function(k,b){if(this.isBlank(k)||
a.isArray(k)||"function"!==typeof k.toLocaleLowerCase)return!1;var q=k.toLocaleLowerCase().replace(/\s+/g,"");if(0==q.indexOf("javascript")||0==q.indexOf("vbscript")||0==q.indexOf("data")){if(b)throw Error(k+":是不合法的参数配置!");return!0}return!1}})})(jQuery);
(function(a){var k={id:null,name:null,rows:6,cols:20,colModel:null,value:null,rootId:"-1",async:!1,url:null,otherRequestParam:null,asyncLevelLoadUrl:null,asyncQueryUrl:null,asyncQueryParentNodesUrl:null,asyncInitDepth:1,labelDelimiter:";",labelNodeDelimiter:":",isShowParentNodeInLabel:!1,selectTreeWidth:null,selectTreeHeight:null,type:"single",style:null,className:"sinobest-tree",required:!1,readonly:!1,disabled:!1,expandAll:!1,onConfirm:null,onClear:null,callback:null,onChange:null,saveType:"c",
delimiter:null,onAjaxRequest:null,onAjaxResponse:null,resize:!1,preventDuplicateQuery:!0,selectBranchMode:!1,onQueryAjaxRequest:null,onQueryAjaxResponse:null,onInitComplete:null,enableQuery:!0};a.fn.sbtree=function(b){function q(){return c.data("$sbtree")}function r(b){var d="",d="c"==b?c._$hiddenValueControl.val():c._$hiddenValueControl.data("detail");return a.sbtools.isNotBlank(d)?(b=d.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER),c.settings.delimiter?b.join(c.settings.delimiter):"single"==c.settings.type?
0<b.length?b[0]:"":b):d}function n(a,c){x.controller.setValue(a,c)}function z(){a.sbtools.initController.initComplete(c,"$sbtree",function(){c.data("$sbtree")||c.data("$sbtree",c)},c.settings.onInitComplete)}function l(){null===c.settings.id&&(c.settings.id=c.attr("id")+"_tree");c.addClass(c.settings.className);c.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);var b=a("<textarea readonly></textarea>");c.settings.id&&b.attr("id",c.settings.id);c.settings.name&&b.attr("name",c.settings.name);b.attr("rows",
c.settings.rows);b.attr("cols",c.settings.cols);c.settings.style&&b.attr("style",c.settings.style);b.attr("disabled",c.settings.disabled);a.sbtools.toggleInputDisabledClass(b,c.settings.disabled);c.settings.resize?b.css("resize","both"):b.css("resize","none");a.sbtools.toggleTextareaReadonlyClass(b,c.settings.readonly);c.append(b);c._$labelControl=b;b=a('<input type="hidden"></input>');c.append(b);c._$hiddenValueControl=b;var b=a('<div class="sinobest-tree-container sinob-widget-container"></div>'),
d="",k="",l="";c.settings.enableQuery&&(d=a('<div class="sinobest-tree-query"></div>'),k=a('<input type="text" class="sinobest-text-query sinobest-tree-query-text"></input>'),l=a('<input type="button" value="查询" class="sinobest-button-common sinobest-tree-query-btn"></input>'),d.append(k).append(l));var n=a('<div class="sinobest-tree-select-container"></div>'),m=a('<div class="sinobest-tree-selectable"></div>'),q=a('<div class="ztree sinobest-tree-selectable-ztree"></div>');q.attr("id",c.settings.id+
"_selectable");m.append(q);var r=a('<div class="sinobest-tree-selected"></div>'),v=a('<div class="ztree sinobest-tree-selected-ztree"></div>');v.attr("id",c.settings.id+"_selected");r.append(v);e()&&(r.hide(),q.addClass("sinobest-tree-selectable-ztree-simple-single"));n.append(m);n.append(r);var m=a('<div class="sinobest-tree-btns"></div>'),r=a('<input type="button" value="确定" class="sinobest-button-common sinobest-tree-btns-confirmbtn"></input>'),u=a('<input type="button"   value="清空" class="sinobest-button-common sinobest-tree-btns-clearbtn"></input>');
m.append(r).append(u);b.append(d).append(n).append(m);c.attr("id")?b.attr("id",c.attr("id")+"_tree_container"):c.settings.id&&b.attr("id",c.settings.id+"_tree_container");a(document.body).append(b);c._$sbtreeContainer=b;c.settings.enableQuery&&(c._$queryInput=k,c._$queryBtn=l);c._$selectableTree=q;c._$selectedTree=v;c._$confirmBtn=r;c._$clearBtn=u;c.settings.selectTreeWidth&&(c._$selectableTree.width(c.settings.selectTreeWidth),c._$selectedTree.width(c.settings.selectTreeWidth));c.settings.selectTreeHeight&&
(c._$selectableTree.height(c.settings.selectTreeHeight),c._$selectedTree.height(c.settings.selectTreeHeight));f();y();t();c.data("$sbtree",c);return c}function f(){c._$labelControl.bind("click",function(){c._$sbtreeContainer.is(":visible")||c.settings.readonly||(a.sbtools.adjustInputPopupDropdownContainerPosition(c._$labelControl,c._$sbtreeContainer),a("html").bind("mousedown",m))});c._$labelControl.setValue=function(a){void 0===typeof a.id||""===a?(this.val(""),this.attr("title","")):0<a.id.length?
(this.val(a.name),this.attr("title",a.name)):(this.val(""),this.attr("title",""))}}function u(){c._$sbtreeContainer.fadeOut("fast");a("html").unbind("mousedown",m)}function m(b){b.target.id==c._$labelControl.attr("id")||a(b.target).hasClass("sinobest-tree-container")||0<a(b.target).parents("div.sinobest-tree-container").length||u()}function y(){c._$hiddenValueControl.setValue=function(a){void 0===typeof a.id||""===a?(this.val(""),this.data("detail","")):(0<a.id.length?this.val(a.id):this.val(""),
0<a.detail.length?this.data("detail",a.detail):this.data("detail",""))}}function t(){c._getSelectableTree=function(){return a.fn.zTree.getZTreeObj(c._$selectableTree.attr("id"))};c._getSelectedTree=function(){return a.fn.zTree.getZTreeObj(c._$selectedTree.attr("id"))};c._$confirmBtn.bind("click",function(){var a=c.getValue();D();var b=c.settings.onConfirm;b&&(a=a.toString()!=c.getValue().toString(),b.apply(window,[c.getSelectItems(),a]));u()});c._$clearBtn.bind("click",function(){for(var b=c._getSelectableTree(),
d=c._getSelectedTree(),f=d.getCheckedNodes(!0),k=0;k<f.length;k++){var l=b.getNodeByParam("id",f[k].id);null!==l&&(l.checked=!1,b.updateNode(l));d.removeNode(f[k],!0)}e()&&a.sbtreetools.removeAllNodes(d);if(b=c.settings.onClear)d=[],d.push({}),b.apply(window,d)});x.controller.createTree()}function D(){var b;b=c._getSelectedTree().getCheckedNodes(!0);for(var d="",e="",f="",k=0,l=b.length;k<l;k++){var m=b[k];v(m)&&(d+=m.id+a.sbtools.CONSTANTS.DEFAULT_DELIMITER,f+=m.name+a.sbtools.CONSTANTS.DEFAULT_DELIMITER,
e=c.settings.isShowParentNodeInLabel?e+(a.sbtreetools.getNodeNameAppendParentsName(m,c.settings.labelNodeDelimiter)+c.settings.labelDelimiter):e+(m.name+c.settings.labelDelimiter))}0<d.length&&(d=d.substring(0,d.length-1));0<f.length&&(f=f.substring(0,f.length-1));0<e.length&&(e=e.substring(0,e.length-1));b={id:d,name:e,detail:f};c._$labelControl.setValue(b);c._$hiddenValueControl.setValue(b)}function e(){return"single"==c.settings.type?!0:!1}function v(a){return C()?!a.isParent||a.isParent&&(void 0===
a.children||0>=a.children.length)?!0:!1:!a.isParent}function C(){return c.settings.selectBranchMode?!0:!1}function w(){return null!==c.settings.colModel&&0<c.settings.colModel.length?!0:!1}var c=this;if(c.data("$sbtree")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();b=a.extend({},q().settings,b||{});q().settings=b;q().reload()}return q()}b=a.extend({},k,b||{});c.settings=b;a.sbbase.mixinWidget(c);c.getValue=function(){return r(c.settings.saveType)};c.getLabel=function(){if(c.settings.isShowParentNodeInLabel){var b=
c._$labelControl.val();if(a.sbtools.isBlank(b))return"";b=b.split(c.settings.labelDelimiter);return c.settings.delimiter?b.join(c.settings.delimiter):"single"==c.settings.type?0<b.length?b[0]:"":b}return r("d")};c.setValue=function(a){x.controller.setValue(a)};c.setState=function(b){a.each(b,function(b,h){void 0!==h&&null!==h?"value"==b?c.setValue(h):"required"==b?(c.settings.required=h,c._$labelControl.attr("required",h)):"disabled"==b?(c.settings.disabled=h,c._$labelControl.attr("disabled",h),a.sbtools.toggleInputDisabledClass(c._$labelControl,
h)):"readonly"==b?(c.settings.readonly=h,a.sbtools.toggleTextareaReadonlyClass(c._$labelControl,h)):c.attr(b,h):c.removeAttr(b)});return c};c.getDefaultOptions=function(){return k};c.reload=function(){c._$sbtreeContainer.remove();c.empty();a.sbtools.initController.removeInitCompleteFlag(c,"$sbtree");l()};c.load=function(b){if(a.sbtools.isNonNull(b))a.sbtools.isInPseudoProtocolBlackList(b,!0),c.settings.url=b,c.reload();else throw Error("Please set the correct data source");};c.destroy=function(){c._$sbtreeContainer.remove();
return c.remove()};c.validate=function(){return a.isFunction(c.settings.callback)?this.settings.callback.apply(this,[this.settings,this.getValue()]):c.settings.required&&!a.sbvalidator.required(c._$hiddenValueControl[0],c.getValue())?a.sbvalidator.TEXT_REQUIRED:""};c.getName=function(){return c.settings.name};c.getSelectItems=function(){var a=c._getSelectedTree().getCheckedNodes(!0);if(void 0===a||null===a||0>=a.length)return[];for(var b=[],e=0;e<a.length;e++){var f=a[e];if(v(f)){var k=x.controller.addMulColumnValue(f,
{id:f.id,name:f.name,pId:f.pId}),k=x.controller.addDataFieldsColumnValue(f,k);b.push(k)}}return b};var x={defaultSetting:{check:{enable:!0},view:{dblClickExpand:!1},data:{simpleData:{enable:!0}}},mulSelectBranchModeSetting:{check:{chkboxType:{Y:"p",N:"s"}}},singleSetting:{check:{enable:!0,chkStyle:"radio",radioType:"all"}},transformToSimpleTreeNodes:function(c,b){if(void 0===c||null===c||0>=c.length)return[];for(var e=[],f=0;f<c.length;f++){var k=c[f],l=x.controller.addMulColumnValue(k,{id:k.id,name:k.name,
pId:k.pId,isParent:k.isParent,checked:k.checked,chkDisabled:k.chkDisabled,nocheck:k.nocheck});void 0!==b&&null!==b&&a.extend(l,b);l=x.controller.addDataFieldsColumnValue(k,l);e.push(l)}return e},transformToSimpleTreeNode:function(a,c){return void 0===a||null===a?null:this.transformToSimpleTreeNodes([a],c)[0]},controller:{createTree:function(){c.isInitTreeBuilded=!1;c.settings.async?this.lazyController.createTree():this.allController.createTree()},createInitTreeConfig:function(){var a={};e()&&(a.check=
x.singleSetting.check);return a},assembleFinishTreeConfig:function(b){w()&&a.sbtreetools.mulColumnController.addMulColumnConfig(b,c.settings.colModel);return C()?e()?a.extend({},x.defaultSetting,b):a.extend(!0,{},x.defaultSetting,b,x.mulSelectBranchModeSetting):a.extend({},x.defaultSetting,b)},setValue:function(a,b){c._$labelControl.setValue("");c._$hiddenValueControl.setValue("");c.settings.async?this.lazyController.setValue(a,b):this.allController.setValue(a,b)},clearSelectTree:function(){var b=
c._getSelectedTree();a.sbtreetools.removeAllNodes(b);for(var b=c._getSelectableTree(),d=b.getCheckedNodes(),e=0,f=d.length;e<f;e++)b.checkNode(d[e],!1,!1,!1)},callback:{onChangeCallBack:function(a,b,e){if("function"==typeof c.settings.onChange)c.settings.onChange(a,b,e)}},convertValueToStr:function(c){return a.sbtools.isBlank(c)?"":"string"===typeof c?c:a.isArray(c)?c.join(a.sbtools.CONSTANTS.DEFAULT_DELIMITER):""},convertValueToArray:function(c){if(a.sbtools.isBlank(c))return[];if("string"===typeof c){if(0<
c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER).length)return c.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER);var b=[];b.push(c);return b}return a.isArray(c)?c:[]},updateMulColNocheck:function(c){w()&&a.sbtreetools.mulColumnController.processMulColNocheck(c)},addMulColumnValue:function(b,d){return w()?a.sbtreetools.mulColumnController.addMulColumnValue(b,d,c.settings.colModel):d},processSingleTreeNodeNoCheck:function(a){C()||this.setParentNodesNoCheck(a)},setParentNodesNoCheck:function(c){var b=this;
w()?a.sbtreetools.setParentNodesNoCheck(c,function(a){b.updateMulColNocheck(a)}):a.sbtreetools.setParentNodesNoCheck(c)},setNoCheckIfIsParentNode:function(c,b){var e=this;w()?a.sbtreetools.setNoCheckIfIsParentNode(c,b,function(a){e.updateMulColNocheck(a)}):a.sbtreetools.setNoCheckIfIsParentNode(c,b)},initDataFields:function(a){c.dataFields=[];if(0<a.treeNodes.length){a=a.treeNodes[0];for(var b in a)c.dataFields.push(b)}},addDataFieldsColumnValue:function(a,b){if(void 0===c.dataFields||null===c.dataFields||
0>=c.dataFields.length)return b;for(var e=0,f=c.dataFields.length;e<f;e++){var k=c.dataFields[e];b.hasOwnProperty(k)||(b[k]=a[k])}return b}}};x.controller.allController={createTree:function(){var a=this.createSelectableTreeConfig(),b=this.createSelectedTreeConfig();c.settings.enableQuery&&this.bindQueryBtnEvent();this.initTree(a,b)},createSelectableTreeConfig:function(){var a=x.controller.createInitTreeConfig();a.callback={onCheck:function(a,c,b){x.selectableTreeOncheck(a,c,b);x.controller.callback.onChangeCallBack(a,
c,b)},onExpand:function(a,b,e){if(e.isParent&&e.children&&0<e.children.length&&e.children[0].isHidden){a=0;for(b=e.children.length;a<b;a++)c._getSelectableTree().expandNode(e.children[a],!1,!1,!1,!1);c._getSelectableTree().showNodes(e.children)}}};return x.controller.assembleFinishTreeConfig(a)},createSelectedTreeConfig:function(){var a=x.controller.createInitTreeConfig();a.callback={onCheck:function(a,c,b){x.selectedTreeOncheck(a,c,b)}};return x.controller.assembleFinishTreeConfig(a)},bindQueryBtnEvent:function(){c._$queryBtn.bind("click",
function(){var a=c._$queryInput.val();if(c.settings.preventDuplicateQuery){if(c._$queryInput.lastQuery===a)return;c._$queryInput.lastQuery=a}var b=c._getSelectableTree();if(""===a)b.showNodes(b.getNodesByParam("isHidden",!0));else{var e=b.getNodesByParamFuzzy("name",a,null),f=b.getNodesByParamFuzzy("id",a,null);b.hideNodes(b.getNodesByParam("isHidden",!1));for(var k=[],a=[],l=0,m=e.length;l<m;l++){var n=e[l];k.push(n);for(var q=n.getParentNode();null!==q;)k.push(q),q=q.getParentNode();n.isParent&&
a.push(n)}e=0;for(l=f.length;e<l;e++){m=f[e];k.push(m);for(n=m.getParentNode();null!==n;)k.push(n),n=n.getParentNode();m.isParent&&a.push(m)}b.showNodes(k);b.expandAll(!0);f=0;for(k=a.length;f<k;f++)e=a[f],e.children&&0<e.children.length&&e.children[0].isHidden&&b.expandNode(e,!1,!1,!1,!1)}})},initTree:function(b,d){var f={};f.rootId=c.settings.rooId;f.saveType=c.settings.saveType;a.extend(f,c.settings.otherRequestParam||{});c.settings.onAjaxRequest&&a.isFunction(c.settings.onAjaxRequest)&&(f=c.settings.onAjaxRequest(f));
a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(f),url:c.settings.url,success:function(f){c.settings.onAjaxResponse&&a.isFunction(c.settings.onAjaxResponse)&&(f=c.settings.onAjaxResponse(f));x.controller.initDataFields(f);a.fn.zTree.init(c._$selectableTree,b,f.treeNodes);a.fn.zTree.init(c._$selectedTree,d,null);f=c._getSelectableTree();e()&&x.controller.processSingleTreeNodeNoCheck(f);c.settings.expandAll&&f.expandAll(!0);c.isInitTreeBuilded=!0;
c.data("$tempSetValue")&&(c.settings.value=c.data("$tempSetValue"),c.removeData("$tempSetValue"));c.settings.value?n(c.settings.value,function(){z()}):z()},error:function(c,b,d){b={};b.code=c.status;b.msg=a.sberror.format(b.code,this.url);a.sberror.onError(b)}})},processInitValue:function(b){if(void 0!==b){var d=c._getSelectableTree();b=x.controller.convertValueToArray(b);var f=b.length;e()&&(f=0<b.length?1:0);for(var k=0;k<f;k++){var l=b[k],l="c"==c.settings.saveType?d.getNodeByParam("id",l):d.getNodeByParam("name",
l);if(void 0!==l&&null!==l){var m=[];l.isHidden&&(m=m.concat(a.sbtreetools.getParentNodes(l)),m.push(l),d.showNodes(m));d.checkNode(l,!0,!0,!0);0<m.length&&d.hideNodes(m)}}b=d.getCheckedNodes();if(e()){if(null!==b&&1==b.length)for(b=b[0].getParentNode();null!==b;)d.expandNode(b,!0,!1,!0),b=b.getParentNode()}else for(f=0,k=b.length;f<k;f++)d.expandNode(b[f],!0,!1,!0)}},setValue:function(b,d){c.isInitTreeBuilded?(x.controller.clearSelectTree(),c.settings.value=b,this.processInitValue(b),D(),d&&a.isFunction(d)&&
d()):c.data("$tempSetValue",b)}};x.controller.lazyController={createTree:function(){var a=this.createSelectableTreeConfig(),b=this.createSelectedTreeConfig();c.settings.enableQuery&&this.bindQueryBtnEvent();this.initTree(a,b)},createSelectableTreeConfig:function(){var b=x.controller.createInitTreeConfig(),d=a.extend({rootId:c.settings.rootId,initDepth:c.settings.asyncInitDepth},c.settings.otherRequestParam||{});b.async={enable:!0,contentType:"application/json; charset=utf-8",type:"post",dataType:"json",
url:c.settings.asyncLevelLoadUrl,autoParam:["id","name","level","onCheckLoad"],otherParam:d,dataFilter:function(a,c,b){return b?b.treeNodes:null}};var e=this;b.callback={onCheck:function(a,c,b){e._selectableTreeOnCheck(a,c,b);x.controller.callback.onChangeCallBack(a,c,b)},onAsyncSuccess:function(a,c,b){e._selectableTreeOnAsyncSuccess(a,c,b)},onAsyncError:function(b,d,e,h,f,k){b={};b.code=h.status;b.msg=a.sberror.format(b.code,c.settings.asyncLevelLoadUrl);a.sberror.onError(b)}};return x.controller.assembleFinishTreeConfig(b)},
_selectableTreeOnCheck:function(a,b,e){if(e.checked){var f=c._getSelectableTree(),k=!1;if("multiple"==c.settings.type&&e.isParent&&!C())if(void 0===e.children)k=!0,e.onCheckLoad=!0,f.reAsyncChildNodes(e,"refresh",!1);else for(var l=f.getCheckedNodes(!0),m=0,n=l.length;m<n;m++){var q=l[m];q.isParent&&void 0===q.children&&(k=!0,q.onCheckLoad=!0,f.reAsyncChildNodes(q,"refresh",!1))}k||x.selectableTreeOncheck(a,b,e)}else x.selectableTreeOncheck(a,b,e)},_selectableTreeOnAsyncSuccess:function(b,d,f){var k=
c._getSelectableTree();e()?C()||x.controller.setNoCheckIfIsParentNode(k,f):f.checked&&f.onCheckLoad&&(a.sbtreetools.setChildNodesCheck(k,f),x.selectableTreeOncheck(b,d,f))},createSelectedTreeConfig:function(){var a=x.controller.createInitTreeConfig();a.callback={onCheck:function(a,b,e){x.selectedTreeOncheck(a,b,e,c)}};return x.controller.assembleFinishTreeConfig(a)},bindQueryBtnEvent:function(){c._$queryBtn.bind("click",function(){var b=c._$queryInput.val();if(c.settings.preventDuplicateQuery){if(c._$queryInput.lastQuery===
b)return;c._$queryInput.lastQuery=b}var d={};d.rootId=c.settings.rootId;d.initDepth=c.settings.asyncInitDepth;d.query=b;a.extend(d,c.settings.otherRequestParam||{});c.settings.onQueryAjaxRequest&&a.isFunction(c.settings.onQueryAjaxRequest)&&(d=c.settings.onQueryAjaxRequest(d));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify(d),url:c.settings.asyncQueryUrl,success:function(b){if(!c.settings.onQueryAjaxResponse||!a.isFunction(c.settings.onQueryAjaxResponse)||
!1!==c.settings.onQueryAjaxResponse(b)){var h=c._getSelectableTree();a.sbtreetools.removeAllNodes(h);h.addNodes(null,b.treeNodes,!1);e()&&x.controller.processSingleTreeNodeNoCheck(h);if(null!==d.query&&""!==d.query){h.expandAll(!0);b=h.getNodesByFilter(function(a){return a.isParent&&!a.zAsync?!0:!1});for(var f=0,k=b.length;f<k;f++)h.expandNode(b[f],!1,!1,!1,!1)}}},error:function(c,b,d){b={};b.code=c.status;b.msg=a.sberror.format(b.code,this.url);a.sberror.onError(b)}})})},initTree:function(b,d){var f=
{};f.rootId=c.settings.rootId;f.value=x.controller.convertValueToStr(c.settings.value);e()&&1<f.value.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER).length&&(f.value=f.value.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER)[0]);f.initDepth=c.settings.asyncInitDepth;f.saveType=c.settings.saveType;a.extend(f,c.settings.otherRequestParam||{});c.settings.onAjaxRequest&&a.isFunction(c.settings.onAjaxRequest)&&(f=c.settings.onAjaxRequest(f));a.ajax({type:"post",contentType:"application/json; charset=utf-8",dataType:"json",
data:JSON.stringify(f),url:c.settings.url,success:function(f){c.settings.onAjaxResponse&&a.isFunction(c.settings.onAjaxResponse)&&(f=c.settings.onAjaxResponse(f));x.controller.initDataFields(f);a.fn.zTree.init(c._$selectableTree,b,f.treeNodes);a.fn.zTree.init(c._$selectedTree,d,f.selectedTreeNodes);f=c._getSelectableTree();e()&&x.controller.processSingleTreeNodeNoCheck(f);c.isInitTreeBuilded=!0;c.data("$tempSetValue")&&(c.settings.value=c.data("$tempSetValue"),c.removeData("$tempSetValue"));c.settings.value?
n(c.settings.value,function(){z()}):z()},error:function(b,c,d){c={};c.code=b.status;c.msg=a.sberror.format(c.code,this.url);a.sberror.onError(c)}})},processInitValue:function(a){if(void 0!==a){var b=c._getSelectedTree();e()?(x.controller.setParentNodesNoCheck(b),a=x.controller.convertValueToArray(a),a="c"==c.settings.saveType?b.getNodeByParam("id",a[0]):b.getNodeByParam("name",a[0]),void 0!==a&&null!==a&&(C()&&a.isParent&&(a.nocheck=!1,b.updateNode(a),x.controller.updateMulColNocheck(a)),b.checkNode(a,
!0,!0,!0))):b.checkAllNodes(!0);b.expandAll(!0)}},setValue:function(b,d){if(c.isInitTreeBuilded){x.controller.clearSelectTree();c.settings.value=b;var f={};f.rootId=c.settings.rootId;f.value=x.controller.convertValueToStr(b);e()&&1<f.value.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER).length&&(f.value=f.value.split(a.sbtools.CONSTANTS.DEFAULT_DELIMITER)[0]);f.saveType=c.settings.saveType;a.extend(f,c.settings.otherRequestParam||{});var k=this;a.ajax({type:"post",contentType:"application/json; charset=utf-8",
dataType:"json",data:JSON.stringify(f),url:c.settings.asyncQueryParentNodesUrl,success:function(e){c._getSelectedTree().addNodes(null,e.treeNodes,!1);k.processInitValue(b);D();d&&a.isFunction(d)&&d()},error:function(b,c,d){c={};c.code=b.status;c.msg=a.sberror.format(c.code,this.url);a.sberror.onError(c)}})}else c.data("$tempSetValue",b)}};x.selectableTreeOncheck=function(a,b,f){f.checked?e()?x.singleSelectableTreeOnChecked(a,b,f):c.settings.async?x.multipleLazyLoadSelectableTreeOnChecked(a,b,f):x.multipleAllLoadSelectableTreeOnChecked(a,
b,f):(a=c._getSelectedTree(),f=a.getNodeByParam("id",f.id),null!==f&&a.checkNode(f,!1,!0,!0))};x.singleSelectableTreeOnChecked=function(b,d,e){d=c._getSelectableTree();b=c._getSelectedTree();a.sbtreetools.removeAllNodes(b);d=d.getCheckedNodes(!0);e=a.sbtreetools.getParentNodes(d[0]);var f=[],f=f.concat(x.transformToSimpleTreeNodes(e,{nocheck:!0}));f.push(x.transformToSimpleTreeNode(d[0]));b.addNodes(null,f,!1);b.expandAll(!0)};x.multipleAllLoadSelectableTreeOnChecked=function(b,d,e){d=c._getSelectableTree();
b=c._getSelectedTree();d=d.getNodesByFilter(function(a){return a.checked?!0:!1});d=x.transformToSimpleTreeNodes(d,{nocheck:!1});a.sbtreetools.removeAllNodes(b);b.addNodes(null,d,!1);b.expandAll(!0)};x.multipleLazyLoadSelectableTreeOnChecked=function(b,d,e){d=c._getSelectableTree();b=c._getSelectedTree();e=d.getCheckedNodes(!0);d=[];for(var f=0,k=e.length;f<k;f++){var l=e[f];null===b.getNodeByParam("id",l.id,null)&&d.push(x.transformToSimpleTreeNode(l,{checked:!0}))}e=b.transformToArray(b.getNodes());
a.sbtreetools.removeAllNodes(b);f=[];k=0;for(l=e.length;k<l;k++)f.push(x.transformToSimpleTreeNode(e[k],{checked:!0}));f=f.concat(d);b.addNodes(null,f,!1);b.expandAll(!0)};x.selectedTreeOncheck=function(b,d,f){if(!f.checked){b=c._getSelectableTree();d=c._getSelectedTree();f=d.getCheckedNodes(!1);for(var k=0,l=f.length;k<l;k++){var m=b.getNodeByParam("id",f[k].id);null!==m&&(m.checked=!1,b.updateNode(m));d.removeNode(f[k],!0);null!=f[k].getParentNode()&&(m=f[k].getParentNode(),m.isParent=!0,d.updateNode(m),
(void 0===m.children||0>=m.children.length)&&d.expandNode(m,!0,!1,!1,!1))}e()&&a.sbtreetools.removeAllNodes(d)}};return this.each(function(){l()})}})(jQuery);
(function(a){a.extend({sbtreetools:{}});a.extend(a.sbtreetools,{removeAllNodes:function(a){for(var b=a.getNodes(),q=b.length-1;0<=q;q--)a.removeNode(b[q])},getParentNodes:function(a){if(null===a.getParentNode())return[];var b=[];for(a=a.getParentNode();null!==a;)b.push(a),a=a.getParentNode();return b},setNoCheckIfIsParentNode:function(k,b,q){if(b.isParent&&(b.nocheck=!0,k.updateNode(b),a.isFunction(q)&&q(b),b=b.children,void 0!==b))for(var r=0,n=b.length;r<n;r++)this.setNoCheckIfIsParentNode(k,b[r],
q)},setParentNodesNoCheck:function(a,b){for(var q=a.getNodes(),r=0,n=q.length;r<n;r++)this.setNoCheckIfIsParentNode(a,q[r],b)},setChildNodesCheck:function(a,b){var q=b.children;if(void 0!==q)for(var r=0,n=q.length;r<n;r++){var z=q[r];z.checked=!0;a.updateNode(z);this.setChildNodesCheck(a,z)}},getNodeNameAppendParentsName:function(a,b){var q=this.getParentNodes(a);q.reverse();for(var r="",n=0,z=q.length;n<z;n++)r=r+q[n].name+b;return r=""===r?a.name:r+a.name},mulColumnController:{addMulColumnConfig:function(k,
b){if(!(null===b||0>=b.length)){var q=this;a.extend(k,{view:{addDiyDom:function(a,k){q.addMulColumnDiyDom(a,k,b)}}})}},processMulColNocheck:function(k){var b=a("#"+k.tId).children(".sinobest-tree-mulcol-virtual-check");k.nocheck?0>=b.length&&(k=a("#"+k.tId).children("#"+k.tId+"_check"),b=k.clone(),b.addClass("sinobest-tree-mulcol-virtual-check"),b.removeAttr("id"),b.removeAttr("treenode_check"),k.after(b)):b.remove()},addMulColumnDiyDom:function(k,b,q){this.processMulColNocheck(b);k=a("#"+b.tId+"_a");
for(var r=0,n=q.length;r<n;r++){var z=q[r];if("name"==z.id)k.children("span[id='"+b.tId+"_span']").css("width",z.width).addClass("sinobest-tree-span-name-column");else{var l=a("<span></span>");l.attr("id",b.tId+"_"+z.id);l.html(b[z.id]);l.css("width",z.width).addClass("sinobest-tree-span-common-column");l.attr("title",b[z.id]);k.append(l)}}},addMulColumnValue:function(a,b,q){if(null===q||0>=q.length)return b;for(var r=0,n=q.length;r<n;r++){var z=q[r];b.hasOwnProperty(z.id)||(b[z.id]=a[z.id])}return b}}})})(jQuery);
(function(a){var k={id:null,name:null,value:null,mode:"simple",className:"sinobest-ueditor",setting:{elementPathEnabled:!1,wordCount:!1,maximumWords:Number.MAX_VALUE,autoHeightEnabled:!1,initialFrameHeight:300,serverUrl:"#"},required:!1,disabled:!1,readonly:!1,callback:null,onInitComplete:null,serverparam:null,editorListeners:null};a.fn.sbueditor=function(b){function q(){return y.data("$sbueditor")}function r(){a.sbtools.initController.initComplete(y,"$sbueditor",function(){y.data("$sbueditor")||
y.data("$sbueditor",y)},y.settings.onInitComplete)}function n(){y.addClass(y.settings.className);y.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);null===y.settings.id&&(y.settings.id=y.attr("id")+"_ueditor");var b=a("<textarea></textarea>");y.settings.id&&b.attr("id",y.settings.id);y.settings.name&&b.attr("name",y.settings.name);b.attr("required",y.settings.required);y.append(b);y._$textarea=b;z();y.data("$sbueditor",y);return y}function z(){y.settings.setting.readonly=y.settings.readonly||y.settings.disabled;
var a=y.settings.setting.toolbars?y.settings.setting.toolbars:"simple"==y.settings.mode?["source | undo redo | bold italic underline strikethrough | superscript subscript | forecolor backcolor | removeformat | insertorderedlist insertunorderedlist | selectall cleardoc paragraph | fontfamily fontsize | justifyleft justifycenter justifyright justifyjustify | link unlink | simpleupload insertimage attachment | map | horizontal print preview fullscreen drafts formula".split(" ")]:null;null!==a&&0<a.length&&
(y.settings.setting.toolbars=a);var b=UE.getEditor(y.settings.id,y.settings.setting);l(b);b.ready(function(){y.isCreatedEditor=!0;m(y.settings.readonly);if(y.data("$tempReadonly")){var a=y.data("$tempReadonly");y.removeData("$tempReadonly");u(a);m(a)}y.data("$tempDisabled")&&(a=y.data("$tempDisabled"),y.removeData("$tempDisabled"),u(a));y.data("$tempSetValue")&&(y.settings.value=y.data("$tempSetValue"),y.removeData("$tempSetValue"));y.settings.value&&y.setValue(y.settings.value);r();y.settings.serverparam&&
b.execCommand("serverparam",y.settings.serverparam)});y.editor=b}function l(a){if(y.settings.editorListeners)for(var b in y.settings.editorListeners)f(a,b,y.settings.editorListeners[b])}function f(a,b,f){a.addListener(b,function(){f.apply(y,arguments)})}function u(a){a?y.editor.setDisabled():y.editor.setEnabled()}function m(b){a.sbtools.toggleRichEditorReadonlyClass(y.find(".edui-editor-iframeholder"),b)}var y=this,t;if(y.data("$sbueditor")){if(b){if(void 0===b.value||null===b.value)b.value=q().getValue();
t=a.extend(!0,{},q().settings,b||{});q().settings=t;q().reload()}return q()}t=a.extend(!0,{},k,b||{});y.settings=t;a.sbbase.mixinWidget(y);y.getValue=function(){return y.editor.hasContents()?y.editor.getContent():""};y.setValue=function(a){if(!y.isCreatedEditor)return y.data("$tempSetValue",a),y;y.editor.setContent(a);y.settings.value=a;return y};y.getEditor=function(){return y.editor};y.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?"value"==a?y.setValue(b):("required"==a?y.settings.required=
b:"readonly"==a?(y.settings.readonly=b,y.isCreatedEditor?(u(b),m(b)):y.data("$tempReadonly",b)):"disabled"==a&&(y.settings.disabled=b,y.isCreatedEditor?u(b):y.data("$tempDisabled",b)),y.attr(a,b)):y.removeAttr(a)});return y};y.getDefaultOptions=function(){return k};y.reload=function(){y.empty();y.isCreatedEditor=!1;y.editor.destroy();a.sbtools.initController.removeInitCompleteFlag(y,"$sbueditor");return n()};y.validate=function(){if(a.isFunction(y.settings.callback))return this.settings.callback.apply(this,
[this.settings,this.getValue()]);if(t.required){y.editor.hasContents()||y._$textarea.val("");var b=!1,b=a.sbvalidator.required(y._$textarea[0],y.getValue());if(!b)return a.sbvalidator.TEXT_REQUIRED}return""};y.getName=function(){return y.settings.name};return this.each(function(){n()})}})(jQuery);
(function(a){a.extend({sbvalidator:{}});a.extend(a.sbvalidator,{required:function(k,b){if("select"===k.nodeName.toLowerCase()){var q=a(k).val();return q&&0<q.length}return this.checkable(k)?0<this.getLength(b,k):0<a.trim(b).length},checkable:function(a){return/radio|checkbox/i.test(a.type)},getLength:function(k,b){switch(b.nodeName.toLowerCase()){case "select":return a("option:selected",b).length;case "input":if(this.checkable(b))return this.findByName(b.name).filter(":checked").length}return k.length},
findByName:function(k){return a("input[name='"+k+"']")},minlength:function(k,b,q){return(a.isArray(b)?b.length:this.getLength(b,k))>=q},maxlength:function(k,b,q){return(a.isArray(b)?b.length:this.getLength(b,k))<=q},valid:function(a,b){return a.test(b)},TEXT_REQUIRED:"不能为空",TEXT_MIN_LENGTH:"长度不能小于{0}个字符",TEXT_MAX_LENGTH:"长度不能大于{0}个字符",TEXT_REGEX:"格式不正确",AREASELECT_TEXT_REQUIRED:"请填写完整的地区信息",minLengthPromptMessage:function(a){return this.TEXT_MIN_LENGTH.format(a)},maxLengthPromptMessage:function(a){return this.TEXT_MAX_LENGTH.format(a)}})})(jQuery);
(function(a){var k={className:"sinobest-wizard",submitButton:"",onSeekNext:null,onBeforeSeekNext:null,onSeekPrev:null,onBeforeSeekPrev:null,next:"下一步",prev:"上一步",customStepTitle:function(a){return"第"+(a+1)+"步"},stepContainerWidth:null,stepWidth:null,onInitComplete:null};a.fn.sbwizard=function(b){function q(){return u.data("$wizard")}function r(){a.sbtools.initController.initComplete(u,"$sbwizard",function(){u.data("$wizard")||u.data("$wizard",u)},u.settings.onInitComplete)}function n(){u.originalHtml=
u.html();u.addClass(u.settings.className);u.addClass(a.sbtools.CONSTANTS.UICLASS.BASE_UI);var b=u.find("fieldset");u.count=b.size();u.submitBtnName="#"+u.settings.submitButton;u.trueStepIndex=0;a(u.submitBtnName).hide();u.$steps=a('<div class="sinobest-wizard-step-container"></div>');u.settings.stepContainerWidth&&u.$steps.css("width",u.settings.stepContainerWidth);u.$stepsContent=a('<div class="sinobest-wizard-step-content"></div>');u.$steps.append(u.$stepsContent);u.before(u.$steps);b.each(function(k){a(this).wrap("<div id='step"+
k+"'></div>");a(this).append("<p id='step"+k+"commands'></p>");var m=a(this).find("legend").html(),e="step-number",n=k+1;k==b.size()-1&&(e="step-tick",n="");u.$stepsContent.append('<div class="sinobest-wizard-step"><div data-index="'+k+'" class="step-number-content step-status-gray"><div class="'+e+'">'+n+'</div></div><div class="step-label">'+m+"</div>");0==k?(l(k),f(k)):k==u.count-1?(a("#step"+k).hide(),z(k)):(a("#step"+k).hide(),z(k),l(k))});u.settings.stepWidth&&u.$stepsContent.find(".sinobest-wizard-step").css("width",
u.settings.stepWidth);u.$stepsContent.find(".step-number-content").off("click").on("click",function(){var b=u.$stepsContent.find(".step-status-current"),k=a(this).attr("data-index"),b=b.attr("data-index");if(!(k>u.trueStepIndex)){for(var e=u.trueStepIndex;e>k;e--)if(u.find("#step"+e+"Prev").data("dataHidden"))return;a("#step"+parseInt(b)).hide();a("#step"+parseInt(k)).show();parseInt(k)+1<u.count?a(u.submitBtnName).hide():a(u.submitBtnName).show();f(k)}});r();u.data("$wizard",u);return u}function z(k){var l=
"step"+k,m=a("<a href='javascript:void(0);' class='prev'></a>");m.attr("id",l+"Prev");m.text("<"+u.settings.prev);a("#"+l+"commands").append(m);a("#"+l+"Prev").bind("click",function(e){if(a.isFunction(b.onBeforeSeekPrev))b.onBeforeSeekPrev(k);a("#"+l).hide();a("#step"+(k-1)).show();a(u.submitBtnName).hide();f(k-1);if(a.isFunction(b.onSeekPrev))b.onSeekPrev(k)})}function l(k){var l="step"+k,m=a("<a href='javascript:void(0);' class='next'></a>");m.attr("id",l+"Next");m.text(u.settings.next+">");a("#"+
l+"commands").append(m);a("#"+l+"Next").bind("click",function(e){e=!0;a.isFunction(b.onBeforeSeekNext)&&(e=b.onBeforeSeekNext(k));if(e&&(a("#"+l).hide(),a("#step"+(k+1)).show(),u.trueStepIndex=k+1,k+2==u.count&&a(u.submitBtnName).show(),f(k+1),a.isFunction(b.onSeekNext)))b.onSeekNext(k)})}function f(a){u.$stepsContent.find(".step-status-current").removeClass("step-status-current").addClass("step-status-gray");u.$stepsContent.find(".step-number-content[data-index='"+a+"']").removeClass("step-status-gray").removeClass("step-status-passed").addClass("step-status-current");
a=Number(a);for(var b=0;b<a;b++)u.$stepsContent.find(".step-number-content[data-index='"+b+"']").removeClass("step-status-gray").addClass("step-status-passed");for(a+=1;a<u.count;a++)u.$stepsContent.find(".step-number-content[data-index='"+a+"']").removeClass("step-status-passed").addClass("step-status-gray")}var u=this,m;if(u.data("$wizard"))return b&&(m=a.extend({},q().settings,b||{}),q().settings=m,q().reload()),q();m=a.extend({},k,b||{});u.settings=m;a.sbbase.mixinWidget(u,{isAddValueMethod:!1});
u.seekNext=function(){var a=u.$steps.find("li.current").attr("data-index");u.find("a.next").eq(a).click()};u.seekPrev=function(){var a=u.$steps.find("li.current").attr("data-index");0!=a&&u.find("a.prev").eq(a-1).click()};u.setState=function(b){a.each(b,function(a,b){void 0!==b&&null!==b?u.attr(a,b):u.removeAttr(a)});return u};u.getDefaultOptions=function(){return k};u.reload=function(){u.$steps.remove();u.empty();u.html(u.originalHtml);a.sbtools.initController.removeInitCompleteFlag(u,"$sbwizard");
return n()};u.displayPrevButton=function(a,b){var f=u.find("#step"+a+"Prev");b?(f.show(),f.removeData("dataHidden")):(f.hide(),f.data("dataHidden",!0))};u.displayNextButton=function(a,b){var f=u.find("#step"+a+"Next");b?f.show():f.hide()};return this.each(function(){n()})}})(jQuery);
